function showMenu(){var n=document,t=Math.max(Math.max(n.body.scrollHeight,n.documentElement.scrollHeight),Math.max(n.body.offsetHeight,n.documentElement.offsetHeight),Math.max(n.body.clientHeight,n.documentElement.clientHeight));$("#mobile-main-nav").css({"min-height":t});$("body").toggleClass("show-nav")}function activateNavLink(){var n=window.location.href.toString().split(window.location.host)[1];$("#main-nav").find('a[href$="'+n+'"]').parent().addClass("active")}function configureFormValidation(n){$("#"+n).submit(function(){return $(this).valid()})}function sanitize(n){return n.startsWith("http")?n.replace(/\\/g,"/"):n.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\//g,"\\\\")}function isAuthorized(n,t){var i="/OAuth2/IsAuthorized/"+n;t&&(i=i+"?providerType="+t);$.ajax({type:"GET",url:i,dataType:"json",success:function(t){t.Authorized?authorized(n):t.Reauthorize?mustReauthorize(n):notAuthorized(n)},error:function(){notAuthorized(n)}})}function authorized(n){$("."+n+"AuthWait").fadeOut(400,function(){$("."+n+"Authorized").fadeIn()})}function notAuthorized(n){$("."+n+"AuthWait").fadeOut(400,function(){$("."+n+"Unauthorized").fadeIn()})}function mustReauthorize(n){$("."+n+"AuthWait").fadeOut(400,function(){$("."+n+"Reauthorize").fadeIn()})}function deauthorize(n,t){return $.ajax({type:"POST",url:"/"+n+"/DeauthorizeAsync/"+t,dataType:"json",success:function(){$("."+t+"Authorized").fadeOut(400,function(){$("."+t+"Unauthorized").fadeIn()})}}),!1}function authorize(n,t){return $.ajax({type:"POST",url:"/"+n+"/AuthorizeAsync/"+t,dataType:"json",success:function(n){n.Redirect?window.location.replace(n.RedirectUrl):n.Authorized&&$("."+t+"Unauthorized").fadeOut(400,function(){$("."+t+"Authorized").fadeIn()})}}),!1}function authorizeShare(){if($("#addShareForm").valid()){var n=$("#addShare").val();$.ajax({type:"POST",url:"/FileShare/AuthorizeAsync",dataType:"json",data:"{Value: '"+sanitize(n)+"'}",contentType:"application/json; charset=utf-8",success:function(){var t=getNewDiv(n);$("#removeShare").append(t);$("#addShare").val("")}})}return!1}function getNewDiv(n){return'<div class="half-bottom remove"><input class="path" type="text" name="value" readonly="readonly" value="'+n+'"><div class="bumper" style="margin-left:0"><input type="submit" value="" name="submit" onclick="return deauthorizeShare(this);"><\/div><\/div>'}function deauthorizeShare(n){var t=$(n).parent().parent(),i=t.find(".path").val();return $.ajax({type:"POST",url:"/FileShare/DeauthorizeAsync",dataType:"json",data:"{Value: '"+sanitize(i)+"'}",contentType:"application/json; charset=utf-8",success:function(){$("#addShare").val(i);t.fadeOut(400,function(){t.remove()})}}),!1}function validateUncPath(n,t){var i=!1;return $.ajax({type:"POST",url:"/FileShare/Validate"+n,data:"{Value: '"+sanitize(t)+"'}",dataType:"json",contentType:"application/json; charset=utf-8",async:!1,success:function(n){$(".field-validation").css("display",n.IsValid?"none":"block");i=n.IsValid}}),i}function configureMarkdownEditor(n,t){var u="-"+t+"-"+n,i=Markdown.getSanitizingConverter(),r;i.hooks.chain("preBlockGamut",function(n,t){return n.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm,function(n,i){return"<blockquote>"+t(i)+"<\/blockquote>\n"})});r=new Markdown.Editor(i,u);r.run()}var _gaq,Markdown,qq,ExifRestorer,CryptoJS;if(!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)}("undefined"!=typeof window?window:this,function(n,t){function ui(n){var t=n.length,r=i.type(n);return"function"===r||i.isWindow(n)?!1:1===n.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in n}function fi(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(ef.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return et.call(t,n)>=0!==r})}function ur(n,t){while((n=n[t])&&1!==n.nodeType);return n}function of(n){var t=ei[n]={};return i.each(n.match(c)||[],function(n,i){t[i]=!0}),t}function ct(){u.removeEventListener("DOMContentLoaded",ct,!1);n.removeEventListener("load",ct,!1);i.ready()}function p(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=i.expando+Math.random()}function fr(n,t,r){var u;if(void 0===r&&1===n.nodeType)if(u="data-"+t.replace(hf,"-$1").toLowerCase(),r=n.getAttribute(u),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:sf.test(r)?i.parseJSON(r):r}catch(f){}e.set(n,t,r)}else r=void 0;return r}function at(){return!0}function g(){return!1}function hr(){try{return u.activeElement}catch(n){}}function vr(n,t){return i.nodeName(n,"table")&&i.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function bf(n){return n.type=(null!==n.getAttribute("type"))+"/"+n.type,n}function kf(n){var t=pf.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function oi(n,t){for(var i=0,u=n.length;u>i;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function yr(n,t){var u,c,f,s,h,l,a,o;if(1===t.nodeType){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),o=s.events)){delete h.handle;h.events={};for(f in o)for(u=0,c=o[f].length;c>u;u++)i.event.add(t,f,o[f][u])}e.hasData(n)&&(l=e.access(n),a=i.extend({},l),e.set(t,a))}}function o(n,t){var r=n.getElementsByTagName?n.getElementsByTagName(t||"*"):n.querySelectorAll?n.querySelectorAll(t||"*"):[];return void 0===t||t&&i.nodeName(n,t)?i.merge([n],r):r}function df(n,t){var i=t.nodeName.toLowerCase();"input"===i&&er.test(n.type)?t.checked=n.checked:("input"===i||"textarea"===i)&&(t.defaultValue=n.defaultValue)}function pr(t,r){var f,u=i(r.createElement(t)).appendTo(r.body),e=n.getDefaultComputedStyle&&(f=n.getDefaultComputedStyle(u[0]))?f.display:i.css(u[0],"display");return u.detach(),e}function hi(n){var r=u,t=si[n];return t||(t=pr(n,r),"none"!==t&&t||(vt=(vt||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=vt[0].contentDocument,r.write(),r.close(),t=pr(n,r),vt.detach()),si[n]=t),t}function rt(n,t,r){var e,o,s,u,f=n.style;return r=r||yt(n),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),ci.test(u)&&wr.test(t)&&(e=f.width,o=f.minWidth,s=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=e,f.minWidth=o,f.maxWidth=s)),void 0!==u?u+"":u}function br(n,t){return{get:function(){return n()?void delete this.get:(this.get=t).apply(this,arguments)}}}function gr(n,t){if(t in n)return t;for(var r=t[0].toUpperCase()+t.slice(1),u=t,i=dr.length;i--;)if(t=dr[i]+r,t in n)return t;return u}function nu(n,t,i){var r=ne.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function tu(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+w[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+w[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+w[e]+"Width",!0,f))):(o+=i.css(n,"padding"+w[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+w[e]+"Width",!0,f)));return o}function iu(n,t,r){var o=!0,u="width"===t?n.offsetWidth:n.offsetHeight,e=yt(n),s="border-box"===i.css(n,"boxSizing",!1,e);if(0>=u||null==u){if(u=rt(n,t,e),(0>u||null==u)&&(u=n.style[t]),ci.test(u))return u;o=s&&(f.boxSizingReliable()||u===n.style[t]);u=parseFloat(u)||0}return u+tu(n,t,r||(s?"border":"content"),o,e)+"px"}function ru(n,t){for(var e,u,s,o=[],f=0,h=n.length;h>f;f++)u=n[f],u.style&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||"none"!==e||(u.style.display=""),""===u.style.display&&it(u)&&(o[f]=r.access(u,"olddisplay",hi(u.nodeName)))):(s=it(u),"none"===e&&s||r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;h>f;f++)u=n[f],u.style&&(t&&"none"!==u.style.display&&""!==u.style.display||(u.style.display=t?o[f]||"":"none"));return n}function s(n,t,i,r,u){return new s.prototype.init(n,t,i,r,u)}function fu(){return setTimeout(function(){nt=void 0}),nt=i.now()}function bt(n,t){var r,u=0,i={height:n};for(t=t?1:0;4>u;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function eu(n,t,i){for(var u,f=(ut[t]||[]).concat(ut["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function fe(n,t,u){var f,a,p,v,o,w,h,b,l=this,y={},s=n.style,c=n.nodeType&&it(n),e=r.get(n,"fxshow");u.queue||(o=i._queueHooks(n,"fx"),null==o.unqueued&&(o.unqueued=0,w=o.empty.fire,o.empty.fire=function(){o.unqueued||w()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--;i.queue(n,"fx").length||o.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(u.overflow=[s.overflow,s.overflowX,s.overflowY],h=i.css(n,"display"),b="none"===h?r.get(n,"olddisplay")||hi(n.nodeName):h,"inline"===b&&"none"===i.css(n,"float")&&(s.display="inline-block"));u.overflow&&(s.overflow="hidden",l.always(function(){s.overflow=u.overflow[0];s.overflowX=u.overflow[1];s.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],re.exec(a)){if(delete t[f],p=p||"toggle"===a,a===(c?"hide":"show")){if("show"!==a||!e||void 0===e[f])continue;c=!0}y[f]=e&&e[f]||i.style(n,f)}else h=void 0;if(i.isEmptyObject(y))"inline"===("none"===h?hi(n.nodeName):h)&&(s.display=h);else{e?"hidden"in e&&(c=e.hidden):e=r.access(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=eu(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start="width"===f||"height"===f?1:0))}}function ee(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ou(n,t,r){var h,e,o=0,l=wt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(e)return!1;for(var s=nt||fu(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,o=u.tweens.length;o>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&o?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:nt||fu(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(e)return this;for(e=!0;r>i;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),s=u.props;for(ee(s,u.opts.specialEasing);l>o;o++)if(h=wt[o].call(u,n,s,u.opts))return h;return i.map(s,eu,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function pu(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(c)||[];if(i.isFunction(r))while(u=e[f++])"+"===u[0]?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function wu(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);return"string"!=typeof s||o||f[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),e(s),!1)}),h}var f={},o=n===li;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ai(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function ae(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return(f!==r[0]&&r.unshift(f),i[f])}function ve(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function vi(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||pe.test(n)?u(n,i):vi(n+"["+("object"==typeof i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)vi(n+"["+f+"]",t[f],r,u)}function ku(n){return i.isWindow(n)?n:9===n.nodeType&&n.defaultView}var k=[],a=k.slice,bi=k.concat,ii=k.push,et=k.indexOf,ot={},nf=ot.toString,ri=ot.hasOwnProperty,f={},u=n.document,ki="2.1.1",i=function(n,t){return new i.fn.init(n,t)},tf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rf=/^-ms-/,uf=/-([\da-z])/gi,ff=function(n,t){return t.toUpperCase()},y,st,nr,tr,ir,rr,c,ei,ht,l,d,vt,si,oe,su,tt,hu,kt,cu,dt,gt,yi,ti,pi,wi,du,gu;i.fn=i.prototype={jquery:ki,constructor:i,selector:"",length:0,toArray:function(){return a.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:a.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ii,sort:k.sort,splice:k.splice};i.extend=i.fn.extend=function(){var e,f,r,t,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[u]||{},u++),"object"==typeof n||i.isFunction(n)||(n={}),u===c&&(n=this,u--);c>u;u++)if(null!=(e=arguments[u]))for(f in e)r=n[f],t=e[f],n!==t&&(h&&t&&(i.isPlainObject(t)||(o=i.isArray(t)))?(o?(o=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):void 0!==t&&(n[f]=t));return n};i.extend({expando:"jQuery"+(ki+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray,isWindow:function(n){return null!=n&&n===n.window},isNumeric:function(n){return!i.isArray(n)&&n-parseFloat(n)>=0},isPlainObject:function(n){return"object"!==i.type(n)||n.nodeType||i.isWindow(n)?!1:n.constructor&&!ri.call(n.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(n){for(var t in n)return!1;return!0},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?ot[nf.call(n)]||"object":typeof n},globalEval:function(n){var t,r=eval;n=i.trim(n);n&&(1===n.indexOf("use strict")?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(rf,"ms-").replace(uf,ff)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=ui(n);if(i){if(e){for(;f>r;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;f>r;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(tf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(ui(Object(n))?i.merge(r,"string"==typeof n?[n]:n):ii.call(r,n)),r},inArray:function(n,t,i){return null==t?-1:et.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;u>i;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;e>r;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=ui(n),f=[];if(o)for(;e>r;r++)u=t(n[r],r,i),null!=u&&f.push(u);else for(r in n)u=t(n[r],r,i),null!=u&&f.push(u);return bi.apply([],f)},guid:1,proxy:function(n,t){var u,f,r;return"string"==typeof t&&(u=n[t],t=n,n=u),i.isFunction(n)?(f=a.call(arguments,2),r=function(){return n.apply(t||this,f.concat(a.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r):void 0},now:Date.now,support:f});i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ot["[object "+t+"]"]=t.toLowerCase()});y=function(n){function r(n,t,i,r){var w,h,c,v,k,y,d,l,nt,g;if((t?t.ownerDocument||t:s)!==e&&p(t),t=t||e,i=i||[],!n||"string"!=typeof n)return i;if(1!==(v=t.nodeType)&&9!==v)return[];if(a&&!r){if(w=sr.exec(n))if(c=w[1]){if(9===v){if(h=t.getElementById(c),!h||!h.parentNode)return i;if(h.id===c)return i.push(h),i}else if(t.ownerDocument&&(h=t.ownerDocument.getElementById(c))&&ot(t,h)&&h.id===c)return i.push(h),i}else{if(w[2])return b.apply(i,t.getElementsByTagName(n)),i;if((c=w[3])&&u.getElementsByClassName&&t.getElementsByClassName)return b.apply(i,t.getElementsByClassName(c)),i}if(u.qsa&&(!o||!o.test(n))){if(l=d=f,nt=t,g=9===v&&n,1===v&&"object"!==t.nodeName.toLowerCase()){for(y=et(n),(d=t.getAttribute("id"))?l=d.replace(hr,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",k=y.length;k--;)y[k]=l+yt(y[k]);nt=gt.test(n)&&ii(t.parentNode)||t;g=y.join(",")}if(g)try{return b.apply(i,nt.querySelectorAll(g)),i}catch(tt){}finally{d||t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,i,r)}function ni(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function h(n){return n[f]=!0,n}function c(n){var t=e.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ti(n,i){for(var u=n.split("|"),r=n.length;r--;)t.attrHandle[u[r]]=i}function wi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||ai)-(~n.sourceIndex||ai);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function cr(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function tt(n){return h(function(t){return t=+t,h(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ii(n){return n&&typeof n.getElementsByTagName!==ut&&n}function bi(){}function yt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function ri(n,t,i){var r=t.dir,u=i&&"parentNode"===r,e=ki++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c=[v,e];if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u){if(h=t[f]||(t[f]={}),(s=h[r])&&s[0]===v&&s[1]===e)return c[2]=s[2];if(h[r]=c,c[2]=n(t,i,o))return!0}}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function ar(n,t,i){for(var u=0,f=t.length;f>u;u++)r(n,t[u],i);return i}function pt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function fi(n,t,i,r,u,e){return r&&!r[f]&&(r=fi(r)),u&&!u[f]&&(u=fi(u,e)),h(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||ar(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?k:pt(k,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=pt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt.call(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=pt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function ei(n){for(var s,u,r,o=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ri(function(n){return n===s},c,!0),a=ri(function(n){return nt.call(s,n)>-1},c,!0),e=[function(n,t,i){return!h&&(i||t!==ct)||((s=t).nodeType?l(n,t,i):a(n,t,i))}];o>i;i++)if(u=t.relative[n[i].type])e=[ri(ui(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;o>r;r++)if(t.relative[n[r].type])break;return fi(i>1&&ui(e),i>1&&yt(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(at,"$1"),u,r>i&&ei(n.slice(i,r)),o>r&&ei(n=n.slice(r)),o>r&&yt(n))}e.push(u)}return ui(e)}function vr(n,i){var u=i.length>0,f=n.length>0,o=function(o,s,h,c,l){var y,d,w,k=0,a="0",g=o&&[],p=[],nt=ct,tt=o||f&&t.find.TAG("*",l),it=v+=null==nt?1:Math.random()||.1,rt=tt.length;for(l&&(ct=s!==e&&s);a!==rt&&null!=(y=tt[a]);a++){if(f&&y){for(d=0;w=n[d++];)if(w(y,s,h)){c.push(y);break}l&&(v=it)}u&&((y=!w&&y)&&k--,o&&g.push(y))}if(k+=a,u&&a!==k){for(d=0;w=i[d++];)w(g,p,s,h);if(o){if(k>0)while(a--)g[a]||p[a]||(p[a]=gi.call(c));p=pt(p)}b.apply(c,p);l&&!o&&p.length>0&&k+i.length>1&&r.uniqueSort(c)}return l&&(v=it,ct=nt),g};return u?h(o):o}var it,u,t,ht,oi,et,wt,si,ct,y,rt,p,e,l,a,o,g,lt,ot,f="sizzle"+-new Date,s=n.document,v=0,ki=0,hi=ni(),ci=ni(),li=ni(),bt=function(n,t){return n===t&&(rt=!0),0},ut="undefined",ai=-2147483648,di={}.hasOwnProperty,w=[],gi=w.pop,nr=w.push,b=w.push,vi=w.slice,nt=w.indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(this[t]===n)return t;return-1},kt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",i="[\\x20\\t\\r\\n\\f]",ft="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",yi=ft.replace("w","w#"),pi="\\["+i+"*("+ft+")(?:"+i+"*([*^$|!~]?=)"+i+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+yi+"))|)"+i+"*\\]",dt=":("+ft+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+pi+")*)|.*)\\)|)",at=new RegExp("^"+i+"+|((?:^|[^\\\\])(?:\\\\.)*)"+i+"+$","g"),tr=new RegExp("^"+i+"*,"+i+"*"),ir=new RegExp("^"+i+"*([>+~]|"+i+")"+i+"*"),rr=new RegExp("="+i+"*([^\\]'\"]*?)"+i+"*\\]","g"),ur=new RegExp(dt),fr=new RegExp("^"+yi+"$"),vt={ID:new RegExp("^#("+ft+")"),CLASS:new RegExp("^\\.("+ft+")"),TAG:new RegExp("^("+ft.replace("w","w*")+")"),ATTR:new RegExp("^"+pi),PSEUDO:new RegExp("^"+dt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+i+"*(even|odd|(([+-]|)(\\d*)n|)"+i+"*(?:([+-]|)"+i+"*(\\d+)|))"+i+"*\\)|)","i"),bool:new RegExp("^(?:"+kt+")$","i"),needsContext:new RegExp("^"+i+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+i+"*((?:-\\d)?\\d*)"+i+"*\\)|)(?=[^-]|$)","i")},er=/^(?:input|select|textarea|button)$/i,or=/^h\d$/i,st=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,hr=/'|\\/g,k=new RegExp("\\\\([\\da-f]{1,6}"+i+"?|("+i+")|.)","ig"),d=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{b.apply(w=vi.call(s.childNodes),s.childNodes);w[s.childNodes.length].nodeType}catch(yr){b={apply:w.length?function(n,t){nr.apply(n,vi.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}u=r.support={};oi=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};p=r.setDocument=function(n){var v,r=n?n.ownerDocument||n:s,h=r.defaultView;return r!==e&&9===r.nodeType&&r.documentElement?(e=r,l=r.documentElement,a=!oi(r),h&&h!==h.top&&(h.addEventListener?h.addEventListener("unload",function(){p()},!1):h.attachEvent&&h.attachEvent("onunload",function(){p()})),u.attributes=c(function(n){return n.className="i",!n.getAttribute("className")}),u.getElementsByTagName=c(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),u.getElementsByClassName=st.test(r.getElementsByClassName)&&c(function(n){return n.innerHTML="<div class='a'><\/div><div class='a i'><\/div>",n.firstChild.className="i",2===n.getElementsByClassName("i").length}),u.getById=c(function(n){return l.appendChild(n).id=f,!r.getElementsByName||!r.getElementsByName(f).length}),u.getById?(t.find.ID=function(n,t){if(typeof t.getElementById!==ut&&a){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},t.filter.ID=function(n){var t=n.replace(k,d);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(k,d);return function(n){var i=typeof n.getAttributeNode!==ut&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=u.getElementsByTagName?function(n,t){if(typeof t.getElementsByTagName!==ut)return t.getElementsByTagName(n)}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=u.getElementsByClassName&&function(n,t){if(typeof t.getElementsByClassName!==ut&&a)return t.getElementsByClassName(n)},g=[],o=[],(u.qsa=st.test(r.querySelectorAll))&&(c(function(n){n.innerHTML="<select msallowclip=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowclip^='']").length&&o.push("[*^$]="+i+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+i+"*(?:value|"+kt+")");n.querySelectorAll(":checked").length||o.push(":checked")}),c(function(n){var t=r.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+i+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(u.matchesSelector=st.test(lt=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector||l.msMatchesSelector))&&c(function(n){u.disconnectedMatch=lt.call(n,"div");lt.call(n,"[s!='']:x");g.push("!=",dt)}),o=o.length&&new RegExp(o.join("|")),g=g.length&&new RegExp(g.join("|")),v=st.test(l.compareDocumentPosition),ot=v||st.test(l.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},bt=v?function(n,t){if(n===t)return rt=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&i||!u.sortDetached&&t.compareDocumentPosition(n)===i?n===r||n.ownerDocument===s&&ot(s,n)?-1:t===r||t.ownerDocument===s&&ot(s,t)?1:y?nt.call(y,n)-nt.call(y,t):0:4&i?-1:1)}:function(n,t){if(n===t)return rt=!0,0;var i,u=0,o=n.parentNode,h=t.parentNode,f=[n],e=[t];if(!o||!h)return n===r?-1:t===r?1:o?-1:h?1:y?nt.call(y,n)-nt.call(y,t):0;if(o===h)return wi(n,t);for(i=n;i=i.parentNode;)f.unshift(i);for(i=t;i=i.parentNode;)e.unshift(i);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===s?-1:e[u]===s?1:0},r):e};r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){if((n.ownerDocument||n)!==e&&p(n),t=t.replace(rr,"='$1']"),!(!u.matchesSelector||!a||g&&g.test(t)||o&&o.test(t)))try{var i=lt.call(n,t);if(i||u.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(f){}return r(t,e,null,[n]).length>0};r.contains=function(n,t){return(n.ownerDocument||n)!==e&&p(n),ot(n,t)};r.attr=function(n,i){(n.ownerDocument||n)!==e&&p(n);var f=t.attrHandle[i.toLowerCase()],r=f&&di.call(t.attrHandle,i.toLowerCase())?f(n,i,!a):void 0;return void 0!==r?r:u.attributes||!a?n.getAttribute(i):(r=n.getAttributeNode(i))&&r.specified?r.value:null};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};r.uniqueSort=function(n){var r,f=[],t=0,i=0;if(rt=!u.detectDuplicates,y=!u.sortStable&&n.slice(0),n.sort(bt),rt){while(r=n[i++])r===n[i]&&(t=f.push(i));while(t--)n.splice(f[t],1)}return y=null,n};ht=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=ht(n)}else if(3===t||4===t)return n.nodeValue}else while(r=n[u++])i+=ht(r);return i};t=r.selectors={cacheLength:50,createPseudo:h,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(k,d),n[3]=(n[3]||n[4]||n[5]||"").replace(k,d),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||r.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&ur.test(t)&&(i=et(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(k,d).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+i+")"+n+"("+i+"|$)"))&&hi(n,function(n){return t.test("string"==typeof n.className&&n.className||typeof n.getAttribute!==ut&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),e="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var a,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){while(b){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;w=b="only"===n&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),a=k[n]||[],y=a[0]===v&&a[1],l=a[0]===v&&a[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(1===c.nodeType&&++l&&c===t){k[n]=[v,y,l];break}}else if(d&&(a=(t[f]||(t[f]={}))[n])&&a[0]===v)l=a[1];else while(c=++y&&c&&c[b]||(l=y=0)||w.pop())if((e?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++l&&(d&&((c[f]||(c[f]={}))[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,u=t.pseudos[n]||t.setFilters[n.toLowerCase()]||r.error("unsupported pseudo: "+n);return u[f]?u(i):u.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?h(function(n,t){for(var r,f=u(n,i),e=f.length;e--;)r=nt.call(n,f[e]),n[r]=!(t[r]=f[e])}):function(n){return u(n,0,e)}):u}},pseudos:{not:h(function(n){var i=[],r=[],t=wt(n.replace(at,"$1"));return t[f]?h(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:h(function(n){return function(t){return r(n,t).length>0}}),contains:h(function(n){return function(t){return(t.textContent||t.innerText||ht(t)).indexOf(n)>-1}}),lang:h(function(n){return fr.test(n||"")||r.error("unsupported lang: "+n),n=n.replace(k,d).toLowerCase(),function(t){var i;do if(i=a?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===l},focus:function(n){return n===e.activeElement&&(!e.hasFocus||e.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return or.test(n.nodeName)},input:function(n){return er.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:tt(function(){return[0]}),last:tt(function(n,t){return[t-1]}),eq:tt(function(n,t,i){return[0>i?i+t:i]}),even:tt(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:tt(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:tt(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:tt(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(it in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[it]=cr(it);for(it in{submit:!0,reset:!0})t.pseudos[it]=lr(it);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,et=r.tokenize=function(n,i){var e,f,s,o,u,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(u=n,h=[],c=t.preFilter;u;){(!e||(f=tr.exec(u)))&&(f&&(u=u.slice(f[0].length)||u),h.push(s=[]));e=!1;(f=ir.exec(u))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),u=u.slice(e.length));for(o in t.filter)(f=vt[o].exec(u))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),u=u.slice(e.length));if(!e)break}return i?u.length:u?r.error(n):ci(n,h).slice(0)},wt=r.compile=function(n,t){var r,u=[],e=[],i=li[n+" "];if(!i){for(t||(t=et(n)),r=t.length;r--;)i=ei(t[r]),i[f]?u.push(i):e.push(i);i=li(n,vr(e,u));i.selector=n}return i},si=r.select=function(n,i,r,f){var s,e,o,l,v,c="function"==typeof n&&n,h=!f&&et(n=c.selector||n);if(r=r||[],1===h.length){if(e=h[0]=h[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&u.getById&&9===i.nodeType&&a&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(k,d),i)||[])[0],!i)return r;c&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=vt.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[l=o.type])break;if((v=t.find[l])&&(f=v(o.matches[0].replace(k,d),gt.test(e[0].type)&&ii(i.parentNode)||i))){if(e.splice(s,1),n=f.length&&yt(e),!n)return b.apply(r,f),r;break}}}return(c||wt(n,h))(f,i,!a,r,gt.test(n)&&ii(i.parentNode)||i),r},u.sortStable=f.split("").sort(bt).join("")===f,u.detectDuplicates=!!rt,p(),u.sortDetached=c(function(n){return 1&n.compareDocumentPosition(e.createElement("div"))}),c(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ti("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),u.attributes&&c(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ti("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),c(function(n){return null==n.getAttribute("disabled")})||ti(kt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),r}(n);i.find=y;i.expr=y.selectors;i.expr[":"]=i.expr.pseudos;i.unique=y.uniqueSort;i.text=y.getText;i.isXMLDoc=y.isXML;i.contains=y.contains;var di=i.expr.match.needsContext,gi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ef=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))};i.fn.extend({find:function(n){var t,u=this.length,r=[],f=this;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;u>t;t++)if(i.contains(f[t],this))return!0}));for(t=0;u>t;t++)i.find(n,f[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(fi(this,n||[],!1))},not:function(n){return this.pushStack(fi(this,n||[],!0))},is:function(n){return!!fi(this,"string"==typeof n&&di.test(n)?i(n):n||[],!1).length}});nr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;tr=i.fn.init=function(n,t){var r,f;if(!n)return this;if("string"==typeof n){if(r="<"===n[0]&&">"===n[n.length-1]&&n.length>=3?[null,n,null]:nr.exec(n),!r||!r[1]&&t)return!t||t.jquery?(t||st).find(n):this.constructor(t).find(n);if(r[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),gi.test(r[1])&&i.isPlainObject(t))for(r in t)i.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return f=u.getElementById(r[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=u,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?"undefined"!=typeof st.ready?st.ready(n):n(i):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};tr.prototype=i.fn;st=i(u);ir=/^(?:parents|prev(?:Until|All))/;rr={children:!0,contents:!0,next:!0,prev:!0};i.extend({dir:function(n,t,r){for(var u=[],f=void 0!==r;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(f&&i(n).is(r))break;u.push(n)}return u},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i}});i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;r>n;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=di.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?"string"==typeof n?et.call(i(n),this[0]):et.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.unique(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return ur(n,"nextSibling")},prev:function(n){return ur(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(rr[n]||i.unique(f),ir.test(n)&&f.reverse()),this.pushStack(f)}});c=/\S+/g;ei={};i.Callbacks=function(n){n="string"==typeof n?ei[n]||of(n):i.extend({},n);var u,h,o,c,f,e,t=[],r=!n.once&&[],l=function(i){for(u=n.memory&&i,h=!0,e=c||0,c=0,f=t.length,o=!0;t&&f>e;e++)if(t[e].apply(i[0],i[1])===!1&&n.stopOnFalse){u=!1;break}o=!1;t&&(r?r.length&&l(r.shift()):u?t=[]:s.disable())},s={add:function(){if(t){var r=t.length;!function e(r){i.each(r,function(r,u){var f=i.type(u);"function"===f?n.unique&&s.has(u)||t.push(u):u&&u.length&&"string"!==f&&e(u)})}(arguments);o?f=t.length:u&&(c=r,l(u))}return this},remove:function(){return t&&i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),o&&(f>=u&&f--,e>=u&&e--)}),this},has:function(n){return n?i.inArray(n,t)>-1:!(!t||!t.length)},empty:function(){return t=[],f=0,this},disable:function(){return t=r=u=void 0,this},disabled:function(){return!t},lock:function(){return r=void 0,u||s.disable(),this},locked:function(){return!r},fireWith:function(n,i){return!t||h&&!r||(i=i||[],i=[n,i.slice?i.slice():i],o?r.push(i):l(i)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=a.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?a.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0||(ht.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready"))))}});i.ready.promise=function(t){return ht||(ht=i.Deferred(),"complete"===u.readyState?setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",ct,!1),n.addEventListener("load",ct,!1))),ht.promise(t)};i.ready.promise();l=i.access=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=null==r;if("object"===i.type(r)){f=!0;for(s in r)i.access(n,t,s,r[s],!0,e,o)}else if(void 0!==u&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;c>s;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e};i.acceptData=function(n){return 1===n.nodeType||9===n.nodeType||!+n.nodeType};p.uid=1;p.accepts=i.acceptData;p.prototype={key:function(n){if(!p.accepts(n))return 0;var r={},t=n[this.expando];if(!t){t=p.uid++;try{r[this.expando]={value:t};Object.defineProperties(n,r)}catch(u){r[this.expando]=t;i.extend(n,r)}}return this.cache[t]||(this.cache[t]={}),t},set:function(n,t,r){var f,e=this.key(n),u=this.cache[e];if("string"==typeof t)u[t]=r;else if(i.isEmptyObject(u))i.extend(this.cache[e],t);else for(f in t)u[f]=t[f];return u},get:function(n,t){var i=this.cache[this.key(n)];return void 0===t?i:i[t]},access:function(n,t,r){var u;return void 0===t||t&&"string"==typeof t&&void 0===r?(u=this.get(n,t),void 0!==u?u:this.get(n,i.camelCase(t))):(this.set(n,t,r),void 0!==r?r:t)},remove:function(n,t){var u,r,f,o=this.key(n),e=this.cache[o];if(void 0===t)this.cache[o]={};else for(i.isArray(t)?r=t.concat(t.map(i.camelCase)):(f=i.camelCase(t),(t in e)?r=[t,f]:(r=f,r=(r in e)?[r]:r.match(c)||[])),u=r.length;u--;)delete e[r[u]]},hasData:function(n){return!i.isEmptyObject(this.cache[n[this.expando]]||{})},discard:function(n){n[this.expando]&&delete this.cache[n[this.expando]]}};var r=new p,e=new p,sf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hf=/([A-Z])/g;i.extend({hasData:function(n){return e.hasData(n)||r.hasData(n)},data:function(n,t,i){return e.access(n,t,i)},removeData:function(n,t){e.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var o,f,s,u=this[0],h=u&&u.attributes;if(void 0===n){if(this.length&&(s=e.get(u),1===u.nodeType&&!r.get(u,"hasDataAttrs"))){for(o=h.length;o--;)h[o]&&(f=h[o].name,0===f.indexOf("data-")&&(f=i.camelCase(f.slice(5)),fr(u,f,s[f])));r.set(u,"hasDataAttrs",!0)}return s}return"object"==typeof n?this.each(function(){e.set(this,n)}):l(this,function(t){var r,f=i.camelCase(n);if(u&&void 0===t){if((r=e.get(u,n),void 0!==r)||(r=e.get(u,f),void 0!==r)||(r=fr(u,f,void 0),void 0!==r))return r}else this.each(function(){var i=e.get(this,f);e.set(this,f,t);-1!==n.indexOf("-")&&void 0!==i&&e.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){e.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return(t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[])},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return"string"!=typeof n&&(t=n,n="fx",r--),arguments.length<r?i.queue(this[0],n):void 0===t?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);"fx"===n&&"inprogress"!==r[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var lt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=["Top","Right","Bottom","Left"],it=function(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)},er=/^(?:checkbox|radio)$/i;!function(){var i=u.createDocumentFragment(),n=i.appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);f.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";f.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();d="undefined";f.focusinBubbles="onfocusin"in n;var cf=/^key/,lf=/^(?:mouse|pointer|contextmenu)|click/,or=/^(?:focusinfocus|focusoutblur)$/,sr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,b,h,s,l,o,k,g,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){if(typeof i!==d&&i.event.triggered!==t.type)return i.event.dispatch.apply(n,arguments)}),t=(t||"").match(c)||[""],b=t.length;b--;)w=sr.exec(t[b])||[],o=g=w[1],k=(w[2]||"").split(".").sort(),o&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},h=i.extend({type:o,origType:g,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:k.join(".")},v),(l=p[o])||(l=p[o]=[],l.delegateCount=0,s.setup&&s.setup.call(n,f,k,y)!==!1||n.addEventListener&&n.addEventListener(o,y,!1)),s.add&&(s.add.call(n,h),h.handler.guid||(h.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,h):l.push(h),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var p,k,h,v,w,s,l,a,o,b,d,y=r.hasData(n)&&r.get(n);if(y&&(v=y.events)){for(t=(t||"").match(c)||[""],w=t.length;w--;)if(h=sr.exec(t[w])||[],o=d=h[1],b=(h[2]||"").split(".").sort(),o){for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],h=h[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=p=a.length;p--;)s=a[p],!e&&d!==s.origType||u&&u.guid!==s.guid||h&&!h.test(s.namespace)||f&&f!==s.selector&&("**"!==f||!s.selector)||(a.splice(p,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,y.handle)!==!1||i.removeEvent(n,o,y.handle),delete v[o])}else for(o in v)i.event.remove(n,o+t[w],u,f,!0);i.isEmptyObject(v)&&(delete y.handle,r.remove(n,"events"))}},trigger:function(t,f,e,o){var w,s,c,b,a,v,l,p=[e||u],h=ri.call(t,"type")?t.type:t,y=ri.call(t,"namespace")?t.namespace.split("."):[];if(s=c=e=e||u,3!==e.nodeType&&8!==e.nodeType&&!or.test(h+i.event.triggered)&&(h.indexOf(".")>=0&&(y=h.split("."),h=y.shift(),y.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=y.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=e),f=null==f?[t]:i.makeArray(f,[t]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(b=l.delegateType||h,or.test(b+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||u)&&p.push(c.defaultView||c.parentWindow||n)}for(w=0;(s=p[w++])&&!t.isPropagationStopped();)t.type=w>1?b:l.bindType||h,v=(r.get(s,"events")||{})[t.type]&&r.get(s,"handle"),v&&v.apply(s,f),v=a&&s[a],v&&v.apply&&i.acceptData(s)&&(t.result=v.apply(s,f),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||l._default&&l._default.apply(p.pop(),f)!==!1||!i.acceptData(e)||a&&i.isFunction(e[h])&&!i.isWindow(e)&&(c=e[a],c&&(e[a]=null),i.event.triggered=h,e[h](),i.event.triggered=void 0,c&&(e[a]=c)),t.result}},dispatch:function(n){n=i.event.fix(n);var o,s,e,u,t,h=[],c=a.call(arguments),l=(r.get(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,l),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(t=u.handlers[s++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(t.namespace))&&(n.handleObj=t,n.data=t.data,e=((i.event.special[t.origType]||{}).handle||t.handler).apply(u.elem,c),void 0!==e&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&(!n.button||"click"!==n.type))for(;r!==this;r=r.parentNode||this)if(r.disabled!==!0||"click"!==n.type){for(u=[],e=0;s>e;e++)o=t[e],f=o.selector+" ",void 0===u[f]&&(u[f]=o.needsContext?i(f,this).index(r)>=0:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,f=t.button;return null==n.pageX&&null!=t.clientX&&(e=n.target.ownerDocument||u,i=e.documentElement,r=e.body,n.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),n.which||void 0===f||(n.which=1&f?1:2&f?3:4&f?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=lf.test(r)?this.mouseHooks:cf.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),3===n.target.nodeType&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==hr()&&this.focus)return(this.focus(),!1)},delegateType:"focusin"},blur:{trigger:function(){if(this===hr()&&this.blur)return(this.blur(),!1)},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&i.nodeName(this,"input"))return(this.click(),!1)},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)};i.Event=function(n,t){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?at:g):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),void(this[i.expando]=!0)):new i.Event(n,t)};i.Event.prototype={isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=at;n&&n.preventDefault&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=at;n&&n.stopPropagation&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=at;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return(!r||r!==f&&!i.contains(f,r))&&(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});f.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});i.fn.extend({on:function(n,t,r,u,f){var e,o;if("object"==typeof n){"string"!=typeof t&&(r=r||t,t=void 0);for(o in n)this.on(o,t,r,n[o],f);return this}if(null==r&&null==u?(u=t,r=t=void 0):null==u&&("string"==typeof t?(u=r,r=void 0):(u=r,r=t,t=void 0)),u===!1)u=g;else if(!u)return this;return 1===f&&(e=u,u=function(n){return i().off(n),e.apply(this,arguments)},u.guid=e.guid||(e.guid=i.guid++)),this.each(function(){i.event.add(this,n,u,r,t)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof n){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=g),this.each(function(){i.event.remove(this,n,r,t)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var cr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lr=/<([\w:]+)/,af=/<|&#?\w+;/,vf=/<(?:script|style|link)/i,yf=/checked\s*(?:[^=]|=\s*.checked.)/i,ar=/^$|\/(?:java|ecma)script/i,pf=/^true\/(.*)/,wf=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,h={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};h.optgroup=h.option;h.tbody=h.tfoot=h.colgroup=h.caption=h.thead;h.th=h.td;i.extend({clone:function(n,t,r){var u,c,s,e,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!(f.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(e=o(h),s=o(n),u=0,c=s.length;c>u;u++)df(s[u],e[u]);if(t)if(r)for(s=s||o(n),e=e||o(h),u=0,c=s.length;c>u;u++)yr(s[u],e[u]);else yr(n,h);return e=o(h,"script"),e.length>0&&oi(e,!l&&o(n,"script")),h},buildFragment:function(n,t,r,u){for(var f,e,y,l,p,a,s=t.createDocumentFragment(),v=[],c=0,w=n.length;w>c;c++)if(f=n[c],f||0===f)if("object"===i.type(f))i.merge(v,f.nodeType?[f]:f);else if(af.test(f)){for(e=e||s.appendChild(t.createElement("div")),y=(lr.exec(f)||["",""])[1].toLowerCase(),l=h[y]||h._default,e.innerHTML=l[1]+f.replace(cr,"<$1><\/$2>")+l[2],a=l[0];a--;)e=e.lastChild;i.merge(v,e.childNodes);e=s.firstChild;e.textContent=""}else v.push(t.createTextNode(f));for(s.textContent="",c=0;f=v[c++];)if((!u||-1===i.inArray(f,u))&&(p=i.contains(f.ownerDocument,f),e=o(s.appendChild(f),"script"),p&&oi(e),r))for(a=0;f=e[a++];)ar.test(f.type||"")&&r.push(f);return s},cleanData:function(n){for(var f,t,o,u,h=i.event.special,s=0;void 0!==(t=n[s]);s++){if(i.acceptData(t)&&(u=t[r.expando],u&&(f=r.cache[u]))){if(f.events)for(o in f.events)h[o]?i.event.remove(t,o):i.removeEvent(t,o,f.handle);r.cache[u]&&delete r.cache[u]}delete e.cache[t[e.expando]]}}});i.fn.extend({text:function(n){return l(this,function(n){return void 0===n?i.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=n)})},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=vr(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=vr(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,f=n?i.filter(n,this):this,u=0;null!=(r=f[u]);u++)t||1!==r.nodeType||i.cleanData(o(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&oi(o(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;null!=(n=this[t]);t++)1===n.nodeType&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return l(this,function(n){var t=this[0]||{},r=0,u=this.length;if(void 0===n&&1===t.nodeType)return t.innerHTML;if("string"==typeof n&&!vf.test(n)&&!h[(lr.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(cr,"<$1><\/$2>");try{for(;u>r;r++)t=this[r]||{},1===t.nodeType&&(i.cleanData(o(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,function(t){n=this.parentNode;i.cleanData(o(this));n&&n.replaceChild(t,this)}),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t){n=bi.apply([],n);var h,v,s,c,u,y,e=0,l=this.length,w=this,b=l-1,a=n[0],p=i.isFunction(a);if(p||l>1&&"string"==typeof a&&!f.checkClone&&yf.test(a))return this.each(function(i){var r=w.eq(i);p&&(n[0]=a.call(this,i,r.html()));r.domManip(n,t)});if(l&&(h=i.buildFragment(n,this[0].ownerDocument,!1,this),v=h.firstChild,1===h.childNodes.length&&(h=v),v)){for(s=i.map(o(h,"script"),bf),c=s.length;l>e;e++)u=h,e!==b&&(u=i.clone(u,!0,!0),c&&i.merge(s,o(u,"script"))),t.call(this[e],u,e);if(c)for(y=s[s.length-1].ownerDocument,i.map(s,kf),e=0;c>e;e++)u=s[e],ar.test(u.type||"")&&!r.access(u,"globalEval")&&i.contains(y,u)&&(u.src?i._evalUrl&&i._evalUrl(u.src):i.globalEval(u.textContent.replace(wf,"")))}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ii.apply(f,u.get());return this.pushStack(f)}});si={};var wr=/^margin/,ci=new RegExp("^("+lt+")(?!px)[a-z%]+$","i"),yt=function(n){return n.ownerDocument.defaultView.getComputedStyle(n,null)};!function(){var s,o,e=u.documentElement,r=u.createElement("div"),t=u.createElement("div");if(t.style){t.style.backgroundClip="content-box";t.cloneNode(!0).style.backgroundClip="";f.clearCloneStyle="content-box"===t.style.backgroundClip;r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute";r.appendChild(t);function h(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";t.innerHTML="";e.appendChild(r);var i=n.getComputedStyle(t,null);s="1%"!==i.top;o="4px"===i.width;e.removeChild(r)}n.getComputedStyle&&i.extend(f,{pixelPosition:function(){return h(),s},boxSizingReliable:function(){return null==o&&h(),o},reliableMarginRight:function(){var f,i=t.appendChild(u.createElement("div"));return i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",e.appendChild(r),f=!parseFloat(n.getComputedStyle(i,null).marginRight),e.removeChild(r),f}})}}();i.swap=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};var gf=/^(none|table(?!-c[ea]).+)/,ne=new RegExp("^("+lt+")(.*)$","i"),te=new RegExp("^([+-])=("+lt+")","i"),ie={position:"absolute",visibility:"hidden",display:"block"},kr={letterSpacing:"0",fontWeight:"400"},dr=["Webkit","O","Moz","ms"];i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=rt(n,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,t,r,u){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var o,h,e,s=i.camelCase(t),c=n.style;return t=i.cssProps[s]||(i.cssProps[s]=gr(c,s)),e=i.cssHooks[t]||i.cssHooks[s],void 0===r?e&&"get"in e&&void 0!==(o=e.get(n,!1,u))?o:c[t]:(h=typeof r,"string"===h&&(o=te.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(i.css(n,t)),h="number"),null!=r&&r===r&&("number"!==h||i.cssNumber[s]||(r+="px"),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),e&&"set"in e&&void 0===(r=e.set(n,r,u))||(c[t]=r)),void 0)}},css:function(n,t,r,u){var f,s,e,o=i.camelCase(t);return t=i.cssProps[o]||(i.cssProps[o]=gr(n.style,o)),e=i.cssHooks[t]||i.cssHooks[o],e&&"get"in e&&(f=e.get(n,!0,r)),void 0===f&&(f=rt(n,t,u)),"normal"===f&&t in kr&&(f=kr[t]),""===r||r?(s=parseFloat(f),r===!0||i.isNumeric(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return gf.test(i.css(n,"display"))&&0===n.offsetWidth?i.swap(n,ie,function(){return iu(n,t,u)}):iu(n,t,u)},set:function(n,r,u){var f=u&&yt(n);return nu(n,r,u?tu(n,t,u,"border-box"===i.css(n,"boxSizing",!1,f),f):0)}}});i.cssHooks.marginRight=br(f.reliableMarginRight,function(n,t){if(t)return i.swap(n,{display:"inline-block"},rt,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};wr.test(n)||(i.cssHooks[n+t].set=nu)});i.fn.extend({css:function(n,t){return l(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=yt(n),e=t.length;e>u;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return void 0!==r?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return ru(this,!0)},hide:function(){return ru(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){it(this)?i(this).show():i(this).hide()})}});i.Tween=s;s.prototype={constructor:s,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=s.propHooks[this.prop];return n&&n.get?n.get(this):s.propHooks._default.get(this)},run:function(n){var r,t=s.propHooks[this.prop];return this.pos=r=this.options.duration?i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):n,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):s.propHooks._default.set(this),this}};s.prototype.init.prototype=s.prototype;s.propHooks={_default:{get:function(n){var t;return null==n.elem[n.prop]||n.elem.style&&null!=n.elem.style[n.prop]?(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0):n.elem[n.prop]},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(null!=n.elem.style[i.cssProps[n.prop]]||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.fx=s.prototype.init;i.fx.step={};var nt,pt,re=/^(?:toggle|show|hide)$/,uu=new RegExp("^(?:([+-])=|)("+lt+")([a-z%]*)$","i"),ue=/queueHooks$/,wt=[fe],ut={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),r=uu.exec(t),e=r&&r[3]||(i.cssNumber[n]?"":"px"),u=(i.cssNumber[n]||"px"!==e&&+s)&&uu.exec(i.css(f.elem,n)),o=1,h=20;if(u&&u[3]!==e){e=e||u[3];r=r||[];u=+s||1;do o=o||".5",u/=o,i.style(f.elem,n,u+e);while(o!==(o=f.cur()/s)&&1!==o&&--h)}return r&&(u=f.start=+u||+s||0,f.unit=e,f.end=r[1]?u+(r[1]+1)*r[2]:+r[2]),f}]};i.Animation=i.extend(ou,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;f>u;u++)r=n[u],ut[r]=ut[r]||[],ut[r].unshift(t)},prefilter:function(n,t){t?wt.unshift(n):wt.push(n)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(null==u.queue||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(it).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=ou(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return"string"!=typeof n&&(u=t,t=n,n=void 0),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=null!=n&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&ue.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem!==this||null!=n&&o[t].queue!==n||(o[t].anim.stop(u),s=!1,o.splice(t,1));(s||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;s>t;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(bt(t,!0),n,i,u)}});i.each({slideDown:bt("show"),slideUp:bt("hide"),slideToggle:bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(nt=i.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();nt=void 0};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){pt||(pt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(pt);pt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},function(){var n=u.createElement("input"),t=u.createElement("select"),i=t.appendChild(u.createElement("option"));n.type="checkbox";f.checkOn=""!==n.value;f.optSelected=i.selected;t.disabled=!0;f.optDisabled=!i.disabled;n=u.createElement("input");n.value="t";n.type="radio";f.radioValue="t"===n.value}();tt=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return l(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(n&&3!==e&&8!==e&&2!==e)return typeof n.getAttribute===d?i.prop(n,t,r):(1===e&&i.isXMLDoc(n)||(t=t.toLowerCase(),u=i.attrHooks[t]||(i.expr.match.bool.test(t)?su:oe)),void 0===r?u&&"get"in u&&null!==(f=u.get(n,t))?f:(f=i.find.attr(n,t),null==f?void 0:f):null!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:(n.setAttribute(t,r+""),r):void i.removeAttr(n,t))},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(c);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)},attrHooks:{type:{set:function(n,t){if(!f.radioValue&&"radio"===t&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}}});su={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=tt[t]||i.find.attr;tt[t]=function(n,t,i){var u,f;return i||(f=tt[t],tt[t]=u,u=null!=r(n,t,i)?t.toLowerCase():null,tt[t]=f),u}});hu=/^(?:input|select|textarea|button)$/i;i.fn.extend({prop:function(n,t){return l(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,r){var f,u,o,e=n.nodeType;if(n&&3!==e&&8!==e&&2!==e)return o=1!==e||!i.isXMLDoc(n),o&&(t=i.propFix[t]||t,u=i.propHooks[t]),void 0!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:n[t]=r:u&&"get"in u&&null!==(f=u.get(n,t))?f:n[t]},propHooks:{tabIndex:{get:function(n){return n.hasAttribute("tabindex")||hu.test(n.nodeName)||n.href?n.tabIndex:-1}}}});f.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});kt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,s,f,h="string"==typeof n&&n,e=0,l=this.length;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(h)for(o=(n||"").match(c)||[];l>e;e++)if(t=this[e],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(kt," "):" ")){for(s=0;u=o[s++];)r.indexOf(" "+u+" ")<0&&(r+=u+" ");f=i.trim(r);t.className!==f&&(t.className=f)}return this},removeClass:function(n){var o,t,r,u,s,f,h=0===arguments.length||"string"==typeof n&&n,e=0,l=this.length;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(h)for(o=(n||"").match(c)||[];l>e;e++)if(t=this[e],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(kt," "):"")){for(s=0;u=o[s++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");f=n?i.trim(r):"";t.className!==f&&(t.className=f)}return this},toggleClass:function(n,t){var u=typeof n;return"boolean"==typeof t&&"string"===u?t?this.addClass(n):this.removeClass(n):this.each(i.isFunction(n)?function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}:function(){if("string"===u)for(var t,e=0,f=i(this),o=n.match(c)||[];t=o[e++];)f.hasClass(t)?f.removeClass(t):f.addClass(t);else(u===d||"boolean"===u)&&(this.className&&r.set(this,"__className__",this.className),this.className=this.className||n===!1?"":r.get(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;r>t;t++)if(1===this[t].nodeType&&(" "+this[t].className+" ").replace(kt," ").indexOf(i)>=0)return!0;return!1}});cu=/\r/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;1===this.nodeType&&(u=f?n.call(this,r,i(this).val()):n,null==u?u="":"number"==typeof u?u+="":i.isArray(u)&&(u=i.map(u,function(n){return null==n?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(u,"value"))?r:(r=u.value,"string"==typeof r?r.replace(cu,""):null==r?"":r)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return null!=t?t:i.trim(i.text(n))}},select:{get:function(n){for(var o,t,s=n.options,r=n.selectedIndex,u="select-one"===n.type||0>r,h=u?null:[],c=u?r+1:s.length,e=0>r?c:u?r:0;c>e;e++)if(t=s[e],!(!t.selected&&e!==r||(f.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),u)return o;h.push(o)}return h},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(r.value,e)>=0)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}};f.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)}});dt=i.now();gt=/\?/;i.parseJSON=function(n){return JSON.parse(n+"")};i.parseXML=function(n){var t,r;if(!n||"string"!=typeof n)return null;try{r=new DOMParser;t=r.parseFromString(n,"text/xml")}catch(u){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),t};var b,v,se=/#.*$/,lu=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/gm,ce=/^(?:GET|HEAD)$/,le=/^\/\//,au=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,vu={},li={},yu="*/".concat("*");try{v=location.href}catch(ge){v=u.createElement("a");v.href="";v=v.href}b=au.exec(v.toLowerCase())||[];i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:v,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(b[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ai(ai(n,i.ajaxSettings),t):ai(i.ajaxSettings,n)},ajaxPrefilter:pu(vu),ajaxTransport:pu(li),ajax:function(n,t){function w(n,t,s,h){var v,it,b,y,w,c=t;2!==e&&(e=2,d&&clearTimeout(d),l=void 0,k=h||"",u.readyState=n>0?4:0,v=n>=200&&300>n||304===n,s&&(y=ae(r,u,s)),y=ve(r,y,u,v),v?(r.ifModified&&(w=u.getResponseHeader("Last-Modified"),w&&(i.lastModified[f]=w),w=u.getResponseHeader("etag"),w&&(i.etag[f]=w)),204===n||"HEAD"===r.type?c="nocontent":304===n?c="notmodified":(c=y.state,it=y.data,b=y.error,v=!b)):(b=c,(n||!c)&&(c="error",0>n&&(n=0))),u.status=n,u.statusText=(t||c)+"",v?nt.resolveWith(o,[it,c,u]):nt.rejectWith(o,[u,c,b]),u.statusCode(p),p=void 0,a&&g.trigger(v?"ajaxSuccess":"ajaxError",[u,r,v?it:b]),tt.fireWith(o,[u,c]),a&&(g.trigger("ajaxComplete",[u,r]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof n&&(t=n,n=void 0);t=t||{};var l,f,k,y,d,s,a,h,r=i.ajaxSetup({},t),o=r.context||r,g=r.context&&(o.nodeType||o.jquery)?i(o):i.event,nt=i.Deferred(),tt=i.Callbacks("once memory"),p=r.statusCode||{},it={},rt={},e=0,ut="canceled",u={readyState:0,getResponseHeader:function(n){var t;if(2===e){if(!y)for(y={};t=he.exec(k);)y[t[1].toLowerCase()]=t[2];t=y[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===e?k:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return e||(n=rt[i]=rt[i]||n,it[n]=t),this},overrideMimeType:function(n){return e||(r.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>e)for(t in n)p[t]=[p[t],n[t]];else u.always(n[u.status]);return this},abort:function(n){var t=n||ut;return l&&l.abort(t),w(0,t),this}};if(nt.promise(u).complete=tt.add,u.success=u.done,u.error=u.fail,r.url=((n||r.url||v)+"").replace(se,"").replace(le,b[1]+"//"),r.type=t.method||t.type||r.method||r.type,r.dataTypes=i.trim(r.dataType||"*").toLowerCase().match(c)||[""],null==r.crossDomain&&(s=au.exec(r.url.toLowerCase()),r.crossDomain=!(!s||s[1]===b[1]&&s[2]===b[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")))),r.data&&r.processData&&"string"!=typeof r.data&&(r.data=i.param(r.data,r.traditional)),wu(vu,r,t,u),2===e)return u;a=r.global;a&&0==i.active++&&i.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!ce.test(r.type);f=r.url;r.hasContent||(r.data&&(f=r.url+=(gt.test(f)?"&":"?")+r.data,delete r.data),r.cache===!1&&(r.url=lu.test(f)?f.replace(lu,"$1_="+dt++):f+(gt.test(f)?"&":"?")+"_="+dt++));r.ifModified&&(i.lastModified[f]&&u.setRequestHeader("If-Modified-Since",i.lastModified[f]),i.etag[f]&&u.setRequestHeader("If-None-Match",i.etag[f]));(r.data&&r.hasContent&&r.contentType!==!1||t.contentType)&&u.setRequestHeader("Content-Type",r.contentType);u.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+yu+"; q=0.01":""):r.accepts["*"]);for(h in r.headers)u.setRequestHeader(h,r.headers[h]);if(r.beforeSend&&(r.beforeSend.call(o,u,r)===!1||2===e))return u.abort();ut="abort";for(h in{success:1,error:1,complete:1})u[h](r[h]);if(l=wu(li,r,t,u)){u.readyState=1;a&&g.trigger("ajaxSend",[u,r]);r.async&&r.timeout>0&&(d=setTimeout(function(){u.abort("timeout")},r.timeout));try{e=1;l.send(it,w)}catch(ft){if(!(2>e))throw ft;w(-1,ft)}}else w(-1,"No Transport");return u},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,void 0,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=void 0),i.ajax({url:n,type:t,dataType:f,data:r,success:u})}});i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return this.each(i.isFunction(n)?function(t){i(this).wrapInner(n.call(this,t))}:function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0};i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)};var ye=/%20/g,pe=/\[\]$/,bu=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():null==t?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)vi(r,n[r],t,f);return u.join("&").replace(ye,"+")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&be.test(this.nodeName)&&!we.test(n)&&(this.checked||!er.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(bu,"\r\n")}}):{name:t.name,value:r.replace(bu,"\r\n")}}).get()}});i.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(n){}};var ke=0,ni={},de={0:200,1223:204},ft=i.ajaxSettings.xhr();return n.ActiveXObject&&i(n).on("unload",function(){for(var n in ni)ni[n]()}),f.cors=!!ft&&"withCredentials"in ft,f.ajax=ft=!!ft,i.ajaxTransport(function(n){var t;if(f.cors||ft&&!n.crossDomain)return{send:function(i,r){var f,u=n.xhr(),e=++ke;if(u.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType);n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(f in i)u.setRequestHeader(f,i[f]);t=function(n){return function(){t&&(delete ni[e],t=u.onload=u.onerror=null,"abort"===n?u.abort():"error"===n?r(u.status,u.statusText):r(de[u.status]||u.status,u.statusText,"string"==typeof u.responseText?{text:u.responseText}:void 0,u.getAllResponseHeaders()))}};u.onload=t();u.onerror=t("error");t=ni[e]=t("abort");try{u.send(n.hasContent&&n.data||null)}catch(o){if(t)throw o;}},abort:function(){t&&t()}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e("error"===n.type?404:200,n.type)});u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),yi=[],ti=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=yi.pop()||i.expando+"_"+dt++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,o,e,s=t.jsonp!==!1&&(ti.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return(f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ti,"$1"+f):t.jsonp!==!1&&(t.url+=(gt.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return e||i.error(f+" was not called"),e[0]},t.dataTypes[0]="json",o=n[f],n[f]=function(){e=arguments},u.always(function(){n[f]=o;t[f]&&(t.jsonpCallback=r.jsonpCallback,yi.push(f));e&&i.isFunction(o)&&o(e[0]);e=o=void 0}),"script")}),i.parseHTML=function(n,t,r){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(r=t,t=!1);t=t||u;var f=gi.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},pi=i.fn.load,i.fn.load=function(n,t,r){if("string"!=typeof n&&pi)return pi.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>=0&&(u=i.trim(n.slice(e)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),f.length>0&&i.ajax({url:n,type:o,dataType:"html",data:t}).done(function(n){s=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).complete(r&&function(n,t){f.each(r,s||[n.responseText,t,n])}),this},i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},wi=n.document.documentElement,i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};"static"===l&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,u));null!=t.top&&(f.top=t.top-u.top+h);null!=t.left&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,f,t=this[0],u={top:0,left:0},e=t&&t.ownerDocument;if(e)return r=e.documentElement,i.contains(r,t)?(typeof t.getBoundingClientRect!==d&&(u=t.getBoundingClientRect()),f=ku(e),{top:u.top+f.pageYOffset-r.clientTop,left:u.left+f.pageXOffset-r.clientLeft}):u},position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||wi;n&&!i.nodeName(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||wi})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var u="pageYOffset"===r;i.fn[t]=function(i){return l(this,function(t,i,f){var e=ku(t);return void 0===f?e?e[r]:t[i]:void(e?e.scrollTo(u?n.pageXOffset:f,u?f:n.pageYOffset):t[i]=f)},t,i,arguments.length,null)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=br(f.pixelPosition,function(n,r){if(r)return(r=rt(n,t),ci.test(r)?i(n).position()[t]+"px":r)})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||"boolean"!=typeof u),o=r||(u===!0||f===!0?"margin":"border");return l(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):void 0===u?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:void 0,e,null)}})}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}),du=n.jQuery,gu=n.$,i.noConflict=function(t){return n.$===i&&(n.$=gu),t&&n.jQuery===i&&(n.jQuery=du),i},typeof t===d&&(n.jQuery=n.$=i),i}),function(n){n.extend(n.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(t.target).hasClass("cancel")&&(i.cancelSubmit=!0);void 0!==n(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return i.settings.submitHandler?(i.submitButton&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&r.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){return!!n.trim(""+n(t).val())},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return 1===arguments.length?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(9!==t.which||""!==this.elementValue(n))&&(n.name in this.submitted||n===this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}var r,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();r=this.groups={};n.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/));n.each(i,function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",i).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",i);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t));this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0;for(var i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===n.grep(this.errorList,function(n){return n.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return n(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var r=n(t).attr("type"),i=n(t).val();return"radio"===r||"checkbox"===r?n("input[name='"+n(t).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(t){var r,u;t=this.validationTargetFor(this.clean(t));var i,f=n(t).rules(),e=!1,s=this.elementValue(t);for(r in f){u={method:r,parameters:f[r]};try{if(i=n.validator.methods[r].call(this,s,t,u.parameters),"dependency-mismatch"===i){e=!0;continue}if(e=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!i)return this.formatAndAdd(t,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",o),o;}}if(!e)return(this.objectLength(f)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return n(t).data("msg-"+i.toLowerCase())||t.attributes&&n(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;arguments.length>n;n++)if(void 0!==arguments[n])return arguments[n];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),u=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters));this.errorList.push({message:r,element:t});this.errorMap[t.name]=r;this.submitted[t.name]=r},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")===i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name).not(this.settings.ignore)[0]),n},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[t.name];i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var u={},e=n(t),f=e[0].getAttribute("type"),r,i;for(r in n.validator.methods)"required"===r?(i=e.get(0).getAttribute(r),""===i&&(i=!0),i=!!i):i=e.attr(r),/min|max/.test(r)&&(null===f||/number|range|text/.test(f))&&(i=Number(i)),i?u[r]=i:f===r&&"range"!==f&&(u[r]=!0);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t);for(i in n.validator.methods)r=f.data("rule-"+i.toLowerCase()),void 0!==r&&(u[i]=r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)return delete t[r],void 0;if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=void 0!==u.param?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=void 0!==r?r:n.validator.messages[t];3>i.length&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:n.trim(t).length>0},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(n))},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r,e;if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)e=n.charAt(r),i=parseInt(e,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return 0==f%10},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||r>=u},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&r[1]>=u},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||i>=n},range:function(n,t,i){return this.optional(t)||n>=i[0]&&i[1]>=n},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r="string"==typeof r&&{url:r}||r,f.old===t)?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;e=r===!0||"true"===r;e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),delete u.invalid[i.name],u.showErrors()):(s={},o=r||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.invalid[i.name]=!0,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;"abort"===n.mode&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return"abort"===f?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)})}(jQuery),function(n){n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery),function(n){function i(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)}function s(n){return n.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(n){return n.substr(0,n.lastIndexOf(".")+1)}function e(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function h(t,i){var r=n(this).find("[data-valmsg-for='"+i[0].name+"']"),u=n.parseJSON(r.attr("data-valmsg-replace"))!==!1;r.removeClass("field-validation-valid").addClass("field-validation-error");t.data("unobtrusiveContainer",r);u?(r.empty(),t.removeClass("input-validation-error").appendTo(r)):t.hide()}function c(t,i){var u=n(this).find("[data-valmsg-summary=true]"),r=u.find("ul");r&&r.length&&i.errorList.length&&(r.empty(),u.addClass("validation-summary-errors").removeClass("validation-summary-valid"),n.each(i.errorList,function(){n("<li />").html(this.message).appendTo(r)}))}function l(t){var i=t.data("unobtrusiveContainer"),r=n.parseJSON(i.attr("data-valmsg-replace"));i&&(i.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),r&&i.empty())}function o(t){var i=n(t),r=i.data(u);return r||(r={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:n.proxy(h,t),invalidHandler:n.proxy(c,t),messages:{},rules:{},success:n.proxy(l,t)},attachValidation:function(){i.validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(u,r)),r}var r=n.validator,t,u="unobtrusiveValidation";r.unobtrusive={adapters:[],parseElement:function(t,i){var u=n(t),f=u.parents("form")[0],r,e,s;f&&(r=o(f),r.options.rules[t.name]=e={},r.options.messages[t.name]=s={},n.each(this.adapters,function(){var i="data-val-"+this.name,r=u.attr(i),o={};r!==undefined&&(i+="-",n.each(this.params,function(){o[this]=u.attr(i+this)}),this.adapt({element:t,form:f,message:r,params:o,rules:e,messages:s}))}),jQuery.extend(e,{__dummy__:!0}),i||r.attachValidation())},parse:function(t){n(t).find(":input[data-val=true]").each(function(){r.unobtrusive.parseElement(this,!0)});n("form").each(function(){var n=o(this);n&&n.attachValidation()})}};t=r.unobtrusive.adapters;t.add=function(n,t,i){return i||(i=t,t=[]),this.push({name:n,params:t,adapt:i}),this};t.addBool=function(n,t){return this.add(n,function(r){i(r,t||n,!0)})};t.addMinMax=function(n,t,r,u,f,e){return this.add(n,[f||"min",e||"max"],function(n){var f=n.params.min,e=n.params.max;f&&e?i(n,u,[f,e]):f?i(n,t,f):e&&i(n,r,e)})};t.addSingleVal=function(n,t,r){return this.add(n,[t||"val"],function(u){i(u,r||n,u.params[t])})};r.addMethod("__dummy__",function(){return!0});r.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)});t.addSingleVal("accept","exts").addSingleVal("regex","pattern");t.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");t.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");t.add("equalto",["other"],function(t){var r=f(t.element.name),u=t.params.other,o=e(u,r),s=n(t.form).find(":input[name="+o+"]")[0];i(t,"equalTo",s)});t.add("required",function(n){(n.element.tagName.toUpperCase()!=="INPUT"||n.element.type.toUpperCase()!=="CHECKBOX")&&i(n,"required",!0)});t.add("remote",["url","type","additionalfields"],function(t){var r={url:t.params.url,type:t.params.type||"GET",data:{}},u=f(t.element.name);n.each(s(t.params.additionalfields||t.element.name),function(i,f){var o=e(f,u);r.data[o]=function(){return n(t.form).find(":input[name='"+o+"']").val()}});i(t,"remote",r)});n(function(){r.unobtrusive.parse(document)})}(jQuery),function(n){"use strict";function r(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),n(this).ajaxSubmit(i))}function u(t){var r=t.target,u=n(r),f,i,e;if(!u.is("[type=submit],[type=image]")){if(f=u.closest("[type=submit]"),0===f.length)return;r=f[0]}i=this;(i.clk=r,"image"==r.type)&&(void 0!==t.offsetX?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):"function"==typeof n.fn.offset?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={},f;i.fileapi=void 0!==n("<input type='file'/>").get(0).files;i.formdata=void 0!==window.FormData;f=!!n.fn.prop;n.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var n=this.prop.apply(this,arguments);return n&&n.jquery||"string"==typeof n?n:this.attr.apply(this,arguments)};n.fn.ajaxSubmit=function(r){function et(t){for(var f,u=n.param(t,r.traditional).split("&"),o=u.length,e=[],i=0;o>i;i++)u[i]=u[i].replace(/\+/g," "),f=u[i].split("="),e.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return e}function ot(t){for(var f,u,o,e=new FormData,i=0;t.length>i;i++)e.append(t[i].name,t[i].value);if(r.extraData)for(f=et(r.extraData),i=0;f.length>i;i++)f[i]&&e.append(f[i][0],f[i][1]);return r.data=null,u=n.extend(!0,{},n.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:h||"POST"}),r.uploadProgress&&(u.xhr=function(){var n=jQuery.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(n){var t=0,i=n.loaded||n.position,u=n.total;n.lengthComputable&&(t=Math.ceil(100*(i/u)));r.uploadProgress(n,i,u,t)},!1),n}),u.data=null,o=u.beforeSend,u.beforeSend=function(n,t){t.data=e;o&&o.call(this,n,t)},n.ajax(u)}function d(i){function ut(n){var i=null;try{n.contentWindow&&(i=n.contentWindow.document)}catch(r){t("cannot get iframe.contentWindow document: "+r)}if(i)return i;try{i=n.contentDocument?n.contentDocument:n.document}catch(r){t("cannot get iframe.contentDocument: "+r);i=n.document}return i}function ft(){function f(){try{var n=ut(a).readyState;t("state = "+n);n&&"uninitialized"==n.toLowerCase()&&setTimeout(f,50)}catch(i){t("Server abort: ",i," (",i.name,")");b(rt);g&&clearTimeout(g);g=void 0}}var o=u.attr2("target"),s=u.attr2("action"),r,i,c;l.setAttribute("target",d);h||l.setAttribute("method","POST");s!=e.url&&l.setAttribute("action",e.url);e.skipEncodingOverride||h&&!/post/i.test(h)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&(g=setTimeout(function(){it=!0;b(et)},e.timeout));r=[];try{if(e.extraData)for(i in e.extraData)e.extraData.hasOwnProperty(i)&&(n.isPlainObject(e.extraData[i])&&e.extraData[i].hasOwnProperty("name")&&e.extraData[i].hasOwnProperty("value")?r.push(n('<input type="hidden" name="'+e.extraData[i].name+'">').val(e.extraData[i].value).appendTo(l)[0]):r.push(n('<input type="hidden" name="'+i+'">').val(e.extraData[i]).appendTo(l)[0]));e.iframeTarget||(v.appendTo("body"),a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1));setTimeout(f,15);try{l.submit()}catch(y){c=document.createElement("form").submit;c.apply(l)}}finally{l.setAttribute("action",s);o?l.setAttribute("target",o):u.removeAttr("target");n(r).remove()}}function b(i){var u,r,w,f,k,d,h,c,l;if(!o.aborted&&!ct){if(s=ut(a),s||(t("cannot access response document"),i=rt),i===et&&o)return o.abort("timeout"),y.reject(o,"timeout"),void 0;if(i==rt&&o)return o.abort("server abort"),y.reject(o,"error","server abort"),void 0;if(s&&s.location.href!=e.iframeSrc||it){a.detachEvent?a.detachEvent("onload",b):a.removeEventListener("load",b,!1);r="success";try{if(it)throw"timeout";if(w="xml"==e.dataType||s.XMLDocument||n.isXMLDoc(s),t("isXml="+w),!w&&window.opera&&(null===s.body||!s.body.innerHTML)&&--lt)return t("requeing onLoad callback, DOM not available"),setTimeout(b,250),void 0;f=s.body?s.body:s.documentElement;o.responseText=f?f.innerHTML:null;o.responseXML=s.XMLDocument?s.XMLDocument:s;w&&(e.dataType="xml");o.getResponseHeader=function(n){var t={"content-type":e.dataType};return t[n]};f&&(o.status=Number(f.getAttribute("status"))||o.status,o.statusText=f.getAttribute("statusText")||o.statusText);k=(e.dataType||"").toLowerCase();d=/(json|script|text)/.test(k);d||e.textarea?(h=s.getElementsByTagName("textarea")[0],h?(o.responseText=h.value,o.status=Number(h.getAttribute("status"))||o.status,o.statusText=h.getAttribute("statusText")||o.statusText):d&&(c=s.getElementsByTagName("pre")[0],l=s.getElementsByTagName("body")[0],c?o.responseText=c.textContent?c.textContent:c.innerText:l&&(o.responseText=l.textContent?l.textContent:l.innerText))):"xml"==k&&!o.responseXML&&o.responseText&&(o.responseXML=at(o.responseText));try{ht=yt(o,k,e)}catch(nt){r="parsererror";o.error=u=nt||r}}catch(nt){t("error caught: ",nt);r="error";o.error=u=nt||r}o.aborted&&(t("upload aborted"),r=null);o.status&&(r=o.status>=200&&300>o.status||304===o.status?"success":"error");"success"===r?(e.success&&e.success.call(e.context,ht,"success",o),y.resolve(o.responseText,"success",o),p&&n.event.trigger("ajaxSuccess",[o,e])):r&&(void 0===u&&(u=o.statusText),e.error&&e.error.call(e.context,o,r,u),y.reject(o,"error",u),p&&n.event.trigger("ajaxError",[o,e,u]));p&&n.event.trigger("ajaxComplete",[o,e]);p&&!--n.active&&n.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,o,r);ct=!0;e.timeout&&clearTimeout(g);setTimeout(function(){e.iframeTarget||v.remove();o.responseXML=null},100)}}}var tt,nt,e,p,d,v,a,o,k,w,it,g,l=u[0],y=n.Deferred();if(i)for(nt=0;c.length>nt;nt++)tt=n(c[nt]),f?tt.prop("disabled",!1):tt.removeAttr("disabled");if(e=n.extend(!0,{},n.ajaxSettings,r),e.context=e.context||e,d="jqFormIO"+(new Date).getTime(),e.iframeTarget?(v=n(e.iframeTarget),w=v.attr2("name"),w?d=w:v.attr2("name",d)):(v=n('<iframe name="'+d+'" src="'+e.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),a=v[0],o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r="timeout"===i?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;try{a.contentWindow.document.execCommand&&a.contentWindow.document.execCommand("Stop")}catch(u){}v.attr("src",e.iframeSrc);o.error=r;e.error&&e.error.call(e.context,o,r,i);p&&n.event.trigger("ajaxError",[o,e,r]);e.complete&&e.complete.call(e.context,o,r)}},p=e.global,p&&0==n.active++&&n.event.trigger("ajaxStart"),p&&n.event.trigger("ajaxSend",[o,e]),e.beforeSend&&e.beforeSend.call(e.context,o,e)===!1)return e.global&&n.active--,y.reject(),y;if(o.aborted)return y.reject(),y;k=l.clk;k&&(w=k.name,w&&!k.disabled&&(e.extraData=e.extraData||{},e.extraData[w]=k.value,"image"==k.type&&(e.extraData[w+".x"]=l.clk_x,e.extraData[w+".y"]=l.clk_y)));var et=1,rt=2,ot=n("meta[name=csrf-token]").attr("content"),st=n("meta[name=csrf-param]").attr("content");st&&ot&&(e.extraData=e.extraData||{},e.extraData[st]=ot);e.forceSync?ft():setTimeout(ft,10);var ht,s,ct,lt=50,at=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},vt=n.parseJSON||function(e){return window.eval("("+e+")")},yt=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e="xml"===i||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&"parsererror"===u.documentElement.nodeName&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),"string"==typeof u&&("json"===i||!i&&f.indexOf("json")>=0?u=vt(u):("script"===i||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u};return y}var h,b,e,u,a,v,y,c,o,l,s,g,nt,tt,p,ft,w;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(u=this,"function"==typeof r&&(r={success:r}),h=r.type||this.attr2("method"),b=r.url||this.attr2("action"),e="string"==typeof b?n.trim(b):"",e=e||window.location.href||"",e&&(e=(e.match(/^([^#]+)/)||[])[1]),r=n.extend(!0,{url:e,success:n.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r),a={},this.trigger("form-pre-serialize",[this,r,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(v=r.traditional,void 0===v&&(v=n.ajaxSettings.traditional),c=[],o=this.formToArray(r.semantic,c),r.data&&(r.extraData=r.data,y=n.param(r.data,v)),r.beforeSubmit&&r.beforeSubmit(o,this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[o,this,r,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;l=n.param(o,v);y&&(l=l?l+"&"+y:y);"GET"==r.type.toUpperCase()?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+l,r.data=null):r.data=l;s=[];(r.resetForm&&s.push(function(){u.resetForm()}),r.clearForm&&s.push(function(){u.clearForm(r.includeHidden)}),!r.dataType&&r.target)?(g=r.success||function(){},s.push(function(t){var i=r.replaceTarget?"replaceWith":"html";n(r.target)[i](t).each(g,arguments)})):r.success&&s.push(r.success);(r.success=function(n,t,i){for(var e=r.context||this,f=0,o=s.length;o>f;f++)s[f].apply(e,[n,t,i||u,u])},r.error)&&(nt=r.error,r.error=function(n,t,i){var f=r.context||this;nt.apply(f,[n,t,i,u])});r.complete&&(tt=r.complete,r.complete=function(n,t){var i=r.context||this;tt.apply(i,[n,t,u])});var st=n('input[type=file]:enabled[value!=""]',this),it=st.length>0,rt="multipart/form-data",ut=u.attr("enctype")==rt||u.attr("encoding")==rt,k=i.fileapi&&i.formdata;for(t("fileAPI :"+k),ft=(it||ut)&&!k,r.iframe!==!1&&(r.iframe||ft)?r.closeKeepAlive?n.get(r.closeKeepAlive,function(){p=d(o)}):p=d(o):p=(it||ut)&&k?ot(o):n.ajax(r),u.removeData("jqxhr").data("jqxhr",p),w=0;c.length>w;w++)c[w]=null;return this.trigger("form-submit-notify",[this,r]),this};n.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&n.isFunction(n.fn.on),!i.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!n.isReady&&f.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(f.s,f.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}return i.delegation?(n(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,u).on("submit.form-plugin",this.selector,i,r).on("click.form-plugin",this.selector,i,u),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,r).bind("click.form-plugin",i,u)};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t,r){var o=[],e,c,l,s,f,h,u,p,w,a,y,v;if(0===this.length||(e=this[0],c=t?e.getElementsByTagName("*"):e.elements,!c))return o;for(l=0,p=c.length;p>l;l++)if(u=c[l],f=u.name,f&&!u.disabled)if(t&&e.clk&&"image"==u.type)e.clk==u&&(o.push({name:f,value:n(u).val(),type:u.type}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}));else if(h=n.fieldValue(u,!0),h&&h.constructor==Array)for(r&&r.push(u),s=0,w=h.length;w>s;s++)o.push({name:f,value:h[s]});else if(i.fileapi&&"file"==u.type)if(r&&r.push(u),a=u.files,a.length)for(s=0;a.length>s;s++)o.push({name:f,value:a[s],type:u.type});else o.push({name:f,value:"",type:u.type});else null!==h&&h!==void 0&&(r&&r.push(u),o.push({name:f,value:h,type:u.type,required:u.required}));return!t&&e.clk&&(y=n(e.clk),v=y[0],f=v.name,f&&!v.disabled&&"image"==v.type&&(o.push({name:f,value:y.val()}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}))),o};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;e>u;u++)i.push({name:f,value:r[u]});else null!==r&&r!==void 0&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;e>u;u++)f=this[u],i=n.fieldValue(f,t),null!==i&&void 0!==i&&(i.constructor!=Array||i.length)&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,r,f;if(void 0===i&&(i=!0),i&&(!a||t.disabled||"reset"==u||"button"==u||("checkbox"==u||"radio"==u)&&!t.checked||("submit"==u||"image"==u)&&t.form&&t.form.clk!=t||"select"==h&&-1==t.selectedIndex))return null;if("select"==h){if(e=t.selectedIndex,0>e)return null;for(var c=[],l=t.options,o="select-one"==u,v=o?e+1:l.length,s=o?e:0;v>s;s++)if(r=l[s],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),o)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,u=this.tagName.toLowerCase();i.test(r)||"textarea"==u?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==u?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?n(this).replaceWith(n(this).clone(!0)):n(this).val(""):t&&(t===!0&&/hidden/.test(r)||"string"==typeof t&&n(this).is(t))&&(this.value="")})};n.fn.resetForm=function(){return this.each(function(){"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return void 0===n&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type,i;"checkbox"==r||"radio"==r?this.checked=t:"option"==this.tagName.toLowerCase()&&(i=n(this).parent("select"),t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==i.style[t])return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){n.support.transition=t();n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));"string"==typeof i&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,""));r=n(u);i&&i.preventDefault();r.length||(r=f.closest(".alert"));r.trigger(i=n.Event("close.bs.alert"));i.isDefaultPrevented()||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f="object"==typeof i&&i;r||u.data("bs.button",r=new t(this,f));"toggle"==i?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.1";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";null==u.resetText&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](null==u[t]?this.options[t]:u[t]);"loadingText"==t?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:i.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")):this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i),e="string"==typeof i?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));"number"==typeof i?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.1";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i="prev"==n?-1:1,r=this.getItemIndex(t),u=(r+i)%this.$items.length;return this.$items.eq(u)};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(0>n))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f="next"==i?"left":"right",v="next"==i?"first":"last",a=this,o,s,h,c;if(!u.length){if(!this.options.wrap)return;u=this.$element.find(".item")[v]()}return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),(this.$element.trigger(s),!s.isDefaultPrevented())?((this.sliding=!0,l&&this.pause(),this.$indicators.length)&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this):void 0)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i);!r&&f.toggle&&"show"==i&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n(this.options.trigger).filter('[href="#'+i.id+'"], [data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.1";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing"),!(r&&r.length&&(f=r.data("bs.collapse"),f&&f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented()))){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented()))return i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},n.support.transition?void this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION):u.call(this)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":n.extend({},u.data(),{trigger:this});i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){t&&3===t.which||(n(o).remove(),n(i).each(function(){var r=n(this),i=u(r),f={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function e(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));"string"==typeof i&&u[i].call(r)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.1";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=u(f),o=i.hasClass("open"),r(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r),e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,r;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s&&27!=t.which||s&&27==t.which)return 27==t.which&&o.find(i).trigger("focus"),e.trigger("click");h=" li:not(.divider):visible a";f=o.find('[role="menu"]'+h+', [role="listbox"]'+h);f.length&&(r=f.index(t.target),38==t.which&&r>0&&r--,40==t.which&&r<f.length-1&&r++,~r||(r=0),f.eq(r).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=e;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),"object"==typeof i&&i);u||f.data("bs.modal",u=new t(this,e));"string"==typeof i?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.1";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(u);this.isShown||u.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.options.backdrop&&r.adjustBackdrop();r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in").attr("aria-hidden",!1);r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)}))};t.prototype.hide=function(i){i&&i.preventDefault();i=n.Event("hide.bs.modal");this.$element.trigger(i);this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){27==n.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){this.isShown?n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this)):n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){if(r=n.support.transition&&f,this.$backdrop=n('<div class="modal-backdrop '+f+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",n.proxy(function(n){n.target===n.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop();this.adjustDialog()};t.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){n.isDefaultPrevented()||u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var f=n(this),r=f.data("bs.tooltip"),u="object"==typeof i&&i,e=u&&u.selector;(r||"destroy"!=i)&&(e?(r||f.data("bs.tooltip",r={}),r[e]||(r[e]=new t(this,u))):r||f.data("bs.tooltip",r=new t(this,u)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(this.options.viewport.selector||this.options.viewport),f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],"click"==u)this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else"manual"!=u&&(o="hover"==u?"mouseenter":"focusin",s="hover"==u?"mouseleave":"focusout",this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this)));this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;if(y){var w=i,b=this.options.container?n(this.options.container):this.$element.parent(),e=this.getPosition(b);i="bottom"==i&&f.bottom+s>e.bottom?"top":"top"==i&&f.top-s<e.top?"bottom":"right"==i&&f.right+o>e.width?"left":"left"==i&&f.left-o<e.left?"right":i;r.removeClass(w).addClass(i)}p=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(p,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;"out"==n&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;"top"==i&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?2*u.left-l+h:2*u.top-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function f(){"in"!=r.hoverState&&u.detach();r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type);i&&i()}var r=this,u=this.tip(),e=n.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(u.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?u.one("bsTransitionEnd",f).emulateTransitionEnd(t.TRANSITION_DURATION):f(),this.hoverState=null,this)};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||"string"!=typeof n.attr("data-original-title"))&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r="BODY"==u.tagName,i=u.getBoundingClientRect();null==i.width&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return"bottom"==n?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==n?{top:t.top-r,left:t.left+t.width/2-i/2}:"left"==n?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.width&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(1e6*Math.random());while(document.getElementById(n));return n};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type)})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var f=n(this),r=f.data("bs.popover"),u="object"==typeof i&&i,e=u&&u.selector;(r||"destroy"!=i)&&(e?(r||f.data("bs.popover",r={}),r[e]||(r[e]=new t(this,u))):r||f.data("bs.popover",r=new t(this,u)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.1";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof t?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};t.prototype.tip=function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){var u=n.proxy(this.process,this);this.$body=n("body");this.$scrollElement=n(n(i).is("body")?window:i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",u);this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f="object"==typeof i&&i;r||u.data("bs.scrollspy",r=new t(this,f));"string"==typeof i&&r[i]()})}t.VERSION="3.3.1";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var i="offset",r=0,t;n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();t=this;this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var n,i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(!t[n+1]||i<=t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));"string"==typeof i&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);o?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu")&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),o=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&o?f.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f="object"==typeof i&&i;r||u.data("bs.affix",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.1";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(null!=i&&"top"==this.affixed)return i>u?"top":!1;if("bottom"==this.affixed)return null!=i?u+this.unpin<=f.top?!1:"bottom":n-r>=u+e?!1:"bottom";var o=null==this.affixed,s=o?u:f.top,h=o?e:t;return null!=i&&i>=s?"top":null!=r&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,f=r.top,u=r.bottom,h=n("body").height();if("object"!=typeof r&&(u=f=r),"function"==typeof f&&(f=r.top(this.$element)),"function"==typeof u&&(u=r.bottom(this.$element)),i=this.getState(h,s,f,u),this.affixed!=i){if(null!=this.unpin&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin="bottom"==i?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}"bottom"==i&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom);null!=t.offsetTop&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery),function(){var n=[].slice;!function(t,i){"use strict";var r;return r=function(){function n(n,r){var u;null==r&&(r={});this.$element=t(n);this.options=t.extend({},t.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},r);this.$wrapper=t("<div>",{"class":function(n){return function(){var t;return t=[""+n.options.baseClass].concat(n._getClasses(n.options.wrapperClass)),t.push(n.options.state?""+n.options.baseClass+"-on":""+n.options.baseClass+"-off"),null!=n.options.size&&t.push(""+n.options.baseClass+"-"+n.options.size),n.options.disabled&&t.push(""+n.options.baseClass+"-disabled"),n.options.readonly&&t.push(""+n.options.baseClass+"-readonly"),n.options.indeterminate&&t.push(""+n.options.baseClass+"-indeterminate"),n.options.inverse&&t.push(""+n.options.baseClass+"-inverse"),n.$element.attr("id")&&t.push(""+n.options.baseClass+"-id-"+n.$element.attr("id")),t.join(" ")}}(this)()});this.$container=t("<div>",{"class":""+this.options.baseClass+"-container"});this.$on=t("<span>",{html:this.options.onText,"class":""+this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor});this.$off=t("<span>",{html:this.options.offText,"class":""+this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor});this.$label=t("<span>",{html:this.options.labelText,"class":""+this.options.baseClass+"-label"});this.$element.on("init.bootstrapSwitch",function(t){return function(){return t.options.onInit.apply(n,arguments)}}(this));this.$element.on("switchChange.bootstrapSwitch",function(t){return function(){return t.options.onSwitchChange.apply(n,arguments)}}(this));this.$container=this.$element.wrap(this.$container).parent();this.$wrapper=this.$container.wrap(this.$wrapper).parent();this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off);this.options.indeterminate&&this.$element.prop("indeterminate",!0);u=i.setInterval(function(n){return function(){if(n.$wrapper.is(":visible"))return(n._width(),n._containerPosition(null,function(){if(n.options.animate)return n.$wrapper.addClass(""+n.options.baseClass+"-animate")}),i.clearInterval(u))}}(this),50);this._elementHandlers();this._handleHandlers();this._labelHandlers();this._formHandler();this._externalLabelHandler();this.$element.trigger("init.bootstrapSwitch")}return n.prototype._constructor=n,n.prototype.state=function(n,t){return"undefined"==typeof n?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.options.indeterminate&&this.indeterminate(!1),n=!!n,this.$element.prop("checked",n).trigger("change.bootstrapSwitch",t),this.$element)},n.prototype.toggleState=function(n){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",n)},n.prototype.size=function(n){return"undefined"==typeof n?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(""+this.options.baseClass+"-"+this.options.size),n&&this.$wrapper.addClass(""+this.options.baseClass+"-"+n),this._width(),this._containerPosition(),this.options.size=n,this.$element)},n.prototype.animate=function(n){return"undefined"==typeof n?this.options.animate:(n=!!n,n===this.options.animate?this.$element:this.toggleAnimate())},n.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(""+this.options.baseClass+"-animate"),this.$element},n.prototype.disabled=function(n){return"undefined"==typeof n?this.options.disabled:(n=!!n,n===this.options.disabled?this.$element:this.toggleDisabled())},n.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(""+this.options.baseClass+"-disabled"),this.$element},n.prototype.readonly=function(n){return"undefined"==typeof n?this.options.readonly:(n=!!n,n===this.options.readonly?this.$element:this.toggleReadonly())},n.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(""+this.options.baseClass+"-readonly"),this.$element},n.prototype.indeterminate=function(n){return"undefined"==typeof n?this.options.indeterminate:(n=!!n,n===this.options.indeterminate?this.$element:this.toggleIndeterminate())},n.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(""+this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},n.prototype.inverse=function(n){return"undefined"==typeof n?this.options.inverse:(n=!!n,n===this.options.inverse?this.$element:this.toggleInverse())},n.prototype.toggleInverse=function(){var n,t;return this.$wrapper.toggleClass(""+this.options.baseClass+"-inverse"),t=this.$on.clone(!0),n=this.$off.clone(!0),this.$on.replaceWith(n),this.$off.replaceWith(t),this.$on=n,this.$off=t,this.options.inverse=!this.options.inverse,this.$element},n.prototype.onColor=function(n){var t;return t=this.options.onColor,"undefined"==typeof n?t:(null!=t&&this.$on.removeClass(""+this.options.baseClass+"-"+t),this.$on.addClass(""+this.options.baseClass+"-"+n),this.options.onColor=n,this.$element)},n.prototype.offColor=function(n){var t;return t=this.options.offColor,"undefined"==typeof n?t:(null!=t&&this.$off.removeClass(""+this.options.baseClass+"-"+t),this.$off.addClass(""+this.options.baseClass+"-"+n),this.options.offColor=n,this.$element)},n.prototype.onText=function(n){return"undefined"==typeof n?this.options.onText:(this.$on.html(n),this._width(),this._containerPosition(),this.options.onText=n,this.$element)},n.prototype.offText=function(n){return"undefined"==typeof n?this.options.offText:(this.$off.html(n),this._width(),this._containerPosition(),this.options.offText=n,this.$element)},n.prototype.labelText=function(n){return"undefined"==typeof n?this.options.labelText:(this.$label.html(n),this._width(),this.options.labelText=n,this.$element)},n.prototype.handleWidth=function(n){return"undefined"==typeof n?this.options.handleWidth:(this.options.handleWidth=n,this._width(),this._containerPosition(),this.$element)},n.prototype.labelWidth=function(n){return"undefined"==typeof n?this.options.labelWidth:(this.options.labelWidth=n,this._width(),this._containerPosition(),this.$element)},n.prototype.baseClass=function(){return this.options.baseClass},n.prototype.wrapperClass=function(n){return"undefined"==typeof n?this.options.wrapperClass:(n||(n=t.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(n).join(" ")),this.options.wrapperClass=n,this.$element)},n.prototype.radioAllOff=function(n){return"undefined"==typeof n?this.options.radioAllOff:(n=!!n,n===this.options.radioAllOff?this.$element:(this.options.radioAllOff=n,this.$element))},n.prototype.onInit=function(n){return"undefined"==typeof n?this.options.onInit:(n||(n=t.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=n,this.$element)},n.prototype.onSwitchChange=function(n){return"undefined"==typeof n?this.options.onSwitchChange:(n||(n=t.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=n,this.$element)},n.prototype.destroy=function(){var n;return n=this.$element.closest("form"),n.length&&n.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},n.prototype._width=function(){var t,n;return t=this.$on.add(this.$off),t.add(this.$label).css("width",""),n="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,t.width(n),this.$label.width(function(t){return function(i,r){return"auto"!==t.options.labelWidth?t.options.labelWidth:n>r?n:r}}(this)),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},n.prototype._containerPosition=function(n,t){return null==n&&(n=this.options.state),this.$container.css("margin-left",function(t){return function(){var i;return i=[0,"-"+t._handleWidth+"px"],t.options.indeterminate?"-"+t._handleWidth/2+"px":n?t.options.inverse?i[1]:i[0]:t.options.inverse?i[0]:i[1]}}(this)),t?setTimeout(function(){return t()},50):void 0},n.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":function(n){return function(i,r){var u;return i.preventDefault(),i.stopImmediatePropagation(),u=n.$element.is(":checked"),n._containerPosition(u),u!==n.options.state?(n.options.state=u,n.$wrapper.toggleClass(""+n.options.baseClass+"-off").toggleClass(""+n.options.baseClass+"-on"),r||n.$element.is(":radio")&&t("[name='"+n.$element.attr("name")+"']").not(n.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),n.$element.trigger("switchChange.bootstrapSwitch",[u])):void 0}}(this),"focus.bootstrapSwitch":function(n){return function(t){return t.preventDefault(),n.$wrapper.addClass(""+n.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(n){return function(t){return t.preventDefault(),n.$wrapper.removeClass(""+n.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(n){return function(t){if(t.which&&!n.options.disabled&&!n.options.readonly)switch(t.which){case 37:return t.preventDefault(),t.stopImmediatePropagation(),n.state(!1);case 39:return t.preventDefault(),t.stopImmediatePropagation(),n.state(!0)}}}(this)})},n.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(n){return function(t){return t.preventDefault(),t.stopPropagation(),n.state(!1),n.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(n){return function(t){return t.preventDefault(),t.stopPropagation(),n.state(!0),n.$element.trigger("focus.bootstrapSwitch")}}(this))},n.prototype._labelHandlers=function(){return this.$label.on({"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(n){return function(t){if(!n._dragStart&&!n.options.disabled&&!n.options.readonly)return(t.preventDefault(),t.stopPropagation(),n._dragStart=(t.pageX||t.originalEvent.touches[0].pageX)-parseInt(n.$container.css("margin-left"),10),n.options.animate&&n.$wrapper.removeClass(""+n.options.baseClass+"-animate"),n.$element.trigger("focus.bootstrapSwitch"))}}(this),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(n){return function(t){var i;if(null!=n._dragStart&&(t.preventDefault(),i=(t.pageX||t.originalEvent.touches[0].pageX)-n._dragStart,!(i<-n._handleWidth||i>0)))return n._dragEnd=i,n.$container.css("margin-left",""+n._dragEnd+"px")}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(n){return function(t){var i;if(n._dragStart)return t.preventDefault(),n.options.animate&&n.$wrapper.addClass(""+n.options.baseClass+"-animate"),n._dragEnd?(i=n._dragEnd>-(n._handleWidth/2),n._dragEnd=!1,n.state(n.options.inverse?!i:i)):n.state(!n.options.state),n._dragStart=!1}}(this),"mouseleave.bootstrapSwitch":function(n){return function(){return n.$label.trigger("mouseup.bootstrapSwitch")}}(this)})},n.prototype._externalLabelHandler=function(){var n;return n=this.$element.closest("label"),n.on("click",function(t){return function(i){return i.preventDefault(),i.stopImmediatePropagation(),i.target===n[0]?t.toggleState():void 0}}(this))},n.prototype._formHandler=function(){var n;return n=this.$element.closest("form"),n.data("bootstrap-switch")?void 0:n.on("reset.bootstrapSwitch",function(){return i.setTimeout(function(){return n.find("input").filter(function(){return t(this).data("bootstrap-switch")}).each(function(){return t(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},n.prototype._getClasses=function(n){var u,r,i,f;if(!t.isArray(n))return[""+this.options.baseClass+"-"+n];for(r=[],i=0,f=n.length;f>i;i++)u=n[i],r.push(""+this.options.baseClass+"-"+u);return r},n}(),t.fn.bootstrapSwitch=function(){var f,i,u;return i=arguments[0],f=2<=arguments.length?n.call(arguments,1):[],u=this,this.each(function(){var e,n;return e=t(this),n=e.data("bootstrap-switch"),n||e.data("bootstrap-switch",n=new r(this,i)),"string"==typeof i?u=n[i].apply(n,f):void 0}),u},t.fn.bootstrapSwitch.Constructor=r,t.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this);$(document).ready(function(){activateNavLink();$(".scroll-to").click(function(n){n.preventDefault();$.scrollTo($(this).attr("href"),400)});var n="https://twitter.com/intent/tweet";$(".tweet-btn").each(function(){var t=$(this),i=encodeURIComponent(t.attr("data-url")||document.location.href),r=encodeURIComponent(t.attr("data-text")||document.title);t.attr({href:n+"?text="+r+"&url="+i+"&via=insideUITS",target:"_blank"});t.removeClass("hidden")}),function(){function r(r){r=r||window.event;for(var o=r.target||r.srcElement,h,c,s;o&&o.nodeName.toLowerCase()!=="a";)o=o.parentNode;o&&o.nodeName.toLowerCase()==="a"&&o.href&&(h=o.href.match(u),h&&(c=Math.round(e/2-t/2),s=0,i>n&&(s=Math.round(i/2-n/2)),window.open(o.href,"intent",f+",width="+t+",height="+n+",left="+c+",top="+s),r.returnValue=!1,r.preventDefault&&r.preventDefault()))}if(!window.__twitterIntentHandler){var u=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,f="scrollbars=yes,resizable=yes,toolbar=no,location=yes",t=550,n=420,i=screen.height,e=screen.width;document.addEventListener?document.addEventListener("click",r,!1):document.attachEvent&&document.attachEvent("onclick",r);window.__twitterIntentHandler=!0}}();$(".share-btn").each(function(){var n=$(this),i=encodeURIComponent(n.attr("data-url")||document.location.href),e;title=encodeURIComponent(n.attr("data-title")||document.title);summary=encodeURIComponent(n.attr("data-summary")||"IT News and Events at Indiana University");image=encodeURIComponent(n.attr("data-image")||"");var r=550,t=420,u=screen.height,f=screen.width;left=Math.round(f/2-r/2);wtop=0;u>t&&(wtop=Math.round(u/2-t/2));n.attr({onClick:"window.open('http://www.facebook.com/sharer.php?u="+i+"', 'sharer', 'width="+r+",height="+t+",left="+left+",top="+wtop+"')",href:"javascript: void(0);"});e="http://api.facebook.com/restserver.php?method=links.getStats&urls="+i;n.removeClass("hidden")});$(".footer-menu .label").click(function(n){n.preventDefault();$(".footer-menu").is(".open")?($(".footer-menu ul").animate({top:0,height:0},200),$(".footer-menu").removeClass("open")):($(".footer-menu ul").animate({top:"-8em",height:"8em"},200),$(".footer-menu").addClass("open"))});$("#footer .site-nav .label").click(function(n){n.preventDefault();$("#footer .site-nav").is(".open")?($("#footer .site-nav ul").slideUp(200),$("#footer .site-nav").removeClass("open")):($("#footer .site-nav ul").slideDown(200),$("#footer .site-nav").addClass("open"))})});resetMargins=function(){var t=document.getElementById("header-logo").offsetWidth,n=t+10+"px";$("#iu-branding .masthead").css("margin-left",n);$("#nav-bar .submasthead").css("margin-left",n)};enableSkipToContent=function(){window.addEventListener("hashchange",function(){gotoHash()},!1)};gotoHash=function(){var t=location.hash.substring(1),i=$(".nav a[href=#"+t+"]"),n;if(i){i.tab("show");return}n=document.getElementById(t);n&&(/^(?:a|select|input|button|textarea)$/i.test(n.tagName)||(n.tabIndex=-1),n.focus())};_gaq=_gaq||[];_gaq.push(["_setAccount","UA-44928224-1"]);_gaq.push(["_trackPageview"]);$(function(){var n,t;$.fn.bootstrapSwitch.defaults.size="small";$.fn.bootstrapSwitch.defaults.onColor="success";enableSkipToContent();gotoHash();n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t);toastr.options={debug:!1,positionClass:"toast-bottom-right"};$("#accordion").collapse()});resetMargins=function(){var t=document.getElementById("header-logo").offsetWidth,n=t+10+"px";$(".masthead").css("margin-left",n);$(".submasthead").css("margin-left",n)},function(){this.ResizeSensor=function(n,t){function u(){this.q=[];this.add=function(n){this.q.push(n)};var n,t;this.call=function(){for(n=0,t=this.q.length;n<t;n++)this.q[n].call()}}function f(n,t){return n.currentStyle?n.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(n,null).getPropertyValue(t):n.style[t]}function r(n,t){var e,o,l,a;if(n.resizedAttached){if(n.resizedAttached){n.resizedAttached.add(t);return}}else n.resizedAttached=new u,n.resizedAttached.add(t);n.resizeSensor=document.createElement("div");n.resizeSensor.className="resize-sensor";e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;";o="position: absolute; left: 0; top: 0;";n.resizeSensor.style.cssText=e;n.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+e+'"><div style="'+o+'"><\/div><\/div><div class="resize-sensor-shrink" style="'+e+'"><div style="'+o+' width: 200%; height: 200%"><\/div><\/div>';n.appendChild(n.resizeSensor),{fixed:1,absolute:1}[f(n,"position")]||(n.style.position="relative");var i=n.resizeSensor.childNodes[0],v=i.childNodes[0],r=n.resizeSensor.childNodes[1],y=r.childNodes[0],s,h,c=function(){v.style.width=i.offsetWidth+10+"px";v.style.height=i.offsetHeight+10+"px";i.scrollLeft=i.scrollWidth;i.scrollTop=i.scrollHeight;r.scrollLeft=r.scrollWidth;r.scrollTop=r.scrollHeight;s=n.offsetWidth;h=n.offsetHeight};c();l=function(){n.resizedAttached.call()};a=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener(t,i)};a(i,"scroll",function(){(n.offsetWidth>s||n.offsetHeight>h)&&l();c()});a(r,"scroll",function(){(n.offsetWidth<s||n.offsetHeight<h)&&l();c()})}if("[object Array]"===Object.prototype.toString.call(n)||"undefined"!=typeof jQuery&&n instanceof jQuery||"undefined"!=typeof Elements&&n instanceof Elements)for(var i=0,e=n.length;i<e;i++)r(n[i],t);else r(n,t)}}(),function(){function t(){n.instance=(new n).init();n.update=function(){n.instance.update()}}var n=this.ElementQueries=function(){function t(n){n||(n=document.documentElement);var t=getComputedStyle(n,"fontSize");return parseFloat(t)||16}function r(n,i){var r=i.replace(/[0-9]*/,"");i=parseFloat(i);switch(r){case"px":return i;case"em":return i*t(n);case"rem":return i*t();case"vw":return i*document.documentElement.clientWidth/100;case"vh":return i*document.documentElement.clientHeight/100;case"vmin":case"vmax":var u=document.documentElement.clientWidth/100,f=document.documentElement.clientHeight/100,e=Math[r==="vmin"?"min":"max"];return i*e(u,f);default:return i}}function u(n){var o,t,s,h,c,l,i,u,e,f;this.element=n;this.options={};s=0;h=0;this.addOption=function(n){var t=[n.mode,n.property,n.value].join(",");this.options[t]=n};f=["min-width","min-height","max-width","max-height"];this.call=function(){s=this.element.offsetWidth;h=this.element.offsetHeight;i={};for(o in this.options)this.options.hasOwnProperty(o)&&(t=this.options[o],c=r(this.element,t.value),l=t.property=="width"?s:h,e=t.mode+"-"+t.property,u="",t.mode=="min"&&l>=c&&(u+=t.value),t.mode=="max"&&l<=c&&(u+=t.value),i[e]||(i[e]=""),u&&-1===(" "+i[e]+" ").indexOf(" "+u+" ")&&(i[e]+=" "+u));for(var n in f)i[f[n]]?this.element.setAttribute(f[n],i[f[n]].substr(1)):this.element.removeAttribute(f[n])}}function f(n,t){n.elementQueriesSetupInformation?n.elementQueriesSetupInformation.addOption(t):(n.elementQueriesSetupInformation=new u(n),n.elementQueriesSetupInformation.addOption(t),new ResizeSensor(n,function(){n.elementQueriesSetupInformation.call()}));n.elementQueriesSetupInformation.call()}function e(n,t,i,r){var u,o,e,s;if(document.querySelectorAll&&(u=document.querySelectorAll.bind(document)),u||"undefined"==typeof $$||(u=$$),u||"undefined"==typeof jQuery||(u=jQuery),!u)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";for(o=u(n),e=0,s=o.length;e<s;e++)f(o[e],{mode:t,property:i,value:r})}function n(n){var t;for(n=n.replace(/'/g,'"');null!==(t=o.exec(n));)5<t.length&&e(t[1]||t[5],t[2],t[3],t[4])}function i(t){var u="",r,f;if(t)if("string"==typeof t)t=t.toLowerCase(),(-1!==t.indexOf("min-width")||-1!==t.indexOf("max-width"))&&n(t);else for(r=0,f=t.length;r<f;r++)1===t[r].type?(u=t[r].selectorText||t[r].cssText,-1!==u.indexOf("min-height")||-1!==u.indexOf("max-height")?n(u):(-1!==u.indexOf("min-width")||-1!==u.indexOf("max-width"))&&n(u)):4===t[r].type&&i(t[r].cssRules||t[r].rules)}var o=/,?([^,\n]*)\[[\s\t]*(min|max)-(width|height)[\s\t]*[~$\^]?=[\s\t]*"([^"]*)"[\s\t]*]([^\n\s\{]*)/mgi;this.init=function(){for(var n=0,t=document.styleSheets.length;n<t;n++)i(document.styleSheets[n].cssText||document.styleSheets[n].cssRules||document.styleSheets[n].rules)};this.update=function(){this.init()}};window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent("onload",t)}();typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.indexOf(n)==0});$(function(){$("html").ajaxStart(function(){$(this).addClass("wait")});$("html").ajaxStop(function(){$(this).removeClass("wait")});jQuery.validator.addMethod("uncform",function(n,t){return this.optional(t)||validateUncPath("Form",n)},jQuery.validator.format("The path is incorrectly formatted. You can use: <ul><li>a UNC path for file shares: <em>\\\\server\\folder<\/em><\/li><li>a URL for SharePoint or WebDAV sites: <em>https://server/folder<\/em><\/li>"));jQuery.validator.addMethod("uncsubfolder",function(n,t){return this.optional(t)||validateUncPath("Subfolder",n)},jQuery.validator.format("The path must include a subfolder."));jQuery.validator.addMethod("uncunique",function(n,t){return this.optional(t)||validateUncPath("Unique",n)},jQuery.validator.format("That path has already been added to your list."));jQuery.validator.unobtrusive.adapters.addBool("uncform");jQuery.validator.unobtrusive.adapters.addBool("uncsubfolder");jQuery.validator.unobtrusive.adapters.addBool("uncunique")});!function(n){n(["jquery"],function(n){return function(){function v(n,t,r){return u({type:f.error,iconClass:i().iconClasses.error,message:n,optionsOverride:r,title:t})}function r(r,u){return r||(r=i()),t=n("#"+r.containerId),t.length?t:(u&&(t=nt(r)),t)}function y(n,t,r){return u({type:f.info,iconClass:i().iconClasses.info,message:n,optionsOverride:r,title:t})}function p(n){o=n}function w(n,t,r){return u({type:f.success,iconClass:i().iconClasses.success,message:n,optionsOverride:r,title:t})}function b(n,t,r){return u({type:f.warning,iconClass:i().iconClasses.warning,message:n,optionsOverride:r,title:t})}function k(n){var u=i();t||r(u);s(n,u)||g(u)}function d(u){var f=i();return t||r(f),u&&0===n(":focus",u).length?void e(u):void(t.children().length&&t.remove())}function g(i){for(var u=t.children(),r=u.length-1;r>=0;r--)s(n(u[r]),i)}function s(t,i){return t&&0===n(":focus",t).length?(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){e(t)}}),!0):!1}function nt(i){return t=n("<div/>").attr("id",i.containerId).addClass(i.positionClass).attr("aria-live","polite").attr("role","alert"),t.appendTo(n(i.target)),t}function tt(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;<\/button>",newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function h(n){o&&o(n)}function u(u){function v(t){if(!n(":focus",o).length||t)return(clearTimeout(s.intervalId),o[f.hideMethod]({duration:f.hideDuration,easing:f.hideEasing,complete:function(){e(o);f.onHidden&&"hidden"!==a.state&&f.onHidden();a.state="hidden";a.endTime=new Date;h(a)}}))}function g(){(f.timeOut>0||f.extendedTimeOut>0)&&(w=setTimeout(v,f.extendedTimeOut),s.maxHideTime=parseFloat(f.extendedTimeOut),s.hideEta=(new Date).getTime()+s.maxHideTime)}function nt(){clearTimeout(w);s.hideEta=0;o.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function tt(){var n=(s.hideEta-(new Date).getTime())/s.maxHideTime*100;b.width(n+"%")}var f=i(),p=u.iconClass||f.iconClass;if(f.preventDuplicates){if(u.message===c)return;c=u.message}"undefined"!=typeof u.optionsOverride&&(f=n.extend(f,u.optionsOverride),p=u.optionsOverride.iconClass||p);l++;t=r(f,!0);var w=null,o=n("<div/>"),k=n("<div/>"),d=n("<div/>"),b=n("<div/>"),y=n(f.closeHtml),s={intervalId:null,hideEta:null,maxHideTime:null},a={toastId:l,state:"visible",startTime:new Date,options:f,map:u};return u.iconClass&&o.addClass(f.toastClass).addClass(p),u.title&&(k.append(u.title).addClass(f.titleClass),o.append(k)),u.message&&(d.append(u.message).addClass(f.messageClass),o.append(d)),f.closeButton&&(y.addClass("toast-close-button").attr("role","button"),o.prepend(y)),f.progressBar&&(b.addClass("toast-progress"),o.prepend(b)),o.hide(),f.newestOnTop?t.prepend(o):t.append(o),o[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(w=setTimeout(v,f.timeOut),s.maxHideTime=parseFloat(f.timeOut),s.hideEta=(new Date).getTime()+s.maxHideTime,f.progressBar&&(s.intervalId=setInterval(tt,10))),o.hover(nt,g),!f.onclick&&f.tapToDismiss&&o.click(v),f.closeButton&&y&&y.click(function(n){n.stopPropagation?n.stopPropagation():void 0!==n.cancelBubble&&n.cancelBubble!==!0&&(n.cancelBubble=!0);v(!0)}),f.onclick&&o.click(function(){f.onclick();v()}),h(a),f.debug&&console&&console.log(a),o}function i(){return n.extend({},tt(),a.options)}function e(n){t||(t=r());n.is(":visible")||(n.remove(),n=null,0===t.children().length&&t.remove())}var t,o,c,l=0,f={error:"error",info:"info",success:"success",warning:"warning"},a={clear:k,remove:d,error:v,getContainer:r,info:y,options:{},subscribe:p,success:w,version:"2.1.0",warning:b};return a}()})}("function"==typeof define&&define.amd?define:function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});Markdown=typeof exports=="object"&&typeof require=="function"?exports:{},function(){function i(n){return n}function r(){return!1}function n(){}function t(){}n.prototype={chain:function(n,t){var r=this[n];if(!r)throw new Error("unknown hook "+n);this[n]=r===i?t:function(){var n=Array.prototype.slice.call(arguments,0);return n[0]=r.apply(null,n),t.apply(null,n)}},set:function(n,t){if(!this[n])throw new Error("unknown hook "+n);this[n]=t},addNoop:function(n){this[n]=i},addFalse:function(n){this[n]=r}};Markdown.HookCollection=n;t.prototype={set:function(n,t){this["s_"+n]=t},get:function(n){return this["s_"+n]}};Markdown.Converter=function(){function ft(n){return n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(n,t,i,f,e,o){return(t=t.toLowerCase(),r.set(t,tt(i)),e)?f:(o&&u.set(t,o.replace(/"/g,"&quot;")),"")})}function w(n){return n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,o),n=n.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),n=n.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,o),n.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o)}function o(n,t){var i=t;return i=i.replace(/^\n+/,""),i=i.replace(/\n+$/g,""),"\n\n~K"+(e.push(i)-1)+"K\n\n"}function c(n,t){n=i.preBlockGamut(n,l);n=ht(n);var r="<hr />\n";return n=n.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,r),n=n.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,r),n=n.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,r),n=k(n),n=ct(n),n=yt(n),n=i.postBlockGamut(n,l),n=w(n),pt(n,t)}function s(n){return n=i.preSpanGamut(n),n=at(n),n=et(n),n=wt(n),n=st(n),n=ot(n),n=gt(n),n=n.replace(/~P/g,"://"),n=tt(n),n=vt(n),n=n.replace(/  +\n/g," <br>\n"),i.postSpanGamut(n)}function et(n){return n.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(n){var t=n.replace(/(.)<\/?code>(?=.)/g,"$1`");return f(t,n.charAt(1)=="!"?"\\`*_/":"\\`*_")})}function ot(n){return n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,a),n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,a),n.replace(/(\[([^\[\]]+)\])()()()()()/g,a)}function a(n,t,i,e,o,s,h,c){var p;c==undefined&&(c="");var w=t,b=i.replace(/:\/\//g,"~P"),a=e.toLowerCase(),l=o,y=c;if(l=="")if(a==""&&(a=b.toLowerCase().replace(/ ?\n/g," ")),l="#"+a,r.get(a)!=undefined)l=r.get(a),u.get(a)!=undefined&&(y=u.get(a));else if(w.search(/\(\s*\)$/m)>-1)l="";else return w;return l=ti(l),l=f(l,"*_"),p='<a href="'+l+'"',y!=""&&(y=v(y),y=f(y,"*_"),p+=' title="'+y+'"'),p+(">"+b+"<\/a>")}function st(n){return n=n.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,b),n.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,b)}function v(n){return n.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function b(n,t,i,e,o,s,h,c){var b=t,p=i,a=e.toLowerCase(),y=o,l=c,w;if(l||(l=""),y=="")if(a==""&&(a=p.toLowerCase().replace(/ ?\n/g," ")),y="#"+a,r.get(a)!=undefined)y=r.get(a),u.get(a)!=undefined&&(l=u.get(a));else return b;return p=f(v(p),"*_[]()"),y=f(y,"*_"),w='<img src="'+y+'" alt="'+p+'"',l=v(l),l=f(l,"*_"),w+=' title="'+l+'"',w+" />"}function ht(n){return n=n.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(n,t){return"<h1>"+s(t)+"<\/h1>\n\n"}),n=n.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(n,t){return"<h2>"+s(t)+"<\/h2>\n\n"}),n.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(n,t,i){var r=t.length;return"<h"+r+">"+s(i)+"<\/h"+r+">\n\n"})}function k(n,t){n+="~0";var i=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return h?n=n.replace(i,function(n,i,r){var e=i,u=r.search(/[*+-]/g)>-1?"ul":"ol",f=g(e,u,t);return f=f.replace(/\s+$/,""),"<"+u+">"+f+"<\/"+u+">\n"}):(i=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,n=n.replace(i,function(n,t,i,r){var f=t,e=i,u=r.search(/[*+-]/g)>-1?"ul":"ol",o=g(e,u);return f+"<"+u+">\n"+o+"<\/"+u+">\n"})),n.replace(/~0/,"")}function g(n,t,i){h++;n=n.replace(/\n{2,}$/,"\n")+"~0";var r=d[t],f=new RegExp("(^[ \\t]*)("+r+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+r+")[ \\t]+))","gm"),u=!1;return n=n.replace(f,function(n,t,r,f){var e=f,l=t,o=/\n\n$/.test(e),h=o||e.search(/\n{2,}/)>-1;return h||u?e=c(y(e),!0):(e=k(y(e),!0),e=e.replace(/\n$/,""),i||(e=s(e))),u=o,"<li>"+e+"<\/li>\n"}),n=n.replace(/~0/g,""),h--,n}function ct(n){return n+="~0",n=n.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(n,t,i){var r=t,u=i;return r=nt(y(r)),r=rt(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n<\/code><\/pre>","\n\n"+r+"\n\n"+u}),n.replace(/~0/,"")}function lt(n){return n=n.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(e.push(n)-1)+"K\n\n"}function at(n){return n.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(n,t,i,r){var u=r;return u=u.replace(/^([ \t]*)/g,""),u=u.replace(/[ \t]*$/g,""),u=nt(u),u=u.replace(/:\/\//g,"~P"),t+"<code>"+u+"<\/code>"})}function nt(n){return n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),f(n,"*_{}[]\\",!1)}function vt(n){return n=n.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3<\/strong>$4"),n.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3<\/em>$4")}function yt(n){return n.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(n,t){var i=t;return i=i.replace(/^[ \t]*>[ \t]?/gm,"~0"),i=i.replace(/~0/g,""),i=i.replace(/^[ \t]+$/gm,""),i=c(i),i=i.replace(/(^|\n)/g,"$1  "),i=i.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(n,t){var i=t;return i=i.replace(/^  /mg,"~0"),i.replace(/~0/g,"")}),lt("<blockquote>\n"+i+"\n<\/blockquote>")})}function pt(n,t){var i,r,f;n=n.replace(/^\n+/g,"");n=n.replace(/\n+$/g,"");var h=n.split(/\n{2,}/g),u=[],o=h.length;for(r=0;r<o;r++)i=h[r],/~K(\d+)K/.test(i)?u.push(i):/\S/.test(i)&&(i=s(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="<\/p>",u.push(i));if(!t)for(o=u.length,r=0;r<o;r++)for(f=!0;f;)f=!1,u[r]=u[r].replace(/~K(\d+)K/g,function(n,t){return f=!0,e[t]});return u.join("\n\n")}function tt(n){return n=n.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),n.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function wt(n){return n=n.replace(/\\(\\)/g,p),n.replace(/\\([`*_{}\[\]()>#+-.!])/g,p)}function dt(n,t,i,r){var o,u,e,f,h,s;if(t)return n;if(r.charAt(r.length-1)!==")")return"<"+i+r+">";for(o=r.match(/[()]/g),u=0,e=0;e<o.length;e++)o[e]==="("?u<=0?u=1:u++:u--;return f="",u<0&&(h=new RegExp("\\){1,"+-u+"}$"),r=r.replace(h,function(n){return f=n,""})),f&&(s=r.charAt(r.length-1),kt.test(s)||(f=s+f,r=r.substr(0,r.length-1))),"<"+i+r+">"+f}function gt(n){n=n.replace(bt,dt);var t=function(n,t){return'<a href="'+t+'">'+i.plainLinkText(t)+"<\/a>"};return n.replace(/<((https?|ftp):[^'">\s]+)>/gi,t)}function ni(n){return n.replace(/~E(\d+)E/g,function(n,t){var i=parseInt(t);return String.fromCharCode(i)})}function y(n){return n=n.replace(/^(\t|[ ]{1,4})/gm,"~0"),n.replace(/~0/g,"")}function rt(n){if(!/\t/.test(n))return n;var r=["    ","   ","  "," "],t=0,i;return n.replace(/[\n\t]/g,function(n,u){return n==="\n"?(t=u+1,n):(i=(u-t)%4,t=u+1,r[i])})}function ti(n){if(!n)return"";var t=n.length;return n.replace(ut,function(i,r){return i=="~D"?"%24":i==":"&&(r==t-1||/[0-9\/]/.test(n.charAt(r+1)))?":":"%"+i.charCodeAt(0).toString(16)})}function f(n,t,i){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])",u;return i&&(r="\\\\"+r),u=new RegExp(r,"g"),n.replace(u,p)}function p(n,t){var i=t.charCodeAt(0);return"~E"+i+"E"}var i=this.hooks=new n,r,u,e,h,l,d,ut;i.addNoop("plainLinkText");i.addNoop("preConversion");i.addNoop("postNormalization");i.addNoop("preBlockGamut");i.addNoop("postBlockGamut");i.addNoop("preSpanGamut");i.addNoop("postSpanGamut");i.addNoop("postConversion");this.makeHtml=function(n){if(r)throw new Error("Recursive call to converter.makeHtml");return r=new t,u=new t,e=[],h=0,n=i.preConversion(n),n=n.replace(/~/g,"~T"),n=n.replace(/\$/g,"~D"),n=n.replace(/\r\n/g,"\n"),n=n.replace(/\r/g,"\n"),n="\n\n"+n+"\n\n",n=rt(n),n=n.replace(/^[ \t]+$/mg,""),n=i.postNormalization(n),n=w(n),n=ft(n),n=c(n),n=ni(n),n=n.replace(/~D/g,"$$"),n=n.replace(/~T/g,"~"),n=i.postConversion(n),e=u=r=null,n};l=function(n){return c(n)};d={ol:"\\d+[.]",ul:"[*+-]"};var it="[-A-Z0-9+&@#/%=~_|[\\])]",bt=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*'+it+")(?=$|\\W)","gi"),kt=new RegExp(it,"i");ut=/(?:["'*()[\]:]|~D)/g}}(),function(){function h(){}function p(t){this.buttonBar=n.getElementById("wmd-button-bar"+t);this.preview=n.getElementById("wmd-preview"+t);this.input=n.getElementById("wmd-input"+t)}function w(n,i){var l=this,e=[],r=0,o="none",f,v,a,s=function(n,t){o!=n&&(o=n,t||y());u.isIE&&o=="moving"?a=null:v=setTimeout(h,1)},h=function(n){a=new c(i,n);v=undefined};this.setCommandMode=function(){o="command";y();v=setTimeout(h,0)};this.canUndo=function(){return r>1};this.canRedo=function(){return e[r+1]?!0:!1};this.undo=function(){l.canUndo()&&(f?(f.restore(),f=null):(e[r]=new c(i),e[--r].restore(),n&&n()));o="none";i.input.focus();h()};this.redo=function(){l.canRedo()&&(e[++r].restore(),n&&n());o="none";i.input.focus();h()};var y=function(){var t=a||new c(i);if(!t)return!1;if(o=="moving"){f||(f=t);return}f&&(e[r-1].text!=f.text&&(e[r++]=f),f=null);e[r++]=t;e[r+1]=null;n&&n()},p=function(n){var t=!1,i,r;if((n.ctrlKey||n.metaKey)&&!n.altKey){i=n.charCode||n.keyCode;r=String.fromCharCode(i);switch(r.toLowerCase()){case"y":l.redo();t=!0;break;case"z":n.shiftKey?l.redo():l.undo();t=!0}}if(t){n.preventDefault&&n.preventDefault();window.event&&(window.event.returnValue=!1);return}},w=function(n){if(!n.ctrlKey&&!n.metaKey){var t=n.keyCode;t>=33&&t<=40||t>=63232&&t<=63235?s("moving"):t==8||t==46||t==127?s("deleting"):t==13?s("newlines"):t==27?s("escape"):(t<16||t>20)&&t!=91&&s("typing")}},b=function(){t.addEvent(i.input,"keypress",function(n){(n.ctrlKey||n.metaKey)&&!n.altKey&&(n.keyCode==89||n.keyCode==90)&&n.preventDefault()});var n=function(){(u.isIE||a&&a.text!=i.input.value)&&v==undefined&&(o="paste",y(),h())};t.addEvent(i.input,"keydown",p);t.addEvent(i.input,"keydown",w);t.addEvent(i.input,"mousedown",function(){s("moving")});i.input.onpaste=n;i.input.ondrop=n},k=function(){b();h(!0);y()};k()}function c(i,r){var e=this,f=i.input;this.init=function(){t.isVisible(f)&&(r||!n.activeElement||n.activeElement===f)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=f.scrollTop,(!this.text&&f.selectionStart||f.selectionStart===0)&&(this.text=f.value))};this.setInputAreaSelection=function(){if(t.isVisible(f))if(f.selectionStart===undefined||u.isOpera){if(n.selection){if(n.activeElement&&n.activeElement!==f)return;f.focus();var i=f.createTextRange();i.moveStart("character",-f.value.length);i.moveEnd("character",-f.value.length);i.moveEnd("character",e.end);i.moveStart("character",e.start);i.select()}}else f.focus(),f.selectionStart=e.start,f.selectionEnd=e.end,f.scrollTop=e.scrollTop};this.setInputAreaSelectionStartEnd=function(){var s,h;if(!i.ieCachedRange&&(f.selectionStart||f.selectionStart===0))e.start=f.selectionStart,e.end=f.selectionEnd;else if(n.selection){e.text=t.fixEolChars(f.value);var r=i.ieCachedRange||n.selection.createRange(),u=t.fixEolChars(r.text),o="\x07",c=o+u+o;if(r.text=c,s=t.fixEolChars(f.value),r.moveStart("character",-c.length),r.text=u,e.start=s.indexOf(o),e.end=s.lastIndexOf(o)-o.length,h=e.text.length-t.fixEolChars(f.value).length,h){for(r.moveStart("character",-u.length);h--;)u+="\n",e.end+=1;r.text=u}i.ieCachedRange&&(e.scrollTop=i.ieCachedScrollTop);i.ieCachedRange=null;this.setInputAreaSelection()}};this.restore=function(){e.text!=undefined&&e.text!=f.value&&(f.value=e.text);this.setInputAreaSelection();f.scrollTop=e.scrollTop};this.getChunks=function(){var n=new h;return n.before=t.fixEolChars(e.text.substring(0,e.start)),n.startTag="",n.selection=t.fixEolChars(e.text.substring(e.start,e.end)),n.endTag="",n.after=t.fixEolChars(e.text.substring(e.end)),n.scrollTop=e.scrollTop,n};this.setChunks=function(n){n.before=n.before+n.startTag;n.after=n.endTag+n.after;this.start=n.before.length;this.end=n.before.length+n.selection.length;this.text=n.before+n.selection+n.after;this.scrollTop=n.scrollTop};this.init()}function b(i,r,e){var ut=this,s,h,c,a=3e3,v="delayed",k=function(n,i){t.addEvent(n,"input",i);n.onpaste=i;n.ondrop=i;t.addEvent(n,"keypress",i);t.addEvent(n,"keydown",i)},y=function(){var t=0;return window.innerHeight?t=window.pageYOffset:n.documentElement&&n.documentElement.scrollTop?t=n.documentElement.scrollTop:n.body&&(t=n.body.scrollTop),t},l=function(){var n,t,u;r.preview&&((n=r.input.value,n&&n==c)||(c=n,t=(new Date).getTime(),n=i.makeHtml(n),u=(new Date).getTime(),h=u-t,it(n)))},p=function(){if(s&&(clearTimeout(s),s=undefined),v!=="manual"){var n=0;v==="delayed"&&(n=h);n>a&&(n=a);s=setTimeout(l,n)}},d=function(n){return n.scrollHeight<=n.clientHeight?1:n.scrollTop/(n.scrollHeight-n.clientHeight)},g=function(){r.preview&&(r.preview.scrollTop=(r.preview.scrollHeight-r.preview.clientHeight)*d(r.preview))};this.refresh=function(n){n?(c="",l()):p()};this.processingTime=function(){return h};var w=!0,nt=function(n){var t=r.preview,i=t.parentNode,u=t.nextSibling;i.removeChild(t);t.innerHTML=n;u?i.insertBefore(t,u):i.appendChild(t)},b=function(n){r.preview.innerHTML=n},o,tt=function(n){if(o)return o(n);try{b(n);o=b}catch(t){o=nt;o(n)}},it=function(n){var i=f.getTop(r.input)-y(),t;if(r.preview&&(tt(n),e()),g(),w){w=!1;return}t=f.getTop(r.input)-y();u.isIE?setTimeout(function(){window.scrollBy(0,t-i)},0):window.scrollBy(0,t-i)},rt=function(){k(r.input,p);l();r.preview&&(r.preview.scrollTop=0)};rt()}function k(i,r,f,e,s,h,l){function v(n){var t;if(p.focus(),n.textOp){if(f&&f.setCommandMode(),t=new c(r),!t)return;var i=t.getChunks(),u=function(){p.focus();i&&t.setChunks(i);t.restore();e.refresh()},o=n.textOp(i,u);o||u()}n.execute&&n.execute(f)}function w(t,i){var e="0px",o="-40px",f=t.getElementsByTagName("span")[0];i?(f.style.backgroundPosition=t.XShift+" "+e,t.onmouseover=function(){f.style.backgroundPosition=this.XShift+" "+o},t.onmouseout=function(){f.style.backgroundPosition=this.XShift+" "+e},u.isIE&&(t.onmousedown=function(){n.activeElement&&n.activeElement!==r.input||(r.ieCachedRange=document.selection.createRange(),r.ieCachedScrollTop=r.input.scrollTop)}),t.isHelp||(t.onclick=function(){return this.onmouseout&&this.onmouseout(),v(this),!1})):(f.style.backgroundPosition=t.XShift+" -20px",t.onmouseover=t.onmouseout=t.onclick=function(){})}function y(n){return typeof n=="string"&&(n=s[n]),function(){n.apply(s,arguments)}}function d(){var v=r.buttonBar,u=document.createElement("ul"),s,t,c;u.id="wmd-button-row"+i;u.className="wmd-button-row";u=v.appendChild(u);var f=0,n=function(n,t,r,e){var o=document.createElement("li"),s;return o.className="wmd-button",o.style.left=f+"px",f+=25,s=document.createElement("span"),o.id=n+i,o.appendChild(s),o.title=t,o.XShift=r,e&&(o.textOp=e),w(o,!0),u.appendChild(o),o},e=function(n){var t=document.createElement("li");t.className="wmd-spacer wmd-spacer"+n;t.id="wmd-spacer"+n+i;u.appendChild(t);f+=25};a.bold=n("wmd-bold-button",l("bold"),"0px",y("doBold"));a.italic=n("wmd-italic-button",l("italic"),"-20px",y("doItalic"));e(1);a.link=n("wmd-link-button",l("link"),"-40px",y(function(n,t){return this.doLinkOrImage(n,t,!1)}));a.quote=n("wmd-quote-button",l("quote"),"-60px",y("doBlockquote"));a.code=n("wmd-code-button",l("code"),"-80px",y("doCode"));a.image=n("wmd-image-button",l("image"),"-100px",y(function(n,t){return this.doLinkOrImage(n,t,!0)}));e(2);a.olist=n("wmd-olist-button",l("olist"),"-120px",y(function(n,t){this.doList(n,t,!0)}));a.ulist=n("wmd-ulist-button",l("ulist"),"-140px",y(function(n,t){this.doList(n,t,!1)}));a.heading=n("wmd-heading-button",l("heading"),"-160px",y("doHeading"));a.hr=n("wmd-hr-button",l("hr"),"-180px",y("doHorizontalRule"));e(3);a.undo=n("wmd-undo-button",l("undo"),"-200px",null);a.undo.execute=function(n){n&&n.undo()};s=/win/.test(o.platform.toLowerCase())?l("redo"):l("redomac");a.redo=n("wmd-redo-button",s,"-220px",null);a.redo.execute=function(n){n&&n.redo()};h&&(t=document.createElement("li"),c=document.createElement("span"),t.appendChild(c),t.className="wmd-button wmd-help-button",t.id="wmd-help-button"+i,t.XShift="-240px",t.isHelp=!0,t.style.right="0px",t.title=l("help"),t.onclick=h.handler,w(t,!0),u.appendChild(t),a.help=t);k()}function k(){f&&(w(a.undo,f.canUndo()),w(a.redo,f.canRedo()))}var p=r.input,a={},b;d();b="keydown";u.isOpera&&(b="keypress");t.addEvent(p,b,function(n){if((n.ctrlKey||n.metaKey)&&!n.altKey&&!n.shiftKey){var t=n.charCode||n.keyCode,i=String.fromCharCode(t).toLowerCase();switch(i){case"b":v(a.bold);break;case"i":v(a.italic);break;case"l":v(a.link);break;case"q":v(a.quote);break;case"k":v(a.code);break;case"g":v(a.image);break;case"o":v(a.olist);break;case"u":v(a.ulist);break;case"h":v(a.heading);break;case"r":v(a.hr);break;case"y":v(a.redo);break;case"z":n.shiftKey?v(a.redo):v(a.undo);break;default:return}n.preventDefault&&n.preventDefault();window.event&&(window.event.returnValue=!1)}});t.addEvent(p,"keyup",function(n){var i,t;!n.shiftKey||n.ctrlKey||n.metaKey||(i=n.charCode||n.keyCode,i===13&&(t={},t.textOp=y("doAutoindent"),v(t)))});u.isIE&&t.addEvent(p,"keydown",function(n){var t=n.keyCode;if(t===27)return!1});this.setUndoRedoButtonStates=k}function l(n,t){this.hooks=n;this.getString=t}function d(n){return n.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(n,t,i){return t=t.replace(/\?.*$/,function(n){return n.replace(/\+/g," ")}),t=decodeURIComponent(t),t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),t=t.replace(/\?.*$/,function(n){return n.replace(/\+/g,"%2b")}),i&&(i=i.trim?i.trim():i.replace(/^\s*/,"").replace(/\s*$/,""),i=i.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),i?t+' "'+i+'"':t})}var t={},f={},e={},n=window.document,r=window.RegExp,o=window.navigator,s={lineLength:72},u={isIE:/msie/.test(o.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(o.userAgent.toLowerCase())||/msie 5/.test(o.userAgent.toLowerCase()),isOpera:/opera/.test(o.userAgent.toLowerCase())},a={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink<\/b><\/p><p>http://example.com/ "optional title"<\/p>',quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image<\/b><\/p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?<\/a><\/p>",olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",help:"Markdown Editing Help"},v="http://",y="http://",i;Markdown.Editor=function(t,i,r){var e,u,o,f;r=r||{};typeof r.handler=="function"&&(r={helpButton:r});r.strings=r.strings||{};r.helpButton&&(r.strings.help=r.strings.help||r.helpButton.title);e=function(n){return r.strings[n]||a[n]};i=i||"";u=this.hooks=new Markdown.HookCollection;u.addNoop("onPreviewRefresh");u.addNoop("postBlockquoteCreation");u.addFalse("insertImageDialog");this.getConverter=function(){return t};o=this;this.run=function(){var a,s,c,h,v;f||(f=new p(i),a=new l(u,e),s=new b(t,f,function(){u.onPreviewRefresh()}),/\?noundo/.test(n.location.href)||(c=new w(function(){s.refresh();h&&h.setUndoRedoButtonStates()},f),this.textOperation=function(n){c.setCommandMode();n();o.refreshPreview()}),h=new k(i,f,c,s,a,r.helpButton,e),h.setUndoRedoButtonStates(),v=o.refreshPreview=function(){s.refresh(!0)},v())}};h.prototype.findTags=function(n,i){var r=this,u;n&&(u=t.extendRegExp(n,"","$"),this.before=this.before.replace(u,function(n){return r.startTag=r.startTag+n,""}),u=t.extendRegExp(n,"^",""),this.selection=this.selection.replace(u,function(n){return r.startTag=r.startTag+n,""}));i&&(u=t.extendRegExp(i,"","$"),this.selection=this.selection.replace(u,function(n){return r.endTag=n+r.endTag,""}),u=t.extendRegExp(i,"^",""),this.after=this.after.replace(u,function(n){return r.endTag=n+r.endTag,""}))};h.prototype.trimWhitespace=function(n){var t,i,r=this;n?t=i="":(t=function(n){return r.before+=n,""},i=function(n){return r.after=n+r.after,""});this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,i)};h.prototype.skipLines=function(n,t,i){n===undefined&&(n=1);t===undefined&&(t=1);n++;t++;var u,f;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+r.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+r.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+r.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+r.$1,this.before){for(u=f="";n--;)u+="\\n?",f+="\n";i&&(u="\\n*");this.before=this.before.replace(new r(u+"$",""),f)}if(this.after){for(u=f="";t--;)u+="\\n?",f+="\n";i&&(u="\\n*");this.after=this.after.replace(new r(u,""),f)}};t.isVisible=function(n){return window.getComputedStyle?window.getComputedStyle(n,null).getPropertyValue("display")!=="none":n.currentStyle?n.currentStyle.display!=="none":void 0};t.addEvent=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener(t,i,!1)};t.removeEvent=function(n,t,i){n.detachEvent?n.detachEvent("on"+t,i):n.removeEventListener(t,i,!1)};t.fixEolChars=function(n){return n=n.replace(/\r\n/g,"\n"),n.replace(/\r/g,"\n")};t.extendRegExp=function(n,t,i){(t===null||t===undefined)&&(t="");(i===null||i===undefined)&&(i="");var u=n.toString(),f;return u=u.replace(/\/([gim]*)$/,function(n,t){return f=t,""}),u=u.replace(/(^\/|\/$)/g,""),u=t+u+i,new r(u,f)};f.getTop=function(n,t){var i=n.offsetTop;if(!t)while(n=n.offsetParent)i+=n.offsetTop;return i};f.getHeight=function(n){return n.offsetHeight||n.scrollHeight};f.getWidth=function(n){return n.offsetWidth||n.scrollWidth};f.getPageSize=function(){var r,u,t,i,f,e;return self.innerHeight&&self.scrollMaxY?(r=n.body.scrollWidth,u=self.innerHeight+self.scrollMaxY):n.body.scrollHeight>n.body.offsetHeight?(r=n.body.scrollWidth,u=n.body.scrollHeight):(r=n.body.offsetWidth,u=n.body.offsetHeight),self.innerHeight?(t=self.innerWidth,i=self.innerHeight):n.documentElement&&n.documentElement.clientHeight?(t=n.documentElement.clientWidth,i=n.documentElement.clientHeight):n.body&&(t=n.body.clientWidth,i=n.body.clientHeight),f=Math.max(r,t),e=Math.max(u,i),[f,e,t,i]};e.createBackground=function(){var i=n.createElement("div"),t=i.style,r;return i.className="wmd-prompt-background",t.position="absolute",t.top="0",t.zIndex="1000",u.isIE?t.filter="alpha(opacity=50)":t.opacity="0.5",r=f.getPageSize(),t.height=r[1]+"px",u.isIE?(t.left=n.documentElement.scrollLeft,t.width=n.documentElement.clientWidth):(t.left="0",t.width="100%"),n.body.appendChild(i),i};e.prompt=function(i,r,e){var o,s;r===undefined&&(r="");var c=function(n){var t=n.charCode||n.keyCode;t===27&&h(!0)},h=function(i){t.removeEvent(n.body,"keydown",c);var r=s.value;return i?r=null:(r=r.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(r)||(r="http://"+r)),o.parentNode.removeChild(o),e(r),!1},l=function(){var y,l,e,a,v;o=n.createElement("div");o.className="wmd-prompt-dialog";o.style.padding="10px;";o.style.position="fixed";o.style.width="400px";o.style.zIndex="1001";y=n.createElement("div");y.innerHTML=i;y.style.padding="5px";o.appendChild(y);l=n.createElement("form");e=l.style;l.onsubmit=function(){return h(!1)};e.padding="0";e.margin="0";e.cssFloat="left";e.width="100%";e.textAlign="center";e.position="relative";o.appendChild(l);s=n.createElement("input");s.type="text";s.value=r;e=s.style;e.display="block";e.width="80%";e.marginLeft=e.marginRight="auto";l.appendChild(s);a=n.createElement("input");a.type="button";a.onclick=function(){return h(!1)};a.value="OK";e=a.style;e.margin="10px";e.display="inline";e.width="7em";v=n.createElement("input");v.type="button";v.onclick=function(){return h(!0)};v.value="Cancel";e=v.style;e.margin="10px";e.display="inline";e.width="7em";l.appendChild(a);l.appendChild(v);t.addEvent(n.body,"keydown",c);o.style.top="50%";o.style.left="50%";o.style.display="block";u.isIE_5or6&&(o.style.position="absolute",o.style.top=n.documentElement.scrollTop+200+"px",o.style.left="50%");n.body.appendChild(o);o.style.marginTop=-(f.getHeight(o)/2)+"px";o.style.marginLeft=-(f.getWidth(o)/2)+"px"};setTimeout(function(){var t,n;l();t=r.length;s.selectionStart!==undefined?(s.selectionStart=0,s.selectionEnd=t):s.createTextRange&&(n=s.createTextRange(),n.collapse(!1),n.moveStart("character",-t),n.moveEnd("character",t),n.select());s.focus()},0)};i=l.prototype;i.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";i.unwrap=function(n){var t=new r("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");n.selection=n.selection.replace(t,"$1 $2")};i.wrap=function(n,t){this.unwrap(n);var i=new r("(.{1,"+t+"})( +|$\\n?)","gm"),u=this;n.selection=n.selection.replace(i,function(n,t){return new r("^"+u.prefixes,"").test(n)?n:t+"\n"});n.selection=n.selection.replace(/\s+$/,"")};i.doBold=function(n,t){return this.doBorI(n,t,2,this.getString("boldexample"))};i.doItalic=function(n,t){return this.doBorI(n,t,1,this.getString("italicexample"))};i.doBorI=function(n,t,i,u){var s,e;n.trimWhitespace();n.selection=n.selection.replace(/\n{2,}/g,"\n");var h=/(\**$)/.exec(n.before)[0],f=/(^\**)/.exec(n.after)[0],o=Math.min(h.length,f.length);o>=i&&(o!=2||i!=1)?(n.before=n.before.replace(r("[*]{"+i+"}$",""),""),n.after=n.after.replace(r("^[*]{"+i+"}",""),"")):!n.selection&&f?(n.after=n.after.replace(/^([*_]*)/,""),n.before=n.before.replace(/(\s?)$/,""),s=r.$1,n.before=n.before+f+s):(n.selection||f||(n.selection=u),e=i<=1?"*":"**",n.before=n.before+e,n.after=e+n.after);return};i.stripLinkDefs=function(n,t){return n.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(n,i,r,u,f){return(t[i]=n.replace(/\s*$/,""),u)?(t[i]=n.replace(/["(](.+?)[")]$/,""),u+f):""})};i.addLinkDef=function(n,t){var r=0,i={},s;n.before=this.stripLinkDefs(n.before,i);n.selection=this.stripLinkDefs(n.selection,i);n.after=this.stripLinkDefs(n.after,i);var e="",u=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(n){r++;n=n.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+r+"]:");e+="\n"+n},f=function(n,t,e,s,h,c){return(e=e.replace(u,f),i[h])?(o(i[h]),t+e+s+r+c):n};return n.before=n.before.replace(u,f),t?o(t):n.selection=n.selection.replace(u,f),s=r,n.after=n.after.replace(u,f),n.after&&(n.after=n.after.replace(/\n*$/,"")),n.after||(n.selection=n.selection.replace(/\n*$/,"")),n.after+="\n\n"+e,s};i.doLinkOrImage=function(n,t,i){var f,r,u;if(n.trimWhitespace(),n.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),n.endTag.length>1&&n.startTag.length>0)n.startTag=n.startTag.replace(/!?\[/,""),n.endTag="",this.addLinkDef(n,null);else{if(n.selection=n.startTag+n.selection+n.endTag,n.startTag=n.endTag="",/\n\n/.test(n.selection)){this.addLinkDef(n,null);return}return r=this,u=function(u){if(f.parentNode.removeChild(f),u!==null){n.selection=(" "+n.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var e=" [999]: "+d(u),o=r.addLinkDef(n,e);n.startTag=i?"![":"[";n.endTag="]["+o+"]";n.selection||(n.selection=i?r.getString("imagedescription"):r.getString("linkdescription"))}t()},f=e.createBackground(),i?this.hooks.insertImageDialog(u)||e.prompt(this.getString("imagedialog"),v,u):e.prompt(this.getString("linkdialog"),y,u),!0}};i.doAutoindent=function(n){var t=this,i=!1;n.before=n.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");n.before=n.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");n.before=n.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");n.selection||/^[ \t]*(?:\n|$)/.test(n.after)||(n.after=n.after.replace(/^[^\n]*/,function(t){return n.selection=t,""}),i=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(n.before)&&t.doList&&t.doList(n);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(n.before)&&t.doBlockquote&&t.doBlockquote(n);/(\n|^)(\t|[ ]{4,}).*\n$/.test(n.before)&&t.doCode&&t.doCode(n);i&&(n.after=n.selection+n.after,n.selection="")};i.doBlockquote=function(n){var t,u,i,o,r,f,e,h;if(n.selection=n.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,i,r,u){return n.before+=i,n.after=u+n.after,r}),n.before=n.before.replace(/(>[ \t]*)$/,function(t,i){return n.selection=i+n.selection,""}),n.selection=n.selection.replace(/^(\s|>)+$/,""),n.selection=n.selection||this.getString("quoteexample"),t="",u="",n.before){for(o=n.before.replace(/\n$/,"").split("\n"),r=!1,f=0;f<o.length;f++)e=!1,i=o[f],r=r&&i.length>0,/^>/.test(i)?(e=!0,!r&&i.length>1&&(r=!0)):e=/^[ \t]*$/.test(i)?!0:r,e?t+=i+"\n":(u+=t+i,t="\n");/(^|\n)>/.test(t)||(u+=t,t="")}n.startTag=t;n.before=u;n.after&&(n.after=n.after.replace(/^\n?/,"\n"));n.after=n.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return n.endTag=t,""});h=function(t){var i=t?"> ":"";n.startTag&&(n.startTag=n.startTag.replace(/\n((>|\s)*)\n$/,function(n,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}));n.endTag&&(n.endTag=n.endTag.replace(/^\n((>|\s)*)\n/,function(n,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}))};/^(?![ ]{0,3}>)/m.test(n.selection)?(this.wrap(n,s.lineLength-2),n.selection=n.selection.replace(/^/gm,"> "),h(!0),n.skipLines()):(n.selection=n.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(n),h(!1),!/^(\n|^)[ ]{0,3}>/.test(n.selection)&&n.startTag&&(n.startTag=n.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(n.selection)&&n.endTag&&(n.endTag=n.endTag.replace(/^\n{0,2}/,"\n\n")));n.selection=this.hooks.postBlockquoteCreation(n.selection);/\n/.test(n.selection)||(n.selection=n.selection.replace(/^(> *)/,function(t,i){return n.startTag+=i,""}))};i.doCode=function(n){var r=/\S[ ]*$/.test(n.before),u=/^[ ]*\S/.test(n.after),t,i;(u||r)&&!/\n/.test(n.selection)?(n.trimWhitespace(),n.findTags(/`/,/`/),n.startTag||n.endTag?n.endTag&&!n.startTag?(n.before+=n.endTag,n.endTag=""):n.startTag=n.endTag="":(n.startTag=n.endTag="`",n.selection||(n.selection=this.getString("codeexample")))):(n.before=n.before.replace(/[ ]{4}$/,function(t){return n.selection=t+n.selection,""}),t=1,i=1,/(\n|^)(\t|[ ]{4,}).*\n$/.test(n.before)&&(t=0),/^\n(\t|[ ]{4,})/.test(n.after)&&(i=0),n.skipLines(t,i),n.selection?/^[ ]{0,3}\S/m.test(n.selection)?/\n/.test(n.selection)?n.selection=n.selection.replace(/^/gm,"    "):n.before+="    ":n.selection=n.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(n.startTag="    ",n.selection=this.getString("codeexample")))};i.doList=function(n,t,i){var l=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,a="-",v=1,y=function(){var n;return i?(n=" "+v+". ",v++):n=" "+a+" ",n},u=function(n){return i===undefined&&(i=/^\s*\d/.test(n)),n.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return y()})},f,e,o,h,c;(n.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!n.before||/\n$/.test(n.before)||/^\n/.test(n.startTag)||(n.before+=n.startTag,n.startTag=""),n.startTag&&(f=/\d+[.]/.test(n.startTag),n.startTag="",n.selection=n.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(n),n.skipLines(),f&&(n.after=n.after.replace(l,u)),i==f))||(e=1,n.before=n.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(n){return/^\s*([*+-])/.test(n)&&(a=r.$1),e=/[^\n]\n\n[^\n]/.test(n)?1:0,u(n)}),n.selection||(n.selection=this.getString("litem")),o=y(),h=1,n.after=n.after.replace(l,function(n){return h=/[^\n]\n\n[^\n]/.test(n)?1:0,u(n)}),n.trimWhitespace(!0),n.skipLines(e,h,!0),n.startTag=o,c=o.replace(/./g," "),this.wrap(n,s.lineLength-c.length),n.selection=n.selection.replace(/\n/g,"\n"+c))};i.doHeading=function(n){var t,u,f,i;if(n.selection=n.selection.replace(/\s+/g," "),n.selection=n.selection.replace(/(^\s+|\s+$)/g,""),!n.selection){n.startTag="## ";n.selection=this.getString("headingexample");n.endTag=" ##";return}if(t=0,n.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(n.startTag)&&(t=r.lastMatch.length),n.startTag=n.endTag="",n.findTags(null,/\s?(-+|=+)/),/=+/.test(n.endTag)&&(t=1),/-+/.test(n.endTag)&&(t=2),n.startTag=n.endTag="",n.skipLines(1,1),u=t==0?2:t-1,u>0)for(f=u>=2?"-":"=",i=n.selection.length,i>s.lineLength&&(i=s.lineLength),n.endTag="\n";i--;)n.endTag+=f};i.doHorizontalRule=function(n){n.startTag="----------\n";n.selection="";n.skipLines(2,1,!0)}}(),function(){function i(n){return n.replace(/<[^>]*>?/gi,e)}function e(n){return n.match(r)||n.match(u)||n.match(f)?n:""}function o(n){var i,t;if(n=="")return"";var s=/<\/?\w+[^>]*(\s|$|>)/g,r=n.toLowerCase().match(s),f=(r||[]).length;if(f==0)return n;var e,h,u,o=[],c=[],l=!1;for(t=0;t<f;t++)if(e=r[t].replace(/<\/?(\w+).*/,"$1"),!o[t]&&!("<p><img><br><li><hr>".search("<"+e+">")>-1)){if(h=r[t],u=-1,!/^<\//.test(h))for(i=t+1;i<f;i++)if(!o[i]&&r[i]=="<\/"+e+">"){u=i;break}u==-1?l=c[t]=!0:o[u]=!0}return l?(t=0,n.replace(s,function(n){var i=c[t]?"":n;return t++,i})):n}var n,t;typeof exports=="object"&&typeof require=="function"?(n=exports,t=require("./Markdown.Converter").Converter):(n=window.Markdown,t=n.Converter);n.getSanitizingConverter=function(){var n=new t;return n.hooks.chain("postConversion",i),n.hooks.chain("postConversion",o),n};var r=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,u=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,f=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}();qq=function(n){"use strict";return{hide:function(){return n.style.display="none",this},attach:function(t,i){return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i),function(){qq(n).detach(t,i)}},detach:function(t,i){return n.removeEventListener?n.removeEventListener(t,i,!1):n.attachEvent&&n.detachEvent("on"+t,i),this},contains:function(t){return t?n===t?!0:n.contains?n.contains(t):!!(8&t.compareDocumentPosition(n)):!1},insertBefore:function(t){return t.parentNode.insertBefore(n,t),this},remove:function(){return n.parentNode.removeChild(n),this},css:function(t){if(null==n.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=t.opacity&&"string"!=typeof n.style.opacity&&"undefined"!=typeof n.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(n.style,t),this},hasClass:function(t){var i=new RegExp("(^| )"+t+"( |$)");return i.test(n.className)},addClass:function(t){return qq(n).hasClass(t)||(n.className+=" "+t),this},removeClass:function(t){var i=new RegExp("(^| )"+t+"( |$)");return n.className=n.className.replace(i," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var i,r=[];return n.querySelectorAll?n.querySelectorAll("."+t):(i=n.getElementsByTagName("*"),qq.each(i,function(n,i){qq(i).hasClass(t)&&r.push(i)}),r)},children:function(){for(var i=[],t=n.firstChild;t;)1===t.nodeType&&i.push(t),t=t.nextSibling;return i},setText:function(t){return n.innerText=t,n.textContent=t,this},clearText:function(){return qq(n).setText("")},hasAttribute:function(t){var i;return n.hasAttribute?n.hasAttribute(t)?null==/^false$/i.exec(n.getAttribute(t)):!1:(i=n[t],void 0===i?!1:null==/^false$/i.exec(i))}}};!function(){"use strict";qq.log=function(n,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](n):window.console.log("<"+t+"> "+n):window.console.log(n))};qq.isObject=function(n){return n&&!n.nodeType&&"[object Object]"===Object.prototype.toString.call(n)};qq.isFunction=function(n){return"function"==typeof n};qq.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)||n&&window.ArrayBuffer&&n.buffer&&n.buffer.constructor===ArrayBuffer};qq.isItemList=function(n){return"[object DataTransferItemList]"===Object.prototype.toString.call(n)};qq.isNodeList=function(n){return"[object NodeList]"===Object.prototype.toString.call(n)||n.item&&n.namedItem};qq.isString=function(n){return"[object String]"===Object.prototype.toString.call(n)};qq.trimStr=function(n){return String.prototype.trim?n.trim():n.replace(/^\s+|\s+$/g,"")};qq.format=function(n){var r=Array.prototype.slice.call(arguments,1),t=n,i=t.indexOf("{}");return qq.each(r,function(n,r){var u=t.substring(0,i),f=t.substring(i+2);return t=u+r+f,i=t.indexOf("{}",i+r.length),0>i?!1:void 0}),t};qq.isFile=function(n){return window.File&&"[object File]"===Object.prototype.toString.call(n)};qq.isFileList=function(n){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(n)};qq.isFileOrInput=function(n){return qq.isFile(n)||qq.isInput(n)};qq.isInput=function(n,t){var i=function(n){var i=n.toLowerCase();return t?"file"!==i:"file"===i};return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(n)&&n.type&&i(n.type)?!0:n.tagName&&"input"===n.tagName.toLowerCase()&&n.type&&i(n.type)?!0:!1};qq.isBlob=function(n){if(window.Blob&&"[object Blob]"===Object.prototype.toString.call(n))return!0};qq.isXhrUploadSupported=function(){var n=document.createElement("input");return n.type="file",void 0!==n.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof qq.createXhrInstance().upload};qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(n){return qq.log("Neither XHR or ActiveX are supported!","error"),null}};qq.isFolderDropSupported=function(n){return n.items&&n.items.length>0&&n.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};qq.sliceBlob=function(n,t,i){var r=n.slice||n.mozSlice||n.webkitSlice;return r.call(n,t,i)};qq.arrayBufferToHex=function(n){var t="",i=new Uint8Array(n);return qq.each(i,function(n,i){var r=i.toString(16);r.length<2&&(r="0"+r);t+=r}),t};qq.readBlobToHex=function(n,t,i){var f=qq.sliceBlob(n,t,t+i),r=new FileReader,u=new qq.Promise;return r.onload=function(){u.success(qq.arrayBufferToHex(r.result))},r.onerror=u.failure,r.readAsArrayBuffer(f),u};qq.extend=function(n,t,i){return qq.each(t,function(t,r){i&&qq.isObject(r)?(void 0===n[t]&&(n[t]={}),qq.extend(n[t],r,!0)):n[t]=r}),n};qq.override=function(n,t){var i={},r=t(i);return qq.each(r,function(t,r){void 0!==n[t]&&(i[t]=n[t]);n[t]=r}),n};qq.indexOf=function(n,t,i){if(n.indexOf)return n.indexOf(t,i);i=i||0;var r=n.length;for(0>i&&(i+=r);r>i;i+=1)if(n.hasOwnProperty(i)&&n[i]===t)return i;return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=0|16*Math.random(),i="x"==n?t:8|3&t;return i.toString(16)})};qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")};qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")};qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")};qq.ie11=function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("rv:11")};qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")};qq.firefox=function(){return!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};qq.windows=function(){return"Win32"===navigator.platform};qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0};qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")};qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")};qq.preventDefault=function(n){n.preventDefault?n.preventDefault():n.returnValue=!1};qq.toElement=function(){var n=document.createElement("div");return function(t){n.innerHTML=t;var i=n.firstChild;return n.removeChild(i),i}}();qq.each=function(n,t){var i,r;if(n)if(window.Storage&&n.constructor===window.Storage)for(i=0;i<n.length&&(r=t(n.key(i),n.getItem(n.key(i))),r!==!1);i++);else if(qq.isArray(n)||qq.isItemList(n)||qq.isNodeList(n))for(i=0;i<n.length&&(r=t(i,n[i]),r!==!1);i++);else if(qq.isString(n))for(i=0;i<n.length&&(r=t(i,n.charAt(i)),r!==!1);i++);else for(i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&(r=t(i,n[i]),r===!1))break};qq.bind=function(n,t){if(qq.isFunction(n)){var i=Array.prototype.slice.call(arguments,2);return function(){var r=qq.extend([],i);return arguments.length&&(r=r.concat(Array.prototype.slice.call(arguments))),n.apply(t,r)}}throw new Error("first parameter must be a function!");};qq.obj2url=function(n,t,i){var r=[],u="&",f=function(n,i){var u=t?/\[\]$/.test(t)?t:t+"["+i+"]":i;"undefined"!==u&&"undefined"!==i&&r.push("object"==typeof n?qq.obj2url(n,u,!0):"[object Function]"===Object.prototype.toString.call(n)?encodeURIComponent(u)+"="+encodeURIComponent(n()):encodeURIComponent(u)+"="+encodeURIComponent(n))};return!i&&t?(u=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",r.push(t),r.push(qq.obj2url(n))):"[object Array]"===Object.prototype.toString.call(n)&&"undefined"!=typeof n?qq.each(n,function(n,t){f(t,n)}):"undefined"!=typeof n&&null!==n&&"object"==typeof n?qq.each(n,function(n,t){f(t,n)}):r.push(encodeURIComponent(t)+"="+encodeURIComponent(n)),t?r.join(u):r.join(u).replace(/^&/,"").replace(/%20/g,"+")};qq.obj2FormData=function(n,t,i){return t||(t=new FormData),qq.each(n,function(n,r){n=i?i+"["+n+"]":n;qq.isObject(r)?qq.obj2FormData(r,t,n):qq.isFunction(r)?t.append(n,r()):t.append(n,r)}),t};qq.obj2Inputs=function(n,t){var i;return t||(t=document.createElement("form")),qq.obj2FormData(n,{append:function(n,r){i=document.createElement("input");i.setAttribute("name",n);i.setAttribute("value",r);t.appendChild(i)}}),t};qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")};qq.getExtension=function(n){var t=n.lastIndexOf(".")+1;if(t>0)return n.substr(t,n.length-t)};qq.getFilename=function(n){return qq.isInput(n)?n.value.replace(/.*(\/|\\)/,""):qq.isFile(n)&&null!==n.fileName&&void 0!==n.fileName?n.fileName:n.name};qq.DisposeSupport=function(){var n=[];return{dispose:function(){var t;do t=n.shift(),t&&t();while(t)},attach:function(){var n=arguments;this.addDisposer(qq(n[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){n.push(t)}}}}(),function(){"use strict";qq.Error=function(n){this.message="[Fine Uploader "+qq.version+"] "+n};qq.Error.prototype=new Error}();qq.version="5.0.0-15";qq.supportedFeatures=function(){"use strict";function w(){var n,t=!0;try{n=document.createElement("input");n.type="file";qq(n).hide();n.disabled&&(t=!1)}catch(i){t=!1}return t}function b(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}function k(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}function f(){if(window.XMLHttpRequest){var n=qq.createXhrInstance();return void 0!==n.withCredentials}return!1}function e(){return void 0!==window.XDomainRequest}function d(){return f()?!0:e()}function g(){return void 0!==document.createElement("input").webkitdirectory}var t,u,n,o,i,s,h,c,l,a,v,y,r,p;return t=w(),n=t&&qq.isXhrUploadSupported(),u=n&&!qq.androidStock(),o=n&&b(),i=n&&qq.isFileChunkingSupported(),s=n&&i&&!!window.localStorage,h=n&&k(),c=t&&(void 0!==window.postMessage||n),a=f(),l=e(),v=d(),y=g(),r=n&&void 0!==window.FileReader,p=function(){return n?!(qq.androidStock()||qq.ios()&&navigator.userAgent.indexOf("CriOS")>=0):!1}(),{ajaxUploading:n,blobUploading:u,canDetermineSize:n,chunking:i,deleteFileCors:v,deleteFileCorsXdr:l,deleteFileCorsXhr:a,fileDrop:n,folderDrop:o,folderSelection:y,imagePreviews:r,imageValidation:r,itemSizeValidation:n,pause:i,progressBar:p,resume:s,scaling:r&&u,tiffPreviews:qq.safari(),uploading:t,uploadCors:c,uploadCustomHeaders:n,uploadNonMultipart:n,uploadViaPaste:h}}();qq.isGenericPromise=function(n){"use strict";return!!(n&&n.then&&qq.isFunction(n.then))};qq.Promise=function(){"use strict";var t,n,u=[],f=[],i=[],r=0;qq.extend(this,{then:function(i,e){return 0===r?(i&&u.push(i),e&&f.push(e)):-1===r?e&&e.apply(null,n):i&&i.apply(null,t),this},done:function(u){return 0===r?i.push(u):u.apply(null,void 0===n?t:n),this},success:function(){return r=1,t=arguments,u.length&&qq.each(u,function(n,i){i.apply(null,t)}),i.length&&qq.each(i,function(n,i){i.apply(null,t)}),this},failure:function(){return r=-1,n=arguments,f.length&&qq.each(f,function(t,i){i.apply(null,n)}),i.length&&qq.each(i,function(t,i){i.apply(null,n)}),this}})};qq.BlobProxy=function(n,t){"use strict";qq.extend(this,{referenceBlob:n,create:function(){return t(n)}})};qq.UploadButton=function(n){"use strict";function f(){var n=document.createElement("input");return n.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,u),t.multiple&&n.setAttribute("multiple",""),t.folders&&qq.supportedFeatures.folderSelection&&n.setAttribute("webkitdirectory",""),t.acceptFiles&&n.setAttribute("accept",t.acceptFiles),n.setAttribute("type","file"),n.setAttribute("name",t.name),qq(n).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),t.element.appendChild(n),r.attach(n,"change",function(){t.onChange(n)}),r.attach(n,"mouseover",function(){qq(t.element).addClass(t.hoverClass)}),r.attach(n,"mouseout",function(){qq(t.element).removeClass(t.hoverClass)}),r.attach(n,"focus",function(){qq(t.element).addClass(t.focusClass)}),r.attach(n,"blur",function(){qq(t.element).removeClass(t.focusClass)}),window.attachEvent&&n.setAttribute("tabIndex","-1"),n}var i,u,r=new qq.DisposeSupport,t={element:null,multiple:!1,acceptFiles:null,folders:!1,name:"qqfile",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(t,n);u=qq.getUniqueId();qq(t.element).css({position:"relative",overflow:"hidden",direction:"ltr"});i=f();qq.extend(this,{getInput:function(){return i},getButtonId:function(){return u},setMultiple:function(n){n!==t.multiple&&(n?i.setAttribute("multiple",""):i.removeAttribute("multiple"))},setAcceptFiles:function(n){n!==t.acceptFiles&&i.setAttribute("accept",n)},reset:function(){i.parentNode&&qq(i).remove();qq(t.element).removeClass(t.focusClass);i=f()}})};qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";qq.UploadData=function(n){"use strict";function e(n){if(qq.isArray(n)){var i=[];return qq.each(n,function(n,r){i.push(t[r])}),i}return t[n]}function o(n){if(qq.isArray(n)){var i=[];return qq.each(n,function(n,u){i.push(t[r[u]])}),i}return t[r[n]]}function s(n){var r=[],u=[].concat(n);return qq.each(u,function(n,u){var f=i[u];void 0!==f&&qq.each(f,function(n,i){r.push(t[i])})}),r}var t=[],r={},i={},f={},u={};qq.extend(this,{addFile:function(e){var s=e.status||qq.status.SUBMITTING,o=t.push({name:e.name,originalName:e.name,uuid:e.uuid,size:e.size||-1,status:s})-1;return e.batchId&&(t[o].batchId=e.batchId,void 0===u[e.batchId]&&(u[e.batchId]=[]),u[e.batchId].push(o)),e.proxyGroupId&&(t[o].proxyGroupId=e.proxyGroupId,void 0===f[e.proxyGroupId]&&(f[e.proxyGroupId]=[]),f[e.proxyGroupId].push(o)),t[o].id=o,r[e.uuid]=o,void 0===i[s]&&(i[s]=[]),i[s].push(o),n.onStatusChange(o,null,s),o},retrieve:function(n){return qq.isObject(n)&&t.length?void 0!==n.id?e(n.id):void 0!==n.uuid?o(n.uuid):n.status?s(n.status):void 0:qq.extend([],t,!0)},reset:function(){t=[];r={};i={};u={}},setStatus:function(r,u){var f=t[r].status,e=qq.indexOf(i[f],r);i[f].splice(e,1);t[r].status=u;void 0===i[u]&&(i[u]=[]);i[u].push(r);n.onStatusChange(r,f,u)},uuidChanged:function(n,i){var u=t[n].uuid;t[n].uuid=i;r[i]=n;delete r[u]},updateName:function(n,i){t[n].name=i},updateSize:function(n,i){t[n].size=i},setParentId:function(n,i){t[n].parentId=i},getIdsInProxyGroup:function(n){var i=t[n].proxyGroupId;return i?f[i]:[]},getIdsInBatch:function(n){var i=t[n].batchId;return u[i]}})};qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={addBlobs:function(n,t,i){if(!qq.supportedFeatures.blobUploading)throw new qq.Error("Blob uploading is not supported in this browser!");if(n){var e=[].concat(n),u=[],f=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId,r=this;this._currentBatchId=f;qq.each(e,function(n,t){var i;qq.isBlob(t)&&!qq.isFileOrInput(t)?i={blob:t,name:r._options.blobs.defaultName}:qq.isObject(t)&&t.blob&&t.name?i=t:r.log("addBlobs: entry at index "+n+" is not a Blob or a BlobData object","error");i&&r._handleNewFile(i,f,u)});this._prepareItemsForUpload(u,t,i)}else this.log("undefined or non-array parameter passed into addBlobs","error")},addFiles:function(n,t,i){var u,r,f,e=[],o=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId;if(this._currentBatchId=o,n){for(qq.isFileList(n)||(n=[].concat(n)),u=0;u<n.length;u+=1)if(r=n[u],qq.isFileOrInput(r))if(qq.isInput(r)&&qq.supportedFeatures.ajaxUploading)for(f=0;f<r.files.length;f++)this._handleNewFile(r.files[f],o,e);else this._handleNewFile(r,o,e);else this.log(r+" is not a File or INPUT element!  Ignoring!","warn");this.log("Received "+e.length+" files or inputs.");this._prepareItemsForUpload(e,t,i)}},cancel:function(n){this._handler.cancel(n)},cancelAll:function(){var n=[],t=this;qq.extend(n,this._storedIds);qq.each(n,function(n,i){t.cancel(i)});this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(n){var t=this._uploadData.retrieve({id:n});return qq.supportedFeatures.pause&&this._options.chunking.enabled?t.status===qq.status.PAUSED?(this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",n,this.getName(n))),this._uploadFile(n),!0):(this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",n,this.getName(n)),"error"),!1):!1},deleteFile:function(n){return this._onSubmitDelete(n)},doesExist:function(n){return this._handler.isValid(n)},drawThumbnail:function(n,t,i,r){var u=new qq.Promise,f,e;return this._imageGenerator?(f=this._thumbnailUrls[n],e={scale:i>0,maxSize:i>0?i:null},!r&&qq.supportedFeatures.imagePreviews&&(f=this.getFile(n)),null==f?u.failure({container:t,error:"File or URL not found."}):this._imageGenerator.generate(f,t,e).then(function(n){u.success(n)},function(n,t){u.failure({container:n,error:t||"Problem generating thumbnail"})})):u.failure({container:t,error:"Missing image generator module"}),u},getButton:function(n){return this._getButton(this._buttonIdsForFileIds[n])},getFile:function(n){return this._handler.getFile(n)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(n){return this._uploadData.retrieve({id:n}).name},getParentId:function(n){var t=this.getUploads({id:n}),i=null;return t&&void 0!==t.parentId&&(i=t.parentId),i},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(n){return this._uploadData.retrieve({id:n}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var n=this._options.validation.itemLimit;return n>0?this._options.validation.itemLimit-this._netUploadedOrQueued:null},getUploads:function(n){return this._uploadData.retrieve(n)},getUuid:function(n){return this._uploadData.retrieve({id:n}).uuid},log:function(n,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[Fine Uploader "+qq.version+"] "+n,t):qq.log("[Fine Uploader "+qq.version+"] "+n)},pauseUpload:function(n){var t=this._uploadData.retrieve({id:n});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(n))return this._uploadData.setStatus(n,qq.status.PAUSED),!0;this.log(qq.format("Unable to pause file ID {} ({}).",n,this.getName(n)),"error")}else this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",n,this.getName(n)),"error");return!1},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];qq.each(this._buttons,function(n,t){t.reset()});this._paramsStore.reset();this._endpointStore.reset();this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._totalProgress&&this._totalProgress.reset()},retry:function(n){return this._manualRetry(n)},scaleImage:function(n,t){var i=this;return qq.Scaler.prototype.scaleImage(n,t,{log:qq.bind(i.log,i),getFile:qq.bind(i.getFile,i),uploadData:i._uploadData})},setCustomHeaders:function(n,t){this._customHeadersStore.set(n,t)},setDeleteFileCustomHeaders:function(n,t){this._deleteFileCustomHeadersStore.set(n,t)},setDeleteFileEndpoint:function(n,t){this._deleteFileEndpointStore.set(n,t)},setDeleteFileParams:function(n,t){this._deleteFileParamsStore.set(n,t)},setEndpoint:function(n,t){this._endpointStore.set(n,t)},setName:function(n,t){this._uploadData.updateName(n,t)},setParams:function(n,t){this._paramsStore.set(n,t)},setUuid:function(n,t){return this._uploadData.uuidChanged(n,t)},uploadStoredFiles:function(){var n;if(0===this._storedIds.length)this._itemError("noFilesError");else for(;this._storedIds.length;)n=this._storedIds.shift(),this._uploadFile(n)}};qq.basePrivateApi={_addCannedFile:function(n){var t=this._uploadData.addFile({uuid:n.uuid,name:n.name,size:n.size,status:qq.status.UPLOAD_SUCCESSFUL});return n.deleteFileEndpoint&&this.setDeleteFileEndpoint(n.deleteFileEndpoint,t),n.deleteFileParams&&this.setDeleteFileParams(n.deleteFileParams,t),n.thumbnailUrl&&(this._thumbnailUrls[t]=n.thumbnailUrl),this._netUploaded++,this._netUploadedOrQueued++,t},_annotateWithButtonId:function(n,t){qq.isFile(n)&&(n.qqButtonId=this._getButtonId(t))},_batchError:function(n){this._options.callbacks.onError(null,null,n,void 0)},_createDeleteHandler:function(){var n=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:qq.bind(n.log,n),onDelete:function(t){n._onDelete(t);n._options.callbacks.onDelete(t)},onDeleteComplete:function(t,i,r){n._onDeleteComplete(t,i,r);n._options.callbacks.onDeleteComplete(t,i,r)}})},_createPasteHandler:function(){var n=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(n.log,n),pasteReceived:function(t){n._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(n._options.callbacks.onPasteReceived,n,t),onSuccess:qq.bind(n._handlePasteSuccess,n,t),identifier:"pasted image"})}}})},_createStore:function(n,t){var i={},f=n,r={},u=function(n){return qq.isObject(n)?qq.extend({},n):n},e=function(){return qq.isFunction(t)?t():t},o=function(n,i){t&&qq.isObject(i)&&qq.extend(i,e());r[n]&&qq.extend(i,r[n])};return{set:function(n,t){null==t?(i={},f=u(n)):i[t]=u(n)},get:function(n){var t;return t=null!=n&&i[n]?i[n]:u(f),o(n,t),u(t)},addReadOnly:function(n,t){qq.isObject(i)&&(r[n]=r[n]||{},qq.extend(r[n],t))},remove:function(n){return delete i[n]},reset:function(){i={};r={};f=n}}},_createUploadDataTracker:function(){var n=this;return new qq.UploadData({getName:function(t){return n.getName(t)},getUuid:function(t){return n.getUuid(t)},getSize:function(t){return n.getSize(t)},onStatusChange:function(t,i,r){n._onUploadStatusChange(t,i,r);n._options.callbacks.onStatusChange(t,i,r);n._maybeAllComplete(t,r);n._totalProgress&&setTimeout(function(){n._totalProgress.onStatusChange(t,i,r)},0)}})},_createUploadButton:function(n){function r(){return qq.supportedFeatures.ajaxUploading?qq.ios7()&&t._isAllowedExtension(f,".mov")?!1:void 0===n.multiple?t._options.multiple:n.multiple:!1}var t=this,u=n.accept||this._options.validation.acceptFiles,f=n.allowedExtensions||this._options.validation.allowedExtensions,i=new qq.UploadButton({element:n.element,folders:n.folders,name:this._options.request.inputName,multiple:r(),acceptFiles:u,onChange:function(n){t._onInputChange(n)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){i.dispose()}),t._buttons.push(i),i},_createUploadHandler:function(n,t){var i=this,r={},u={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(i.log,i),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(n,t,u,f){r[n]?(r[n].loaded!==u||r[n].total!==f)&&(i._onProgress(n,t,u,f),i._options.callbacks.onProgress(n,t,u,f)):(i._onProgress(n,t,u,f),i._options.callbacks.onProgress(n,t,u,f));r[n]={loaded:u,total:f}},onComplete:function(n,t,u,f){var e,o;delete r[n];e=i.getUploads({id:n}).status;e!==qq.status.UPLOAD_SUCCESSFUL&&e!==qq.status.UPLOAD_FAILED&&(o=i._onComplete(n,t,u,f),o instanceof qq.Promise?o.done(function(){i._options.callbacks.onComplete(n,t,u,f)}):i._options.callbacks.onComplete(n,t,u,f))},onCancel:function(n,t,r){var u=new qq.Promise;return i._handleCheckedCallback({name:"onCancel",callback:qq.bind(i._options.callbacks.onCancel,i,n,t),onFailure:u.failure,onSuccess:function(){r.then(function(){i._onCancel(n,t)});u.success()},identifier:n}),u},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(n,t){i._onUpload(n,t);i._options.callbacks.onUpload(n,t)},onUploadChunk:function(n,t,r){i._onUploadChunk(n,r);i._options.callbacks.onUploadChunk(n,t,r)},onUploadChunkSuccess:function(){i._options.callbacks.onUploadChunkSuccess.apply(i,arguments)},onResume:function(n,t,r){return i._options.callbacks.onResume(n,t,r)},onAutoRetry:function(){return i._onAutoRetry.apply(i,arguments)},onUuidChanged:function(n,t){i.log("Server requested UUID change from '"+i.getUuid(n)+"' to '"+t+"'");i.setUuid(n,t)},getName:qq.bind(i.getName,i),getUuid:qq.bind(i.getUuid,i),getSize:qq.bind(i.getSize,i),setSize:qq.bind(i._setSize,i),getDataByUuid:function(n){return i.getUploads({uuid:n})},isQueued:function(n){var t=i.getUploads({id:n}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:i._uploadData.getIdsInProxyGroup,getIdsInBatch:i._uploadData.getIdsInBatch};return qq.each(this._options.request,function(n,t){u[n]=t}),u.customHeaders=this._customHeadersStore,n&&qq.each(n,function(n,t){u[n]=t}),new qq.UploadHandlerController(u,t)},_fileOrBlobRejected:function(n){this._netUploadedOrQueued--;this._uploadData.setStatus(n,qq.status.REJECTED)},_formatSize:function(n){var t=-1;do n/=1e3,t++;while(n>999);return Math.max(n,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var n=this;this._extraButtonSpecs={};qq.each(this._options.extraButtons,function(t,i){var r=i.multiple,f=qq.extend({},n._options.validation,!0),u=qq.extend({},i);void 0===r&&(r=n._options.multiple);u.validation&&qq.extend(f,i.validation,!0);qq.extend(u,{multiple:r,validation:f},!0);n._initExtraButton(u)})},_getButton:function(n){var t=this._extraButtonSpecs[n];return t?t.element:n===this._defaultButtonId?this._options.button:void 0},_getButtonId:function(n){var r,i,t=n;if(t instanceof qq.BlobProxy&&(t=t.referenceBlob),t&&!qq.isBlob(t)){if(qq.isFile(t))return t.qqButtonId;if("input"===t.tagName.toLowerCase()&&"file"===t.type.toLowerCase())return t.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(r=t.getElementsByTagName("input"),qq.each(r,function(n,t){if("file"===t.getAttribute("type"))return(i=t,!1)}),i)return i.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(n){var t=this._extraButtonSpecs[n];return t?t.validation:this._options.validation},_getValidationDescriptor:function(n){return n.file instanceof qq.BlobProxy?{name:qq.getFilename(n.file.referenceBlob),size:n.file.referenceBlob.size}:{name:this.getUploads({id:n.id}).name,size:this.getUploads({id:n.id}).size}},_getValidationDescriptors:function(n){var i=this,t=[];return qq.each(n,function(n,r){t.push(i._getValidationDescriptor(r))}),t},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var i="image/*;capture=camera",r=this._options.camera.button,t=r?this._getButtonId(r):this._defaultButtonId,n=this._options;t&&t!==this._defaultButtonId&&(n=this._extraButtonSpecs[t]);n.multiple=!1;null===n.validation.acceptFiles?n.validation.acceptFiles=i:n.validation.acceptFiles+=","+i;qq.each(this._buttons,function(i,r){if(r.getButtonId()===t)return(r.setMultiple(n.multiple),r.setAcceptFiles(n.acceptFiles),!1)})}},_handleCheckedCallback:function(n){var i=this,t=n.callback();return qq.isGenericPromise(t)?(this.log(n.name+" - waiting for "+n.name+" promise to be fulfilled for "+n.identifier),t.then(function(t){i.log(n.name+" promise success for "+n.identifier);n.onSuccess(t)},function(){n.onFailure?(i.log(n.name+" promise failure for "+n.identifier),n.onFailure()):i.log(n.name+" promise failure for "+n.identifier)})):(t!==!1?n.onSuccess(t):n.onFailure?(this.log(n.name+" - return value was 'false' for "+n.identifier+".  Invoking failure callback."),n.onFailure()):this.log(n.name+" - return value was 'false' for "+n.identifier+".  Will not proceed."),t)},_handleNewFile:function(n,t,i){var r=this,e=qq.getUniqueId(),f=-1,o=qq.getFilename(n),u=n.blob||n,s=this._customNewFileHandler?this._customNewFileHandler:qq.bind(r._handleNewFileGeneric,r);!qq.isInput(u)&&u.size>=0&&(f=u.size);s(u,o,e,f,i,t,this._options.request.uuidName,{uploadData:r._uploadData,paramsStore:r._paramsStore,addFileToHandler:function(n,t){r._handler.add(n,t);r._netUploadedOrQueued++;r._trackButton(n)}})},_handleNewFileGeneric:function(n,t,i,r,u,f){var e=this._uploadData.addFile({uuid:i,name:t,size:r,batchId:f});this._handler.add(e,n);this._trackButton(e);this._netUploadedOrQueued++;u.push({id:e,file:n})},_handlePasteSuccess:function(n,t){var r=n.type.split("/")[1],i=t;null==i&&(i=this._options.paste.defaultName);i+="."+r;this.addBlobs({name:i,blob:n})},_initExtraButton:function(n){var t=this._createUploadButton({element:n.element,multiple:n.multiple,accept:n.validation.acceptFiles,folders:n.folders,allowedExtensions:n.validation.allowedExtensions});this._extraButtonSpecs[t.getButtonId()]=n},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return qq.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?qq.supportedFeatures.deleteFileCorsXhr?!0:qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr?!0:!1:!0:!1},_isAllowedExtension:function(n,t){var i=!1;return n.length?(qq.each(n,function(n,r){if(qq.isString(r)){var u=new RegExp("\\."+r+"$","i");if(null!=t.match(u))return i=!0,!1}}),i):!0},_itemError:function(n,t,i){function r(n,t){u=u.replace(n,t)}var o,f,u=this._options.messages[n],s=[],h=[].concat(t),c=h[0],l=this._getButtonId(i),e=this._getValidationBase(l);return qq.each(e.allowedExtensions,function(n,t){qq.isString(t)&&s.push(t)}),o=s.join(", ").toLowerCase(),r("{file}",this._options.formatFileName(c)),r("{extensions}",o),r("{sizeLimit}",this._formatSize(e.sizeLimit)),r("{minSizeLimit}",this._formatSize(e.minSizeLimit)),f=u.match(/(\{\w+\})/g),null!==f&&qq.each(f,function(n,t){r(t,h[n])}),this._options.callbacks.onError(null,c,u,void 0),u},_manualRetry:function(n,t){if(this._onBeforeManualRetry(n))return(this._netUploadedOrQueued++,this._uploadData.setStatus(n,qq.status.UPLOAD_RETRYING),t?t(n):this._handler.retry(n),!0)},_maybeAllComplete:function(n,t){var i=this,r=this._getNotFinished();t===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(n):t===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(n);0===r&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){i._onAllComplete(i._succeededSinceLastAllComplete,i._failedSinceLastAllComplete)},0)},_maybeParseAndSendUploadError:function(n,t,i,r){if(!i.success)if(r&&200!==r.status&&!i.error)this._options.callbacks.onError(n,t,"XHR returned response code "+r.status,r);else{var u=i.error?i.error:this._options.text.defaultResponseError;this._options.callbacks.onError(n,t,u,r)}},_maybeProcessNextItemAfterOnValidateCallback:function(n,t,i,r,u){var f=this;if(t.length>i)if(n||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var n=f._getValidationDescriptor(t[i]);f._handleCheckedCallback({name:"onValidate",callback:qq.bind(f._options.callbacks.onValidate,f,t[i].file),onSuccess:qq.bind(f._onValidateCallbackSuccess,f,t,i,r,u),onFailure:qq.bind(f._onValidateCallbackFailure,f,t,i,r,u),identifier:"Item '"+n.name+"', size: "+n.size})},0);else if(!n)for(;i<t.length;i++)f._fileOrBlobRejected(t[i].id)},_onAllComplete:function(n,t){this._totalProgress&&this._totalProgress.onAllComplete(n,t,this._preventRetries);this._options.callbacks.onAllComplete(qq.extend([],n),qq.extend([],t));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onAutoRetry:function(n,t,i,r,u){var f=this;return f._preventRetries[n]=i[f._options.retry.preventRetryResponseProperty],f._shouldAutoRetry(n,t,i)?(f._maybeParseAndSendUploadError.apply(f,arguments),f._options.callbacks.onAutoRetry(n,t,f._autoRetries[n]),f._onBeforeAutoRetry(n,t),f._retryTimeouts[n]=setTimeout(function(){f.log("Retrying "+t+"...");f._uploadData.setStatus(n,qq.status.UPLOAD_RETRYING);u?u(n):f._handler.retry(n)},1e3*f._options.retry.autoAttemptDelay),!0):void 0},_onBeforeAutoRetry:function(n,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(n){var i=this._options.validation.itemLimit,t;return this._preventRetries[n]?(this.log("Retries are forbidden for id "+n,"warn"),!1):this._handler.isValid(n)?(t=this.getName(n),this._options.callbacks.onManualRetry(n,t)===!1?!1:i>0&&this._netUploadedOrQueued+1>i?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+t+"' (id: "+n+")..."),!0)):(this.log("'"+n+"' is not a valid file ID","error"),!1)},_onCancel:function(n){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[n]);var t=qq.indexOf(this._storedIds,n);!this._options.autoUpload&&t>=0&&this._storedIds.splice(t,1);this._uploadData.setStatus(n,qq.status.CANCELED)},_onComplete:function(n,t,i,r){return i.success?(i.thumbnailUrl&&(this._thumbnailUrls[n]=i.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(n,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(n,qq.status.UPLOAD_FAILED),i[this._options.retry.preventRetryResponseProperty]===!0&&(this._preventRetries[n]=!0)),this._maybeParseAndSendUploadError(n,t,i,r),i.success?!0:!1},_onDelete:function(n){this._uploadData.setStatus(n,qq.status.DELETING)},_onDeleteComplete:function(n,t,i){var r=this.getName(n);i?(this._uploadData.setStatus(n,qq.status.DELETE_FAILED),this.log("Delete request for '"+r+"' has failed.","error"),void 0===t.withCredentials?this._options.callbacks.onError(n,r,"Delete request failed",t):this._options.callbacks.onError(n,r,"Delete request failed with response code "+t.status,t)):(this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(n),this._uploadData.setStatus(n,qq.status.DELETED),this.log("Delete request for '"+r+"' has succeeded."))},_onInputChange:function(n){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<n.files.length;t++)this._annotateWithButtonId(n.files[t],n);this.addFiles(n.files)}else n.value.length>0&&this.addFiles(n);qq.each(this._buttons,function(n,t){t.reset()})},_onProgress:function(n,t,i,r){this._totalProgress&&this._totalProgress.onIndividualProgress(n,i,r)},_onSubmit:function(){},_onSubmitCallbackSuccess:function(n){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(n,qq.status.SUBMITTED);this._onSubmitted.apply(this,arguments);this._options.callbacks.onSubmitted.apply(this,arguments);this._options.autoUpload?this._uploadFile(n):this._storeForLater(n)},_onSubmitDelete:function(n,t,i){var r,u=this.getUuid(n);return t&&(r=qq.bind(t,this,n,u,i)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,n),onSuccess:r||qq.bind(this._deleteHandler.sendDelete,this,n,u,i),identifier:n}),!0):(this.log("Delete request ignored for ID "+n+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onSubmitted:function(){},_onTotalProgress:function(n,t){this._options.callbacks.onTotalProgress(n,t)},_onUploadPrep:function(){},_onUpload:function(n){this._uploadData.setStatus(n,qq.status.UPLOADING)},_onUploadChunk:function(){},_onUploadStatusChange:function(n,t,i){i===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[n])},_onValidateBatchCallbackFailure:function(n){var t=this;qq.each(n,function(n,i){t._fileOrBlobRejected(i.id)})},_onValidateBatchCallbackSuccess:function(n,t,i,r,u){var e,f=this._options.validation.itemLimit,o=this._netUploadedOrQueued;0===f||f>=o?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,n[0],u),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,i,r),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,i,r),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(t),e=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,o).replace(/\{itemLimit\}/g,f),this._batchError(e))},_onValidateCallbackFailure:function(n,t,i,r){var u=t+1;this._fileOrBlobRejected(n[0].id,n[0].file.name);this._maybeProcessNextItemAfterOnValidateCallback(!1,n,u,i,r)},_onValidateCallbackSuccess:function(n,t,i,r){var u=this,f=t+1,e=this._getValidationDescriptor(n[t]);this._validateFileOrBlobData(n[t],e).then(function(){u._upload(n[t].id,i,r);u._maybeProcessNextItemAfterOnValidateCallback(!0,n,f,i,r)},function(){u._maybeProcessNextItemAfterOnValidateCallback(!1,n,f,i,r)})},_prepareItemsForUpload:function(n,t,i){if(0===n.length)return this._itemError("noFilesError"),void 0;var r=this._getValidationDescriptors(n),f=this._getButtonId(n[0].file),u=this._getButton(f);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,r,u),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,r,n,t,i,u),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,n),identifier:"batch validation"})},_preventLeaveInProgress:function(){var n=this;this._disposeSupport.attach(window,"beforeunload",function(t){if(n.getInProgress())return(t=t||window.event,t.returnValue=n._options.messages.onLeave,n._options.messages.onLeave)})},_refreshSessionData:function(){var t=this,n=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(n,this._options.cors),n.log=qq.bind(this.log,this),n.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(n)),setTimeout(function(){t._session.refresh().then(function(n,i){t._options.callbacks.onSessionRequestComplete(n,!0,i)},function(n,i){t._options.callbacks.onSessionRequestComplete(n,!1,i)})},0))},_setSize:function(n,t){this._uploadData.updateSize(n,t);this._totalProgress&&this._totalProgress.onNewSize(n)},_shouldAutoRetry:function(n){var t=this._uploadData.retrieve({id:n});return!this._preventRetries[n]&&this._options.retry.enableAuto&&t.status!==qq.status.PAUSED&&(void 0===this._autoRetries[n]&&(this._autoRetries[n]=0),this._autoRetries[n]<this._options.retry.maxAutoAttempts)?(this._autoRetries[n]+=1,!0):!1},_storeForLater:function(n){this._storedIds.push(n)},_trackButton:function(n){var t;t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(n).qqButtonId:this._getButtonId(this._handler.getInput(n));t&&(this._buttonIdsForFileIds[n]=t)},_upload:function(n,t,i){var r=this.getName(n);t&&this.setParams(t,n);i&&this.setEndpoint(i,n);this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,n,r),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,n,r),onFailure:qq.bind(this._fileOrBlobRejected,this,n,r),identifier:n})},_uploadFile:function(n){this._handler.upload(n)||this._uploadData.setStatus(n,qq.status.QUEUED)},_validateFileOrBlobData:function(n,t){var o=this,r=function(){return n.file instanceof qq.BlobProxy?n.file.referenceBlob:n.file}(),u=t.name,f=t.size,s=this._getButtonId(n.file),e=this._getValidationBase(s),i=new qq.Promise;return i.then(function(){},function(){o._fileOrBlobRejected(n.id,u)}),qq.isFileOrInput(r)&&!this._isAllowedExtension(e.allowedExtensions,u)?(this._itemError("typeError",u,r),i.failure()):0===f?(this._itemError("emptyError",u,r),i.failure()):f>0&&e.sizeLimit&&f>e.sizeLimit?(this._itemError("sizeError",u,r),i.failure()):f>0&&f<e.minSizeLimit?(this._itemError("minSizeError",u,r),i.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(r)?new qq.ImageValidation(r,qq.bind(o.log,o)).validate(e.image).then(i.success,function(n){o._itemError(n+"ImageError",u,r);i.failure()}):i.success(),i)},_wrapCallbacks:function(){var n,t,i;n=this;t=function(t,i,r){var u;try{return i.apply(n,r)}catch(f){u=f.message||f.toString();n.log("Caught exception in '"+t+"' callback - "+u,"error")}};for(i in this._options.callbacks)!function(){var r,u;r=i;u=n._options.callbacks[r];n._options.callbacks[r]=function(){return t(r,u,arguments)}}()}}}(),function(){"use strict";qq.FineUploaderBasic=function(n){var t=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onAllComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onResume:function(){},onProgress:function(){},onTotalProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){},onStatusChange:function(){},onSessionRequestComplete:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2e6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(n){return void 0!==n&&n.length>33&&(n=n.slice(0,19)+"..."+n.slice(-14)),n},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]}};qq.extend(this._options,n,!0);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler();this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId());this._generateExtraButtonSpecs();this._handleCameraAccess();this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found","error"));this._preventLeaveInProgress();this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{};this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler));qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(n){var i=t._uploadData.retrieve({id:n});return i&&i.size||0}))};qq.FineUploaderBasic.prototype=qq.basePublicApi;qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}();qq.AjaxRequester=function(n){"use strict";function l(){return qq.indexOf(["GET","POST","HEAD"],t.method)>=0}function a(){var n=!1;return qq.each(n,function(t,i){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],i)<0)return(n=!0,!1)}),n}function f(n){return t.cors.expected&&void 0===n.withCredentials}function v(){var n;return(window.XMLHttpRequest||window.ActiveXObject)&&(n=qq.createXhrInstance(),void 0===n.withCredentials&&(n=new XDomainRequest)),n}function r(n,r){var u=i[n].xhr;return u||(u=r?r:t.cors.expected?v():qq.createXhrInstance(),i[n].xhr=u),u}function h(n){var f,e=qq.indexOf(u,n),r=t.maxConnections;delete i[n];u.splice(e,1);u.length>=r&&r>e&&(f=u[r-1],c(f))}function o(n,i){var u=r(n),s=t.method,o=i===!0;h(n);o?e(s+" request for "+n+" has failed","error"):f(u)||nt(u.status)||(o=!0,e(s+" request for "+n+" has failed - response code "+u.status,"error"));t.onComplete(n,u,o)}function y(n){var r,u=i[n].additionalParams,f=t.mandatedParams;return t.paramsStore.get&&(r=t.paramsStore.get(n)),u&&qq.each(u,function(n,t){r=r||{};r[n]=t}),f&&qq.each(f,function(n,t){r=r||{};r[n]=t}),r}function c(n,u){var c,o=r(n,u),l=t.method,h=y(n),a=i[n].payload;return t.onSend(n),c=p(n,h),f(o)?(o.onload=k(n),o.onerror=d(n)):o.onreadystatechange=w(n),b(n),o.open(l,c,!0),t.cors.expected&&t.cors.sendCredentials&&!f(o)&&(o.withCredentials=!0),g(n),e("Sending "+l+" request for "+n),a?o.send(a):s||!h?o.send():h&&t.contentType&&t.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?o.send(qq.obj2url(h,"")):h&&t.contentType&&t.contentType.toLowerCase().indexOf("application/json")>=0?o.send(JSON.stringify(h)):o.send(h),o}function p(n,r){var u=t.endpointStore.get(n),f=i[n].addToPath;return void 0!=f&&(u+="/"+f),s&&r?qq.obj2url(r,u):u}function w(n){return function(){4===r(n).readyState&&o(n)}}function b(n){var i=t.onProgress;i&&(r(n).upload.onprogress=function(t){t.lengthComputable&&i(n,t.loaded,t.total)})}function k(n){return function(){o(n)}}function d(n){return function(){o(n,!0)}}function g(n){var u=r(n),e=t.customHeaders,h=i[n].additionalHeaders||{},s=t.method,o={};f(u)||(t.acceptHeader&&u.setRequestHeader("Accept",t.acceptHeader),t.allowXRequestedWithAndCacheControl&&(t.cors.expected&&l()&&!a(e)||(u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Cache-Control","no-cache"))),!t.contentType||"POST"!==s&&"PUT"!==s||u.setRequestHeader("Content-Type",t.contentType),qq.extend(o,qq.isFunction(e)?e(n):e),qq.extend(o,h),qq.each(o,function(n,t){u.setRequestHeader(n,t)}))}function nt(n){return qq.indexOf(t.successfulResponseCodes[t.method],n)>=0}function tt(n,r,f,e,o,s){i[n]={addToPath:f,additionalParams:e,additionalHeaders:o,payload:s};var h=u.push(n);if(h<=t.maxConnections)return c(n,r)}var e,s,u=[],i={},t={acceptHeader:null,validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onProgress:null};if(qq.extend(t,n),e=t.log,qq.indexOf(t.validMethods,t.method)<0)throw new Error("'"+t.method+"' is not a supported method for this type of request!");s="GET"===t.method||"DELETE"===t.method;qq.extend(this,{initTransport:function(n){var r,i,u,f,e;return{withPath:function(n){return r=n,this},withParams:function(n){return i=n,this},withHeaders:function(n){return u=n,this},withPayload:function(n){return f=n,this},withCacheBuster:function(){return e=!0,this},send:function(o){return e&&qq.indexOf(["GET","DELETE"],t.method)>=0&&(i.qqtimestamp=(new Date).getTime()),tt(n,o,r,i,u,f)}}},canceled:function(n){h(n)}})};qq.UploadHandler=function(n){"use strict";var i=n.proxy,t={},r=i.onCancel,u=i.getName;qq.extend(this,{add:function(n,i){t[n]=i;t[n].temp={}},cancel:function(n){var i=this,f=new qq.Promise,e=r(n,u(n),f);e.then(function(){i.isValid(n)&&(t[n].canceled=!0,i.expunge(n));f.success()})},expunge:function(n){delete t[n]},getThirdPartyFileId:function(n){return t[n].key},isValid:function(n){return void 0!==t[n]},reset:function(){t={}},_getFileState:function(n){return t[n]},_setThirdPartyFileId:function(n,i){t[n].key=i},_wasCanceled:function(n){return!!t[n].canceled}})};qq.UploadHandlerController=function(n,t){"use strict";var l,e,i,s=this,c=!1,h=!1,r={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUploadPrep:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onAutoRetry:function(){},onResume:function(){},onUuidChanged:function(){},getName:function(){},setSize:function(){},isQueued:function(){},getIdsInProxyGroup:function(){},getIdsInBatch:function(){}},o={done:function(n,t,u,f){var e=i._getChunkData(n,t);i._getFileState(n).attemptingResume=!1;delete i._getFileState(n).temp.chunkProgress[t];i._getFileState(n).loaded+=e.size;r.onUploadChunkSuccess(n,i._getChunkDataForCallback(e),u,f)},finalize:function(n){var t=r.getSize(n),u=r.getName(n);e("All chunks have been uploaded for "+n+" - finalizing....");i.finalizeChunks(n).then(function(e){var o=f.normalizeResponse({},!0);r.onProgress(n,u,t,t);i._maybeDeletePersistedChunkData(n);f.cleanup(n,o,e)},function(t,i){var s=f.normalizeResponse(t,!1);e("Problem finalizing chunks for file ID "+n+" - "+s.error,"error");s.reset&&o.reset(n);r.onAutoRetry(n,u,s,i)||f.cleanup(n,s,i)})},hasMoreParts:function(n){return!!i._getFileState(n).chunking.remaining.length},nextPart:function(n){var t=i._getFileState(n).chunking.remaining.shift();return t>=i._getTotalChunks(n)&&(t=null),t},reset:function(n){e("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+n,"error");i._maybeDeletePersistedChunkData(n);i.reevaluateChunking(n);i._getFileState(n).loaded=0},sendNext:function(n){var v=r.getSize(n),c=r.getName(n),t=o.nextPart(n),s=i._getChunkData(n,t),l=i._getFileState(n).attemptingResume,a=i._getFileState(n).chunking.inProgress||[];null==i._getFileState(n).loaded&&(i._getFileState(n).loaded=0);l&&r.onResume(n,c,s)===!1&&(o.reset(n),t=o.nextPart(n),s=i._getChunkData(n,t),l=!1);null==t&&0===a.length?o.finalize(n):(e("Sending chunked upload request for item "+n+": bytes "+(s.start+1)+"-"+s.end+" of "+v),r.onUploadChunk(n,c,i._getChunkDataForCallback(s)),a.push(t),i._getFileState(n).chunking.inProgress=a,h&&u.open(n,t),h&&u.available()&&i._getFileState(n).chunking.remaining.length&&o.sendNext(n),i.uploadChunk(n,t,l).then(function(r,u){e("Chunked upload request succeeded for "+n+", chunk "+t);i.clearCachedChunk(n,t);var s=i._getFileState(n).chunking.inProgress||[],c=f.normalizeResponse(r,!0),h=qq.indexOf(s,t);e(qq.format("Chunk {} for file {} uploaded successfully.",t,n));o.done(n,t,c,u);h>=0&&s.splice(h,1);i._maybePersistChunkedState(n);o.hasMoreParts(n)||0!==s.length?o.hasMoreParts(n)&&o.sendNext(n):o.finalize(n)},function(s,l){var a,v;e("Chunked upload request failed for "+n+", chunk "+t);i.clearCachedChunk(n,t);a=f.normalizeResponse(s,!1);a.reset?o.reset(n):(v=qq.indexOf(i._getFileState(n).chunking.inProgress,t),v>=0&&(i._getFileState(n).chunking.inProgress.splice(v,1),i._getFileState(n).chunking.remaining.unshift(t)));i._getFileState(n).temp.ignoreFailure||(h&&(i._getFileState(n).temp.ignoreFailure=!0,qq.each(i._getXhrs(n),function(n,t){t.abort()}),i.moveInProgressToRemaining(n),u.free(n,!0)),r.onAutoRetry(n,c,a,l)||f.cleanup(n,a,l))}).done(function(){i.clearXhr(n,t)}))}},u={_open:[],_openChunks:{},_waiting:[],available:function(){var i=r.maxConnections,n=0,t=0;return qq.each(u._openChunks,function(i,r){n++;t+=r.length}),i-(u._open.length-n+t)},free:function(n,t){var r,h=!t,o=qq.indexOf(u._waiting,n),s=qq.indexOf(u._open,n);delete u._openChunks[n];f.getProxyOrBlob(n)instanceof qq.BlobProxy&&(e("Generated blob upload has ended for "+n+", disposing generated blob."),delete i._getFileState(n).file);o>=0?u._waiting.splice(o,1):h&&s>=0&&(u._open.splice(s,1),r=u._waiting.shift(),r>=0&&(u._open.push(r),f.start(r)))},getWaitingOrConnected:function(){var n=[];return qq.each(n,u._open),qq.each(n,u._waiting)},isUsingConnection:function(n){return qq.indexOf(u._open,n)>=0},open:function(n,t){return null==t&&u._waiting.push(n),u.available()?(null==t?(u._waiting.pop(),u._open.push(n)):!function(){var i=u._openChunks[n]||[];i.push(t);u._openChunks[n]=i}(),!0):!1},reset:function(){u._waiting=[];u._open=[]}},a={send:function(n,t){i._getFileState(n).loaded=0;e("Sending simple upload request for "+n);i.uploadFile(n).then(function(i,u){e("Simple upload request succeeded for "+n);var o=f.normalizeResponse(i,!0),s=r.getSize(n);r.onProgress(n,t,s,s);f.maybeNewUuid(n,o);f.cleanup(n,o,u)},function(i,u){e("Simple upload request failed for "+n);var o=f.normalizeResponse(i,!1);r.onAutoRetry(n,t,o,u)||f.cleanup(n,o,u)})}},f={cancel:function(n){e("Cancelling "+n);r.paramsStore.remove(n);u.free(n)},cleanup:function(n,t,f){var e=r.getName(n);r.onComplete(n,e,t,f);i._getFileState(n)&&i._clearXhrs&&i._clearXhrs(n);u.free(n)},getProxyOrBlob:function(n){return i.getProxy&&i.getProxy(n)||i.getFile&&i.getFile(n)},initHandler:function(){var n=t?qq[t]:qq.traditional,u=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";i=new n[u+"UploadHandler"](r,{getDataByUuid:r.getDataByUuid,getName:r.getName,getSize:r.getSize,getUuid:r.getUuid,log:e,onCancel:r.onCancel,onProgress:r.onProgress,onUuidChanged:r.onUuidChanged});i._removeExpiredChunkingRecords&&i._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(n){return r.isQueued(n)},maybeDefer:function(n,t){return t&&!i.getFile(n)&&t instanceof qq.BlobProxy?(r.onUploadPrep(n),e("Attempting to generate a blob on-demand for "+n),t.create().then(function(t){e("Generated an on-demand blob for "+n);i.updateBlob(n,t);r.setSize(n,t.size);i.reevaluateChunking(n);f.maybeSendDeferredFiles(n)},function(t){var i={};t&&(i.error=t);e(qq.format("Failed to generate blob for ID {}.  Error message: {}.",n,t),"error");r.onComplete(n,r.getName(n),qq.extend(i,l),null);f.maybeSendDeferredFiles(n);u.free(n)}),!1):f.maybeSendDeferredFiles(n)},maybeSendDeferredFiles:function(n){var t=r.getIdsInProxyGroup(n),u=!1;return t&&t.length?(e("Maybe ready to upload proxy group file "+n),qq.each(t,function(t,r){if(f.isDeferredEligibleForUpload(r)&&i.getFile(r))u=r===n,f.now(r);else if(f.isDeferredEligibleForUpload(r))return!1})):(u=!0,f.now(n)),u},maybeNewUuid:function(n,t){void 0!==t.newUuid&&r.onUuidChanged(n,t.newUuid)},normalizeResponse:function(n,t){var i=n;return qq.isObject(n)||(i={},qq.isString(n)&&!t&&(i.error=n)),i.success=t,i},now:function(n){var t=r.getName(n);if(!s.isValid(n))throw new qq.Error(n+" is not a valid file ID to upload!");r.onUpload(n,t);c&&i._shouldChunkThisFile(n)?o.sendNext(n):a.send(n,t)},start:function(n){var t=f.getProxyOrBlob(n);return t?f.maybeDefer(n,t):(f.now(n),!0)}};qq.extend(this,{add:function(){i.add.apply(this,arguments)},upload:function(n){return u.open(n)?f.start(n):!1},retry:function(n){return h&&(i._getFileState(n).temp.ignoreFailure=!1),u.isUsingConnection(n)?f.start(n):s.upload(n)},cancel:function(n){var t=i.cancel(n);qq.isGenericPromise(t)?t.then(function(){f.cancel(n)}):t!==!1&&f.cancel(n)},cancelAll:function(){var n=u.getWaitingOrConnected();qq.each(n,function(n,t){s.cancel(t)});u.reset()},getFile:function(n){return i.getProxy&&i.getProxy(n)?i.getProxy(n).referenceBlob:i.getFile&&i.getFile(n)},isProxied:function(n){return!(!i.getProxy||!i.getProxy(n))},getInput:function(n){if(i.getInput)return i.getInput(n)},reset:function(){e("Resetting upload handler");s.cancelAll();u.reset();i.reset()},expunge:function(n){if(s.isValid(n))return i.expunge(n)},isValid:function(n){return i.isValid(n)},getResumableFilesData:function(){return i.getResumableFilesData?i.getResumableFilesData():[]},getThirdPartyFileId:function(n){if(s.isValid(n))return i.getThirdPartyFileId(n)},pause:function(n){return s.isResumable(n)&&i.pause&&s.isValid(n)&&i.pause(n)?(u.free(n),i.moveInProgressToRemaining(n),!0):!1},isResumable:function(n){return!!i.isResumable&&i.isResumable(n)}});qq.extend(r,n);e=r.log;c=r.chunking.enabled&&qq.supportedFeatures.chunking;h=c&&r.chunking.concurrent.enabled;l=function(){var n={};return n[r.preventRetryParam]=!0,n}();f.initHandler()};qq.FormUploadHandler=function(n){"use strict";function l(n){delete r[n];c&&(clearTimeout(u[n]),delete u[n],e.stopReceivingMessages(n));var t=document.getElementById(i._getIframeName(n));t&&(t.setAttribute("src","javascript:false;"),qq(t).remove())}function o(n){return n.split("_")[0]}function a(n){var t=qq.toElement("<iframe src='javascript:false;' name='"+n+"' />");return t.setAttribute("id",n),t.style.display="none",document.body.appendChild(t),t}function v(n,s){var h=n.id,c=o(h),l=w(c);f[l]=s;r[c]=qq(n).attach("load",function(){i.getInput(c)&&(t("Received iframe load event for CORS upload request (iframe name "+h+")"),u[h]=setTimeout(function(){var n="No valid message received from loaded iframe for iframe name "+h;t(n,"error");s({error:n})},1e3))});e.receiveMessage(h,function(n){t("Received the following window message: '"+n+"'");var s,l=o(h),c=i._parseJsonResponse(l,n),r=c.uuid;r&&f[r]?(t("Handling response for iframe name "+h),clearTimeout(u[h]),delete u[h],i._detachLoadEvent(h),s=f[r],delete f[r],e.stopReceivingMessages(h),s(c)):r||t("'"+n+"' does not contain a UUID - ignoring.")})}var s=n.options,i=this,h=n.proxy,y=qq.getUniqueId(),f={},r={},u={},c=s.isCors,p=s.inputName,w=h.getUuid,t=h.log,e=new qq.WindowReceiveMessage({log:t});qq.extend(this,new qq.UploadHandler(n));qq.override(this,function(n){return{add:function(t,i){n.add(t,{input:i});i.setAttribute("name",p);i.parentNode&&qq(i).remove()},expunge:function(t){l(t);n.expunge(t)},isValid:function(t){return n.isValid(t)&&void 0!==i._getFileState(t).input}}});qq.extend(this,{_attachLoadEvent:function(n,i){var u;c?v(n,i):r[n.id]=qq(n).attach("load",function(){if(t("Received response for "+n.id),n.parentNode){try{if(n.contentDocument&&n.contentDocument.body&&"false"==n.contentDocument.body.innerHTML)return}catch(r){t("Error when attempting to access iframe during handling of upload response ("+r.message+")","error");u={success:!1}}i(u)}})},_createIframe:function(n){var t=i._getIframeName(n);return a(t)},_detachLoadEvent:function(n){void 0!==r[n]&&(r[n](),delete r[n])},_getIframeName:function(n){return n+"_"+y},getInput:function(n){return i._getFileState(n).input},_initFormForUpload:function(n){var f=n.method,i=n.endpoint,r=n.params,e=n.paramsInBody,o=n.targetName,t=qq.toElement("<form method='"+f+"' enctype='multipart/form-data'><\/form>"),u=i;return e?qq.obj2Inputs(r,t):u=qq.obj2url(r,i),t.setAttribute("action",u),t.setAttribute("target",o),t.style.display="none",document.body.appendChild(t),t}})};qq.XhrUploadHandler=function(n){"use strict";function h(n){qq.each(t._getXhrs(n),function(i,r){var u=t._getAjaxRequester(n,i);r.onreadystatechange=null;r.upload.onprogress=null;r.abort();u&&u.canceled&&u.canceled(n)})}var t=this,c=n.options.namespace,i=n.proxy,r=n.options.chunking,l=n.options.resume,a=r&&n.options.chunking.enabled&&qq.supportedFeatures.chunking,f=l&&n.options.resume.enabled&&a&&qq.supportedFeatures.resume,e=i.getName,u=i.getSize,v=i.getUuid,y=i.getEndpoint,p=i.getDataByUuid,w=i.onUuidChanged,o=i.onProgress,s=i.log;qq.extend(this,new qq.UploadHandler(n));qq.override(this,function(n){return{add:function(i,r){if(qq.isFile(r)||qq.isBlob(r))n.add(i,{file:r});else{if(!(r instanceof qq.BlobProxy))throw new Error("Passed obj is not a File, Blob, or proxy");n.add(i,{proxy:r})}t._initTempState(i);f&&t._maybePrepareForResume(i)},expunge:function(i){h(i);t._maybeDeletePersistedChunkData(i);t._clearXhrs(i);n.expunge(i)}}});qq.extend(this,{clearCachedChunk:function(n,i){delete t._getFileState(n).temp.cachedChunks[i]},clearXhr:function(n,i){var r=t._getFileState(n).temp;r.xhrs&&delete r.xhrs[i];r.ajaxRequesters&&delete r.ajaxRequesters[i]},finalizeChunks:function(n){return(new qq.Promise).success(t._getXhr(n))},getFile:function(n){return t.isValid(n)&&t._getFileState(n).file},getProxy:function(n){return t.isValid(n)&&t._getFileState(n).proxy},getResumableFilesData:function(){var n=[];return t._iterateResumeRecords(function(i,r){t.moveInProgressToRemaining(null,r.chunking.inProgress,r.chunking.remaining);var u={name:r.name,remaining:r.chunking.remaining,size:r.size,uuid:r.uuid};r.key&&(u.key=r.key);n.push(u)}),n},isResumable:function(n){return!!r&&t.isValid(n)&&!t._getFileState(n).notResumable},moveInProgressToRemaining:function(n,i,r){var u=i||t._getFileState(n).chunking.inProgress,f=r||t._getFileState(n).chunking.remaining;u&&(u.reverse(),qq.each(u,function(n,t){f.unshift(t)}),u.length=0)},pause:function(n){if(t.isValid(n))return(s(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",n,e(n))),t._getFileState(n).paused=!0,h(n),!0)},reevaluateChunking:function(n){var u,i,f;if(r&&t.isValid(n))if(i=t._getFileState(n),delete i.chunking,i.chunking={},u=t._getTotalChunks(n),u>1){for(i.chunking.enabled=!0,i.chunking.parts=u,i.chunking.remaining=[],f=0;u>f;f++)i.chunking.remaining.push(f);t._initTempState(n)}else i.chunking.enabled=!1},updateBlob:function(n,i){t.isValid(n)&&(t._getFileState(n).file=i)},_clearXhrs:function(n){var i=t._getFileState(n).temp;qq.each(i.ajaxRequesters,function(n){delete i.ajaxRequesters[n]});qq.each(i.xhrs,function(n){delete i.xhrs[n]})},_createXhr:function(n,i){return t._registerXhr(n,i,qq.createXhrInstance())},_getAjaxRequester:function(n,i){var r=null==i?-1:i;return t._getFileState(n).temp.ajaxRequesters[r]},_getChunkData:function(n,i){var e=r.partSize,s=u(n),l=t.getFile(n),f=e*i,o=f+e>=s?s:f+e,a=t._getTotalChunks(n),h=this._getFileState(n).temp.cachedChunks,c=h[i]||qq.sliceBlob(l,f,o);return h[i]=c,{part:i,start:f,end:o,count:a,blob:c,size:o-f}},_getChunkDataForCallback:function(n){return{partIndex:n.part,startByte:n.start+1,endByte:n.end,totalParts:n.count}},_getLocalStorageId:function(n){var t=e(n),i=u(n),f=r.partSize,o=y(n);return qq.format("qq{}resume{}-{}-{}-{}-{}",c,"5.0",t,i,f,o)},_getMimeType:function(n){return t.getFile(n).type},_getPersistableData:function(n){return t._getFileState(n).chunking},_getTotalChunks:function(n){if(r){var t=u(n),i=r.partSize;return Math.ceil(t/i)}},_getXhr:function(n,i){var r=null==i?-1:i;return t._getFileState(n).temp.xhrs[r]},_getXhrs:function(n){return t._getFileState(n).temp.xhrs},_iterateResumeRecords:function(n){f&&qq.each(localStorage,function(t,i){if(0===t.indexOf(qq.format("qq{}resume-",c))){var r=JSON.parse(i);n(t,r)}})},_initTempState:function(n){t._getFileState(n).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(n){t._getFileState(n).notResumable=!0},_maybeDeletePersistedChunkData:function(n){var i;return f&&t.isResumable(n)&&(i=t._getLocalStorageId(n),i&&localStorage.getItem(i))?(localStorage.removeItem(i),!0):!1},_maybePrepareForResume:function(n){var u,i,r=t._getFileState(n);f&&void 0===r.key&&(u=t._getLocalStorageId(n),i=localStorage.getItem(u),i&&(i=JSON.parse(i),p(i.uuid)?t._markNotResumable(n):(s(qq.format("Identified file with ID {} and name of {} as resumable.",n,e(n))),w(n,i.uuid),r.key=i.key,r.chunking=i.chunking,r.loaded=i.loaded,r.attemptingResume=!0,t.moveInProgressToRemaining(n))))},_maybePersistChunkedState:function(n){var r,o,i=t._getFileState(n);f&&t.isResumable(n)&&(r=t._getLocalStorageId(n),o={name:e(n),size:u(n),uuid:v(n),key:i.key,chunking:i.chunking,loaded:i.loaded,lastUpdated:Date.now()},localStorage.setItem(r,JSON.stringify(o)))},_registerProgressHandler:function(n,i,r){var f=t._getXhr(n,i),e={simple:function(t,i){var r=u(n);t===i?o(n,name,r,r):o(n,name,t>=r?r-1:t,r)},chunked:function(f,e){var s=t._getFileState(n).temp.chunkProgress,c=t._getFileState(n).loaded,l=f,a=e,v=u(n),y=l-(a-r),h=c;s[i]=y;qq.each(s,function(n,t){h+=t});o(n,name,h,v)}};f.upload.onprogress=function(n){if(n.lengthComputable){var t=null==r?"simple":"chunked";e[t](n.loaded,n.total)}}},_registerXhr:function(n,i,r,u){var e=null==i?-1:i,f=t._getFileState(n).temp;return f.xhrs=f.xhrs||{},f.ajaxRequesters=f.ajaxRequesters||{},f.xhrs[e]=r,u&&(f.ajaxRequesters[e]=u),r},_removeExpiredChunkingRecords:function(){var n=l.recordsExpireIn;t._iterateResumeRecords(function(t,i){var r=new Date(i.lastUpdated);r.setDate(r.getDate()+n);r.getTime()<=Date.now()&&(s("Removing expired resume record with key "+t),localStorage.removeItem(t))})},_shouldChunkThisFile:function(n){var i=t._getFileState(n);return i.chunking||t.reevaluateChunking(n),i.chunking.enabled}})};qq.WindowReceiveMessage=function(n){"use strict";var i={log:function(){}},t={};qq.extend(i,n);qq.extend(this,{receiveMessage:function(n,i){var r=function(n){i(n.data)};window.postMessage?t[n]=qq(window).attach("message",r):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(n){if(window.postMessage){var i=t[n];i&&i()}}})},function(){"use strict";qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},addExtraDropzone:function(n){this._dnd&&this._dnd.setupExtraDropzone(n)},removeExtraDropzone:function(n){if(this._dnd)return this._dnd.removeDropzone(n)},getItemByFileId:function(n){return this._templating.getFileContainer(n)},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId());this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop());this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0;this._setupClickAndEditEventHandlers()},setName:function(n,t){var i=this._options.formatFileName(t);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(n,i)},pauseUpload:function(n){var t=this._parent.prototype.pauseUpload.apply(this,arguments);return t&&this._templating.uploadPaused(n),t},continueUpload:function(n){var t=this._parent.prototype.continueUpload.apply(this,arguments);return t&&this._templating.uploadContinued(n),t},getId:function(n){return this._templating.getFileId(n)},getDropTarget:function(n){var t=this.getFile(n);return t.qqDropTarget}};qq.uiPrivateApi={_getButton:function(n){var t=this._parent.prototype._getButton.apply(this,arguments);return t||n===this._defaultButtonId&&(t=this._templating.getButton()),t},_removeFileItem:function(n){this._templating.removeFile(n)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent();this._focusinEventSupported=!qq.firefox();this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var n=this,i=this._options.dragAndDrop.extraDropzones,t=this._templating,r=t.getDropZone();return r&&i.push(r),new qq.DragAndDrop({dropZoneElements:i,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){t.showDropProcessing()},processingDroppedFilesComplete:function(i,r){t.hideDropProcessing();qq.each(i,function(n,t){t.qqDropTarget=r});i.length&&n.addFiles(i,null,null)},dropError:function(t,i){n._itemError(t,i)},dropLog:function(t,i){n.log(t,i)}}})},_bindFileButtonsClickEvent:function(){var n=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(t,i){n.log(t,i)},onDeleteFile:function(t){n.deleteFile(t)},onCancel:function(t){n.cancel(t)},onRetry:function(t){qq(n._templating.getFileContainer(t)).removeClass(n._classes.retryable);n._templating.hideRetry(t);n.retry(t)},onPause:function(t){n.pauseUpload(t)},onContinue:function(t){n.continueUpload(t)},onGetName:function(t){return n.getName(t)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var t=this,n=this._templating;return{templating:n,log:function(n,i){t.log(n,i)},onGetUploadStatus:function(n){return t.getUploads({id:n}).status},onGetName:function(n){return t.getName(n)},onSetName:function(n,i){t.setName(n,i)},onEditingStatusChange:function(t,i){var r=qq(n.getEditInput(t)),u=qq(n.getFileContainer(t));i?(r.addClass("qq-editing"),n.hideFilename(t),n.hideEditIcon(t)):(r.removeClass("qq-editing"),n.showFilename(t),n.showEditIcon(t));u.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(n,t,i){this._parent.prototype._onUploadStatusChange.apply(this,arguments);this._isEditFilenameEnabled()&&this._templating.getFileContainer(n)&&i!==qq.status.SUBMITTED&&(this._templating.markFilenameEditable(n),this._templating.hideEditIcon(n))},_bindFilenameInputFocusInEvent:function(){var n=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(n)},_bindFilenameInputFocusEvent:function(){var n=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(n)},_bindFilenameClickEvent:function(){var n=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(n)},_storeForLater:function(n){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(n)},_onAllComplete:function(){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(n,t){var i=this.getFile(n);i&&i.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(n,{qqpath:i.qqPath});this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(n,t)},_onSubmitted:function(n){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(n),this._templating.showEditIcon(n),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(n)))},_onProgress:function(n,t,i,r){this._parent.prototype._onProgress.apply(this,arguments);this._templating.updateProgress(n,i,r);100===Math.round(100*(i/r))?(this._templating.hideCancel(n),this._templating.hidePause(n),this._templating.hideProgress(n),this._templating.setStatusText(n,this._options.text.waitingForResponse),this._displayFileSize(n)):this._displayFileSize(n,i,r)},_onTotalProgress:function(n,t){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(n,t)},_onComplete:function(n,t,i){function o(t){f&&(r.setStatusText(n),qq(f).removeClass(u._classes.retrying),r.hideProgress(n),(!u._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&r.hideCancel(n),r.hideSpinner(n),t.success?u._markFileAsSuccessful(n):(qq(f).addClass(u._classes.fail),r.isRetryPossible()&&!u._preventRetries[n]&&(qq(f).addClass(u._classes.retryable),r.showRetry(n)),u._controlFailureTextDisplay(n,t)))}var e=this._parent.prototype._onComplete.apply(this,arguments),r=this._templating,f=r.getFileContainer(n),u=this;return e instanceof qq.Promise?e.done(function(n){o(n)}):o(i),e},_markFileAsSuccessful:function(n){var t=this._templating;this._isDeletePossible()&&t.showDeleteButton(n);qq(t.getFileContainer(n)).addClass(this._classes.success);this._maybeUpdateThumbnail(n)},_onUploadPrep:function(n){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(n)},_onUpload:function(n){var t=this._parent.prototype._onUpload.apply(this,arguments);return this._templating.showSpinner(n),t},_onUploadChunk:function(n,t){this._parent.prototype._onUploadChunk.apply(this,arguments);t.partIndex>0&&this._handler.isResumable(n)&&this._templating.allowPause(n)},_onCancel:function(n){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(n);0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(n){var i,r,t;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(n);this._options.retry.showAutoRetryNote&&(i=this._autoRetries[n],r=this._options.retry.maxAutoAttempts,t=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,i),t=t.replace(/\{maxAuto\}/g,r),this._templating.setStatusText(n,t),qq(this._templating.getFileContainer(n)).addClass(this._classes.retrying))},_onBeforeManualRetry:function(n){return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._templating.resetProgress(n),qq(this._templating.getFileContainer(n)).removeClass(this._classes.fail),this._templating.setStatusText(n),this._templating.showSpinner(n),this._showCancelLink(n),!0):(qq(this._templating.getFileContainer(n)).addClass(this._classes.retryable),this._templating.showRetry(n),!1)},_onSubmitDelete:function(n){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,n,t)},_onSubmitDeleteSuccess:function(){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(n,t,i){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(n);i?(this._templating.setStatusText(n,this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(n)):this._removeFileItem(n)},_sendDeleteRequest:function(n){this._templating.hideDeleteButton(n);this._templating.showSpinner(n);this._templating.setStatusText(n,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(n){var t,u=this.getName(n),f=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,u),r=(this.getUuid(n),arguments),i=this;t=this._options.showConfirm(f);qq.isGenericPromise(t)?t.then(function(){i._sendDeleteRequest.apply(i,r)}):t!==!1&&i._sendDeleteRequest.apply(i,r)},_addToList:function(n,t,i){var r,u=0,f=this._handler.isProxied(n)&&this._options.scaling.hideScaled;f||(this._options.display.prependFiles&&(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(u=this._filesInBatchAddedToUi-1),r={index:u}),i||(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),this._options.multiple||(this._handler.cancelAll(),this._clearList())),this._templating.addFile(n,this._options.formatFileName(t),r),i?this._thumbnailUrls[n]&&this._templating.updateThumbnail(n,this._thumbnailUrls[n],!0):this._templating.generatePreview(n,this.getFile(n)),this._filesInBatchAddedToUi+=1,(i||this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading)&&this._displayFileSize(n))},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(n,t,i){var r=this.getSize(n),u=this._formatSize(r);r>=0&&(void 0!==t&&void 0!==i&&(u=this._formatProgress(t,i)),this._templating.updateSize(n,u))},_formatProgress:function(n,t){function r(n,t){i=i.replace(n,t)}var i=this._options.text.formatProgress;return r("{percent}",Math.round(100*(n/t))),r("{total_size}",this._formatSize(t)),i},_controlFailureTextDisplay:function(n,t){var r,u,f,i,e;r=this._options.failedUploadTextDisplay.mode;u=this._options.failedUploadTextDisplay.maxChars;f=this._options.failedUploadTextDisplay.responseProperty;"custom"===r?(i=t[f],i?i.length>u&&(e=i.substring(0,u)+"..."):i=this._options.text.failUpload,this._templating.setStatusText(n,e||i),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(n,i)):"default"===r?this._templating.setStatusText(n,this._options.text.failUpload):"none"!==r&&this.log("failedUploadTextDisplay.mode value of '"+r+"' is not valid","warn")},_showTooltip:function(n,t){this._templating.getFileContainer(n).title=t},_showCancelLink:function(n){(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&this._templating.showCancel(n)},_itemError:function(){var n=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(n)},_batchError:function(n){this._parent.prototype._batchError.apply(this,arguments);this._options.showMessage(n)},_setupPastePrompt:function(){var n=this;this._options.callbacks.onPasteReceived=function(){var t=n._options.paste.namePromptMessage,i=n._options.paste.defaultName;return n._options.showPrompt(t,i)}},_fileOrBlobRejected:function(){this._totalFilesInBatch-=1;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(n){this._totalFilesInBatch=n.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(n){var t=this._thumbnailUrls[n];this._templating.updateThumbnail(n,t)},_addCannedFile:function(){var n=this._parent.prototype._addCannedFile.apply(this,arguments);return this._addToList(n,this.getName(n),!0),this._templating.hideSpinner(n),this._templating.hideCancel(n),this._markFileAsSuccessful(n),n},_setSize:function(n,t){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(n,this._formatSize(t))}}}();qq.FineUploader=function(n,t){"use strict";this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic;this._parent.apply(this,arguments);qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{placeholders:{waitUntilResponse:!1,notAvailablePath:null,waitingPath:null}},scaling:{hideScaled:!1},showMessage:function(n){setTimeout(function(){window.alert(n)},0)},showConfirm:function(n){return window.confirm(n)},showPrompt:function(n,t){return window.prompt(n,t)}},!0);qq.extend(this._options,n,!0);this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()),this._setupClickAndEditEventHandlers(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(qq.PasteSupport?this._setupPastePrompt():this.log("Paste support module not found.","error")),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)};qq.extend(qq.FineUploader.prototype,qq.basePublicApi);qq.extend(qq.FineUploader.prototype,qq.basePrivateApi);qq.extend(qq.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi);qq.Templating=function(n){"use strict";function bt(){var s,f,e,n,v,c,u,r,l;if(o("Parsing template"),null==i.templateIdOrEl)throw new Error("You MUST specify either a template element or ID!");if(qq.isString(i.templateIdOrEl)){if(s=document.getElementById(i.templateIdOrEl),null===s)throw new Error(qq.format("Cannot find template script at ID '{}'!",i.templateIdOrEl));f=s.innerHTML}else{if(void 0===i.templateIdOrEl.innerHTML)throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");f=i.templateIdOrEl.innerHTML}if(f=qq.trimStr(f),n=document.createElement("div"),n.appendChild(qq.toElement(f)),i.button&&(c=qq(n).getByClass(t.button)[0],c&&qq(c).remove()),qq.DragAndDrop&&qq.supportedFeatures.fileDrop||(l=qq(n).getByClass(t.dropProcessing)[0],l&&qq(l).remove()),u=qq(n).getByClass(t.drop)[0],u&&!qq.DragAndDrop&&(o("DnD module unavailable.","info"),qq(u).remove()),u&&!qq.supportedFeatures.fileDrop&&qq(u).hasAttribute(ri)&&qq(u).css({display:"none"}),r=qq(n).getByClass(t.thumbnail)[0],a?r&&(h=parseInt(r.getAttribute(ti)),h=h>0?h:null,et=qq(r).hasAttribute(ii)):r&&qq(r).remove(),a=a&&r,yt=qq(n).getByClass(t.editFilenameInput).length>0,pt=qq(n).getByClass(t.retry).length>0,e=qq(n).getByClass(t.list)[0],null==e)throw new Error("Could not find the file list container in the template!");return v=e.innerHTML,e.innerHTML="",o("Template parsing complete"),{template:qq.trimStr(n.innerHTML),fileTemplate:qq.trimStr(v)}}function f(n){return qq(l).getByClass(wt+n)[0]}function r(n,t){return n&&qq(n).getByClass(t)[0]}function kt(n,t){var i=l,r=i.firstChild;t>0&&(r=qq(i).children()[t].nextSibling);i.insertBefore(n,r)}function ht(n){return r(f(n),t.cancel)}function y(n){return r(f(n),t.pause)}function nt(n){return r(f(n),t.continueButton)}function p(n){return null==n?r(s,t.totalProgressBarContainer)||r(s,t.totalProgressBar):r(f(n),t.progressBarContainer)||r(f(n),t.progressBar)}function w(n){return r(f(n),t.spinner)}function ct(n){return r(f(n),t.editNameIcon)}function lt(n){return r(f(n),t.size)}function tt(n){return r(f(n),t.deleteButton)}function it(n){return r(f(n),t.retry)}function b(n){return r(f(n),t.file)}function rt(){return r(s,t.dropProcessing)}function v(n){return a&&r(f(n),t.thumbnail)}function u(n){n&&qq(n).addClass(i.classes.hide)}function e(n){n&&qq(n).removeClass(i.classes.hide)}function at(n,i){var r=p(n),u=null==n?t.totalProgressBar:t.progressBar;r&&!qq(r).hasClass(u)&&(r=qq(r).getByClass(u)[0]);r&&qq(r).css({width:i+"%"})}function dt(){var n=i.placeholders.thumbnailNotAvailable,t=i.placeholders.waitingForThumbnail,r={maxSize:h,scale:et};a&&(n?i.imageGenerator.generate(n,new Image,r).then(function(n){d.success(n)},function(){d.failure();o("Problem loading 'not available' placeholder image at "+n,"error")}):d.failure(),t?i.imageGenerator.generate(t,new Image,r).then(function(n){g.success(n)},function(){g.failure();o("Problem loading 'waiting for thumbnail' placeholder image at "+t,"error")}):g.failure())}function ut(n){var t=new qq.Promise;return g.then(function(i){vt(i,n);n.src?t.success():(n.src=i.src,n.onload=function(){e(n);t.success()})},function(){u(n);t.success()}),t}function k(n,t){var r=c[n]||(new qq.Promise).failure(),i=new qq.Promise;return d.then(function(n){r.then(function(){i.success()},function(){vt(n,t);t.onload=function(){i.success()};t.src=n.src;e(t)})}),i}function vt(n,t){var i=n.style.maxWidth,r=n.style.maxHeight;r&&i&&!t.style.maxWidth&&!t.style.maxHeight&&qq(t).css({maxWidth:i,maxHeight:r})}function gt(n,t){var r=v(n),u=v(t);o(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",n,t,t));c[t].then(function(){c[n].success();o(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",t,n));r.src=u.src;e(r)},function(){c[n].failure();i.placeholders.waitUntilUpdate||k(n,r)})}function ni(n,t,r){var u=v(n);return o("Generating new thumbnail for "+n),t.qqThumbnailId=n,i.imageGenerator.generate(t,u,r).then(function(){e(u);c[n].success()},function(){c[n].failure();i.placeholders.waitUntilUpdate||k(n,u)})}var o,yt,pt,ft,s,l,a,et,ot="qq-file-id",wt="qq-file-id-",ti="qq-max-size",ii="qq-server-scale",ri="qq-hide-dropzone",st=!1,h=-1,i={log:null,templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},t={button:"qq-upload-button-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},c={},d=new qq.Promise,g=new qq.Promise;qq.extend(i,n);o=i.log;s=i.containerEl;a=void 0!==i.imageGenerator;ft=bt();dt();qq.extend(this,{render:function(){o("Rendering template in DOM.");s.innerHTML=ft.template;u(rt());this.hideTotalProgress();l=i.fileContainerEl||r(s,t.list);o("Template rendering complete")},renderFailure:function(n){var t=qq.toElement(n);s.innerHTML="";s.appendChild(t)},reset:function(){this.render()},clearFiles:function(){l.innerHTML=""},disableCancel:function(){st=!0},addFile:function(n,i,f){var e=qq.toElement(ft.fileTemplate),o=r(e,t.file);qq(e).addClass(wt+n);o&&qq(o).setText(i);e.setAttribute(ot,n);f?kt(e,f.index):l.appendChild(e);u(p(n));u(lt(n));u(tt(n));u(it(n));u(y(n));u(nt(n));st&&this.hideCancel(n)},removeFile:function(n){qq(f(n)).remove()},getFileId:function(n){var t=n;if(t){for(;null==t.getAttribute(ot);)t=t.parentNode;return parseInt(t.getAttribute(ot))}},getFileList:function(){return l},markFilenameEditable:function(n){var t=b(n);t&&qq(t).addClass(i.classes.editable)},updateFilename:function(n,t){var i=b(n);i&&qq(i).setText(t)},hideFilename:function(n){u(b(n))},showFilename:function(n){e(b(n))},isFileName:function(n){return qq(n).hasClass(t.file)},getButton:function(){return i.button||r(s,t.button)},hideDropProcessing:function(){u(rt())},showDropProcessing:function(){e(rt())},getDropZone:function(){return r(s,t.drop)},isEditFilenamePossible:function(){return yt},hideRetry:function(n){u(it(n))},isRetryPossible:function(){return pt},showRetry:function(n){e(it(n))},getFileContainer:function(n){return f(n)},showEditIcon:function(n){var t=ct(n);t&&qq(t).addClass(i.classes.editable)},hideEditIcon:function(n){var t=ct(n);t&&qq(t).removeClass(i.classes.editable)},isEditIcon:function(n){return qq(n).hasClass(t.editNameIcon)},getEditInput:function(n){return r(f(n),t.editFilenameInput)},isEditInput:function(n){return qq(n).hasClass(t.editFilenameInput)},updateProgress:function(n,t,i){var r,f=p(n);f&&(r=Math.round(100*(t/i)),100===r?u(f):e(f),at(n,r))},updateTotalProgress:function(n,t){this.updateProgress(null,n,t)},hideProgress:function(n){var t=p(n);t&&u(t)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(n){at(n,0)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(n){if(!st){var t=ht(n);t&&qq(t).removeClass(i.classes.hide)}},hideCancel:function(n){u(ht(n))},isCancel:function(n){return qq(n).hasClass(t.cancel)},allowPause:function(n){e(y(n));u(nt(n))},uploadPaused:function(n){this.setStatusText(n,i.text.paused);this.allowContinueButton(n);u(w(n))},hidePause:function(n){u(y(n))},isPause:function(n){return qq(n).hasClass(t.pause)},isContinueButton:function(n){return qq(n).hasClass(t.continueButton)},allowContinueButton:function(n){e(nt(n));u(y(n))},uploadContinued:function(n){this.setStatusText(n,"");this.allowPause(n);e(w(n))},showDeleteButton:function(n){e(tt(n))},hideDeleteButton:function(n){u(tt(n))},isDeleteButton:function(n){return qq(n).hasClass(t.deleteButton)},isRetry:function(n){return qq(n).hasClass(t.retry)},updateSize:function(n,t){var i=lt(n);i&&(e(i),qq(i).setText(t))},setStatusText:function(n,i){var u=r(f(n),t.statusText);u&&(null==i?qq(u).clearText():qq(u).setText(i))},hideSpinner:function(n){u(w(n))},showSpinner:function(n){e(w(n))},generatePreview:function(n,t){var r=t&&t.qqThumbnailId,i=v(n),u={maxSize:h,scale:!0,orient:!0};qq.supportedFeatures.imagePreviews?i&&ut(i).done(function(){c[n]=new qq.Promise;null!=r?gt(n,r):ni(n,t,u)}):i&&ut(i)},updateThumbnail:function(n,t,r){var u=v(n),f={maxSize:h,scale:et};if(u){if(t)return r&&ut(u),i.imageGenerator.generate(t,u,f).then(function(){e(u)},function(){k(n,u)});k(n,u)}}})};qq.traditional=qq.traditional||{};qq.traditional.FormUploadHandler=function(n,t){"use strict";function e(n){var t={};try{t=qq.parseJson(n)}catch(r){i("Error when attempting to parse iframe upload response ("+r.message+")","error")}return t}function o(n,t){var u,f,r;try{f=t.contentDocument||t.contentWindow.document;r=f.body.innerHTML;i("converting iframe's innerHTML to JSON");i("innerHTML = "+r);r&&r.match(/^<pre/i)&&(r=f.body.firstChild.firstChild.nodeValue);u=e(r)}catch(o){i("Error when attempting to parse form upload response ("+o.message+")","error");u={success:!1}}return u}function s(t,i){var e=n.paramsStore.get(t),o=n.demoMode?"GET":"POST",s=n.endpointStore.get(t),h=u(t);return e[n.uuidName]=f(t),e[n.filenameParam]=h,r._initFormForUpload({method:o,endpoint:s,params:e,paramsInBody:n.paramsInBody,targetName:i.name})}var r=this,u=t.getName,f=t.getUuid,i=t.log;this.uploadFile=function(t){var u,h=r.getInput(t),f=r._createIframe(t),e=new qq.Promise;return u=s(t,f),u.appendChild(h),r._attachLoadEvent(f,function(u){i("iframe loaded");var s=u?u:o(t,f);r._detachLoadEvent(t);n.cors.expected||qq(f).remove();s.success?e.success(s):e.failure(s)}),i("Sending upload request for "+t),u.submit(),qq(u).remove(),e};qq.extend(this,new qq.FormUploadHandler({options:{isCors:n.cors.expected,inputName:n.inputName},proxy:{onCancel:n.onCancel,getName:u,getUuid:f,log:i}}))};qq.traditional=qq.traditional||{};qq.traditional.XhrUploadHandler=function(n,t){"use strict";var i=this,e=t.getName,f=t.getSize,s=t.getUuid,r=t.log,u=n.forceMultipart||n.paramsInBody,a=function(t,i,r){var o=f(t),s=e(t);i[n.chunking.paramNames.partIndex]=r.part;i[n.chunking.paramNames.partByteOffset]=r.start;i[n.chunking.paramNames.chunkSize]=r.size;i[n.chunking.paramNames.totalParts]=r.count;i[n.totalFileSizeName]=o;u&&(i[n.filenameParam]=s)},v=new qq.traditional.AllChunksDoneAjaxRequester({cors:n.cors,endpoint:n.chunking.success.endpoint,log:r}),h=function(n,t){var i=new qq.Promise;return t.onreadystatechange=function(){if(4===t.readyState){var r=w(n,t);r.success?i.success(r.response,t):i.failure(r.response,t)}},i},y=function(t){var r=n.paramsStore.get(t),u=e(t),o=f(t);return r[n.uuidName]=s(t),r[n.filenameParam]=u,r[n.totalFileSizeName]=o,r[n.chunking.paramNames.totalParts]=i._getTotalChunks(t),r},p=function(n,t){return 200!==n.status||!t.success||t.reset},w=function(n,t){var i;return r("xhr - server response received for "+n),r("responseText = "+t.responseText),i=o(t,!0),{success:!p(t,i),response:i}},o=function(n,t){var i={};try{r(qq.format("Received response status {} with body: {}",n.status,n.responseText));i=qq.parseJson(n.responseText)}catch(u){t&&r("Error when attempting to parse xhr response text ("+u.message+")","error")}return i},b=function(t){var r=new qq.Promise;return v.complete(t,i._createXhr(t),y(t),n.customHeaders.get(t)).then(function(n){r.success(o(n),n)},function(n){r.failure(o(n),n)}),r},c=function(t,i,r,o){var h=new FormData,a=n.demoMode?"GET":"POST",c=n.endpointStore.get(o),l=e(o),v=f(o);return t[n.uuidName]=s(o),t[n.filenameParam]=l,u&&(t[n.totalFileSizeName]=v),n.paramsInBody||(u||(t[n.inputName]=l),c=qq.obj2url(t,c)),i.open(a,c,!0),n.cors.expected&&n.cors.sendCredentials&&(i.withCredentials=!0),u?(n.paramsInBody&&qq.obj2FormData(t,h),h.append(n.inputName,r),h):r},l=function(t,r){var f=n.customHeaders.get(t),e=i.getFile(t);r.setRequestHeader("Accept","application/json");r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.setRequestHeader("Cache-Control","no-cache");u||(r.setRequestHeader("Content-Type","application/octet-stream"),r.setRequestHeader("X-Mime-Type",e.type));qq.each(f,function(n,t){r.setRequestHeader(n,t)})};qq.extend(this,{uploadChunk:function(t,r,u){var v,y,e,s=i._getChunkData(t,r),o=i._createXhr(t,r);return f(t),v=h(t,o),i._registerProgressHandler(t,r,s.size),e=n.paramsStore.get(t),a(t,e,s),u&&(e[n.resume.paramNames.resuming]=!0),y=c(e,o,s.blob,t),l(t,o),o.send(y),v},uploadFile:function(t){var u,r,f,e,o=i.getFile(t);return r=i._createXhr(t),i._registerProgressHandler(t),u=h(t,r),f=n.paramsStore.get(t),e=c(f,r,o,t),l(t,r),r.send(e),u}});qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"traditional"},n),proxy:qq.extend({getEndpoint:n.endpointStore.get},t)}));qq.override(this,function(t){return{finalizeChunks:function(i){return n.chunking.success.endpoint?b(i):t.finalizeChunks(i)}}})};qq.traditional.AllChunksDoneAjaxRequester=function(n){"use strict";var u,i="POST",t={cors:{allowXdr:!1,expected:!1,sendCredentials:!1},endpoint:null,log:function(){}},r={},f={get:function(){return t.endpoint}};qq.extend(t,n);u=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:[i],method:i,successfulResponseCodes:function(){var n={};return n[i]=[200,201,202],n}(),endpointStore:f,allowXRequestedWithAndCacheControl:!1,cors:t.cors,log:t.log,onComplete:function(n,t,i){var u=r[n];delete r[n];i?u.failure(t):u.success(t)}}));qq.extend(this,{complete:function(n,i,f,e){var o=new qq.Promise;return t.log("Submitting All Chunks Done request for "+n),r[n]=o,u.initTransport(n).withParams(f).withHeaders(e).send(i),o}})};qq.PasteSupport=function(n){"use strict";function r(n){return n.type&&0===n.type.indexOf("image/")}function u(){qq(t.targetElement).attach("paste",function(n){var i=n.clipboardData;i&&qq.each(i.items,function(n,i){if(r(i)){var u=i.getAsFile();t.callbacks.pasteReceived(u)}})})}function f(){i&&i()}var t,i;t={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}};qq.extend(t,n);u();qq.extend(this,{reset:function(){f()}})};qq.DragAndDrop=function(n){"use strict";function c(n,i){var r=Array.prototype.slice.call(n);t.callbacks.dropLog("Grabbed "+n.length+" dropped files.");i.dropDisabled(!1);t.callbacks.processingDroppedFilesComplete(r,i.getElement())}function u(n){var i=new qq.Promise;return n.isFile?n.file(function(t){var f=n.name,u=n.fullPath,e=u.indexOf(f);u=u.substr(0,e);"/"===u.charAt(0)&&(u=u.substr(1));t.qqPath=u;r.push(t);i.success()},function(r){t.callbacks.dropLog("Problem parsing '"+n.fullPath+"'.  FileError code "+r.code+".","error");i.failure()}):n.isDirectory&&f(n).then(function(n){var t=n.length;qq.each(n,function(n,r){u(r).done(function(){t-=1;0===t&&i.success()})});n.length||i.success()},function(r){t.callbacks.dropLog("Problem parsing '"+n.fullPath+"'.  FileError code "+r.code+".","error");i.failure()}),i}function f(n,t,i,r){var u=r||new qq.Promise,e=t||n.createReader();return e.readEntries(function(t){var r=i?i.concat(t):t;t.length?setTimeout(function(){f(n,e,r,u)},0):u.success(r)},u.failure),u}function l(n,i){var f=[],e=new qq.Promise;return t.callbacks.processingDroppedFiles(),i.dropDisabled(!0),n.files.length>1&&!t.allowMultipleItems?(t.callbacks.processingDroppedFilesComplete([]),t.callbacks.dropError("tooManyFilesError",""),i.dropDisabled(!1),e.failure()):(r=[],qq.isFolderDropSupported(n)?qq.each(n.items,function(n,t){var i=t.webkitGetAsEntry();i&&(i.isFile?r.push(t.getAsFile()):f.push(u(i).done(function(){f.pop();0===f.length&&e.success()})))}):r=n.files,0===f.length&&e.success()),e}function e(n){var u=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:o,element:n,onEnter:function(i){qq(n).addClass(t.classes.dropActive);i.stopPropagation()},onLeaveNotDescendants:function(){qq(n).removeClass(t.classes.dropActive)},onDrop:function(n){l(n.dataTransfer,u).then(function(){c(r,u)},function(){t.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});return i.addDisposer(function(){u.dispose()}),qq(n).hasAttribute(s)&&qq(n).hide(),h.push(u),u}function a(n){var t;return qq.each(n.dataTransfer.types,function(n,i){if("Files"===i)return(t=!0,!1)}),t}function v(n){return qq.firefox()?!n.relatedTarget:qq.safari()?n.x<0||n.y<0:0===n.x&&0===n.y}function y(){var n=t.dropZoneElements,r=function(){setTimeout(function(){qq.each(n,function(n,i){qq(i).hasAttribute(s)&&qq(i).hide();qq(i).removeClass(t.classes.dropActive)})},10)};qq.each(n,function(t,r){var u=e(r);n.length&&(!qq.ie()||qq.ie10())&&i.attach(document,"dragenter",function(t){!u.dropDisabled()&&a(t)&&qq.each(n,function(n,t){t instanceof HTMLElement&&qq(t).css({display:"block"})})})});i.attach(document,"dragleave",function(n){v(n)&&r()});i.attach(qq(document).children()[0],"mouseenter",function(){r()});i.attach(document,"drop",function(n){n.preventDefault();r()});i.attach(document,o,r)}var t,o="qq-hidezones",s="qq-hide-dropzone",h=[],r=[],i=new qq.DisposeSupport;t={dropZoneElements:[],allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(t,n,!0);y();qq.extend(this,{setupExtraDropzone:function(n){t.dropZoneElements.push(n);e(n)},removeDropzone:function(n){var i,r=t.dropZoneElements;for(i in r)if(r[i]===n)return r.splice(i,1)},dispose:function(){i.dispose();qq.each(h,function(n,t){t.dispose()})}})};qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(n,t){qq.log("Drag & drop error code '"+n+" with these specifics: '"+t+"'","error")},dropLog:function(n,t){qq.log(n,t)}}};qq.UploadDropZone=function(n){"use strict";function s(){return qq.safari()||qq.firefox()&&qq.windows()}function h(){o||(s?i.attach(document,"dragover",function(n){n.preventDefault()}):i.attach(document,"dragover",function(n){n.dataTransfer&&(n.dataTransfer.dropEffect="none",n.preventDefault())}),o=!0)}function u(n){if(qq.ie()&&!qq.ie10())return!1;var i,t=n.dataTransfer,r=qq.safari();return i=qq.ie10()||qq.ie11()?!0:"none"!==t.effectAllowed,t&&i&&(t.files||!r&&t.types.contains&&t.types.contains("Files"))}function f(n){return void 0!==n&&(e=n),e}function c(){function i(){n=document.createEvent("Event");n.initEvent(t.HIDE_ZONES_EVENT_NAME,!0,!0)}var n;if(window.CustomEvent)try{n=new CustomEvent(t.HIDE_ZONES_EVENT_NAME)}catch(r){i()}else i();document.dispatchEvent(n)}function l(){i.attach(r,"dragover",function(n){if(u(n)){var t=qq.ie()||qq.ie11()?null:n.dataTransfer.effectAllowed;n.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy";n.stopPropagation();n.preventDefault()}});i.attach(r,"dragenter",function(n){if(!f()){if(!u(n))return;t.onEnter(n)}});i.attach(r,"dragleave",function(n){if(u(n)){t.onLeave(n);var i=document.elementFromPoint(n.clientX,n.clientY);qq(this).contains(i)||t.onLeaveNotDescendants(n)}});i.attach(r,"drop",function(n){if(!f()){if(!u(n))return;n.preventDefault();n.stopPropagation();t.onDrop(n);c()}})}var t,r,e,o,i=new qq.DisposeSupport;t={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(t,n);r=t.element;h();l();qq.extend(this,{dropDisabled:function(n){return f(n)},dispose:function(){i.dispose()},getElement:function(){return r}})};qq.DeleteFileAjaxRequester=function(n){"use strict";function r(){return"POST"===t.method.toUpperCase()?{_method:"DELETE"}:{}}var i,t={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(){return{}},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(t,n);i=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:t.method,endpointStore:t.endpointStore,paramsStore:t.paramsStore,mandatedParams:r(),maxConnections:t.maxConnections,customHeaders:function(n){return t.customHeaders.get(n)},demoMode:t.demoMode,log:t.log,onSend:t.onDelete,onComplete:t.onDeleteComplete,cors:t.cors}));qq.extend(this,{sendDelete:function(n,r,u){var f=u||{};t.log("Submitting delete file request for "+n);"DELETE"===t.method?i.initTransport(n).withPath(r).withParams(f).send():(f[t.uuidParamName]=r,i.initTransport(n).withParams(f).send())}})},function(){function i(n){var r=n.naturalWidth,u=n.naturalHeight,t,i;return r*u>1048576?(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(n,-r+1,0),0===i.getImageData(0,0,1,1).data[3]):!1}function r(n,t,i){var u=document.createElement("canvas"),f,h,o;u.width=1;u.height=i;f=u.getContext("2d");f.drawImage(n,0,0);for(var c=f.getImageData(0,0,1,i).data,e=0,s=i,r=i;r>e;)h=c[4*(r-1)+3],0===h?s=r:e=r,r=s+e>>1;return o=r/i,0===o?1:o}function u(n,i,r){var u=document.createElement("canvas"),f=i.mime||"image/jpeg";return t(n,u,i,r),u.toDataURL(f,i.quality||.8)}function t(n,t,u,e){var h=n.naturalWidth,c=n.naturalHeight,v=u.width,y=u.height,l=t.getContext("2d"),k,o,s,a,b;if(l.save(),f(t,v,y,u.orientation),qq.ios()){k=i(n);k&&(h/=2,c/=2);o=1024;s=document.createElement("canvas");s.width=s.height=o;for(var p=s.getContext("2d"),tt=e?r(n,h,c):1,d=Math.ceil(o*v/h),g=Math.ceil(o*y/c/tt),w=0,nt=0;c>w;){for(a=0,b=0;h>a;)p.clearRect(0,0,o,o),p.drawImage(n,-a,-w),l.drawImage(s,0,0,o,o,b,nt,d,g),a+=o,b+=d;w+=o;nt+=g}l.restore();s=p=null}else l.drawImage(n,0,0,v,y);t.qqImageRendered&&t.qqImageRendered()}function f(n,t,i,r){switch(r){case 5:case 6:case 7:case 8:n.width=i;n.height=t;break;default:n.width=t;n.height=i}var u=n.getContext("2d");switch(r){case 2:u.translate(t,0);u.scale(-1,1);break;case 3:u.translate(t,i);u.rotate(Math.PI);break;case 4:u.translate(0,i);u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI);u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI);u.translate(0,-i);break;case 7:u.rotate(.5*Math.PI);u.translate(t,-i);u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI);u.translate(-t,0)}}function n(n,t){var i,r,u;if(window.Blob&&n instanceof Blob){if(i=new Image,r=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null,!r)throw Error("No createObjectURL function found to create blob url");i.src=r.createObjectURL(n);this.blob=n;n=i}n.naturalWidth||n.naturalHeight||(u=this,n.onload=function(){var n=u.imageLoadListeners;n&&(u.imageLoadListeners=null,setTimeout(function(){for(var t=0,i=n.length;i>t;t++)n[t]()},0))},n.onerror=t,this.imageLoadListeners=[]);this.srcImage=n}n.prototype.render=function(n,i){var v,s,l,a;if(this.imageLoadListeners)return v=this,this.imageLoadListeners.push(function(){v.render(n,i)}),void 0;i=i||{};var e=this.srcImage.naturalWidth,o=this.srcImage.naturalHeight,r=i.width,f=i.height,h=i.maxWidth,c=i.maxHeight,y=!this.blob||"image/jpeg"===this.blob.type;r&&!f?f=o*r/e<<0:f&&!r?r=e*f/o<<0:(r=e,f=o);h&&r>h&&(r=h,f=o*r/e<<0);c&&f>c&&(f=c,r=e*f/o<<0);s={width:r,height:f};for(l in i)s[l]=i[l];a=n.tagName.toLowerCase();"img"===a?n.src=u(this.srcImage,s,y):"canvas"===a&&t(this.srcImage,n,s,y);"function"==typeof this.onrender&&this.onrender(n)};"function"==typeof define&&define.amd?define([],function(){return n}):this.MegaPixImage=n}();qq.ImageGenerator=function(n){"use strict";function i(n){return"img"===n.tagName.toLowerCase()}function r(n){return"canvas"===n.tagName.toLowerCase()}function s(){return void 0!==(new Image).crossOrigin}function h(){var n=document.createElement("canvas");return n.getContext&&n.getContext("2d")}function f(n){var i=n.split("/"),r=i[i.length-1],t=qq.getExtension(r);switch(t=t&&t.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function u(n){var i,r,u,t=document.createElement("a");return t.href=n,i=t.protocol,u=t.port,r=t.hostname,i.toLowerCase()!==window.location.protocol.toLowerCase()?!0:r.toLowerCase()!==window.location.hostname.toLowerCase()?!0:u===window.location.port||qq.ie()?!1:!0}function c(t,i){t.onload=function(){t.onload=null;t.onerror=null;i.success(t)};t.onerror=function(){t.onload=null;t.onerror=null;n("Problem drawing thumbnail!","error");i.failure(t,"Problem drawing thumbnail!")}}function l(n,t){n.qqImageRendered=function(){t.success(n)}}function t(t,u){var f=i(t)||r(t);return i(t)?c(t,u):r(t)?l(t,u):(u.failure(t),n(qq.format("Element container of type {} is not supported!",t.tagName),"error")),f}function a(i,r,u){var f=new qq.Promise,o=new qq.Identify(i,n),e=u.maxSize,s=null==u.orient?!0:u.orient,h=function(){r.onerror=null;r.onload=null;n("Could not render preview, file may be too large!","error");f.failure(r,"Browser cannot render image!")};return o.isPreviewable().then(function(u){var c={parse:function(){return(new qq.Promise).success()}},l=s?new qq.Exif(i,n):c,o=new MegaPixImage(i,h);t(r,f)&&l.parse().then(function(n){var t=n&&n.Orientation;o.render(r,{maxWidth:e,maxHeight:e,orientation:t,mime:u})},function(t){n(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t));o.render(r,{maxWidth:e,maxHeight:e,mime:u})})},function(){n("Not previewable");f.failure(r,"Not previewable")}),f}function e(n,i,r,e){var o=new Image,s=new qq.Promise;t(o,s);u(n)&&(o.crossOrigin="anonymous");o.src=n;s.then(function(){t(i,r);var u=new MegaPixImage(o);u.render(i,{maxWidth:e,maxHeight:e,mime:f(n)})})}function o(n,i,r,u){t(i,r);qq(i).css({maxWidth:u+"px",maxHeight:u+"px"});i.src=n}function v(n,f,c){var l=new qq.Promise,v=c.scale,a=v?c.maxSize:null;return v&&i(f)?h()?u(n)&&!s()?o(n,f,l,a):e(n,f,l,a):o(n,f,l,a):r(f)?e(n,f,l,a):t(f,l)&&(f.src=n),l}qq.extend(this,{generate:function(t,i,r){return qq.isString(t)?(n("Attempting to update thumbnail based on server response."),v(t,i,r||{})):(n("Attempting to draw client-side image preview."),a(t,i,r||{}))}});this._testing={};this._testing.isImg=i;this._testing.isCanvas=r;this._testing.isCrossOrigin=u;this._testing.determineMimeOfFileName=f};qq.Exif=function(n,t){"use strict";function i(n){for(var t=0,i=0;n.length>0;)t+=parseInt(n.substring(0,2),16)*Math.pow(2,i),n=n.substring(2,n.length),i+=8;return t}function r(t,i){var u=t,f=i;return void 0===u&&(u=2,f=new qq.Promise),qq.readBlobToHex(n,u,4).then(function(n){var t=/^ffe([0-9])/.exec(n),i;t?"1"!==t[1]?(i=parseInt(n.slice(4,8),16),r(u+i+2,f)):f.success(u):f.failure("No EXIF header to be found!")}),f}function f(){var t=new qq.Promise;return qq.readBlobToHex(n,0,6).then(function(n){0!==n.indexOf("ffd8")?t.failure("Not a valid JPEG!"):r().then(function(n){t.success(n)},function(n){t.failure(n)})}),t}function e(t){var i=new qq.Promise;return qq.readBlobToHex(n,t+10,2).then(function(n){i.success("4949"===n)}),i}function o(t,r){var u=new qq.Promise;return qq.readBlobToHex(n,t+18,2).then(function(n){return r?u.success(i(n)):(u.success(parseInt(n,16)),void 0)}),u}function s(t,i){var r=t+20,u=12*i;return qq.readBlobToHex(n,r,u)}function h(n){for(var i=[],t=0;t+24<=n.length;)i.push(n.slice(t,t+24)),t+=24;return i}function c(n,t){var f=16,r=qq.extend([],l),e={};return qq.each(t,function(t,o){var s,c,l,a=o.slice(0,4),h=n?i(a):parseInt(a,16),v=r.indexOf(h);return v>=0&&(c=u[h].name,l=u[h].bytes,s=o.slice(f,f+2*l),e[c]=n?i(s):parseInt(s,16),r.splice(v,1)),0===r.length?!1:void 0}),e}var l=[274],u={274:{name:"Orientation",bytes:2}};qq.extend(this,{parse:function(){var r=new qq.Promise,i=function(n){t(qq.format("EXIF header parse failed: '{}' ",n));r.failure(n)};return f().then(function(u){t(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===n.name?"blob":n.name));e(u).then(function(n){t(qq.format("EXIF Byte order is {} endian",n?"little":"big"));o(u,n).then(function(f){t(qq.format("Found {} APP1 directory entries",f));s(u,f).then(function(i){var u=h(i),f=c(n,u);t("Successfully parsed some EXIF tags");r.success(f)},i)},i)},i)},i),r}});this._testing={};this._testing.parseLittleEndian=i};qq.Identify=function(n,t){"use strict";function i(n,t){var i=!1,r=[].concat(n);return qq.each(r,function(n,r){if(0===t.indexOf(r))return(i=!0,!1)}),i}qq.extend(this,{isPreviewable:function(){var e=this,r=new qq.Promise,u=!1,f=void 0===n.name?"blob":n.name;return t(qq.format("Attempting to determine if {} can be rendered in this browser",f)),t("First pass: check type attribute of blob object."),this.isPreviewableSync()?(t("Second pass: check for magic bytes in file header."),qq.readBlobToHex(n,0,4).then(function(n){qq.each(e.PREVIEWABLE_MIME_TYPES,function(t,f){if(i(f,n))return(("image/tiff"!==t||qq.supportedFeatures.tiffPreviews)&&(u=!0,r.success(t)),!1)});t(qq.format("'{}' is {} able to be rendered in this browser",f,u?"":"NOT"));u||r.failure()},function(){t("Error reading file w/ name '"+n.name+"'.  Not able to be rendered in this browser.");r.failure()})):r.failure(),r},isPreviewableSync:function(){var r=n.type,u=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),r)>=0,i=!1;return u&&(i="image/tiff"===r?qq.supportedFeatures.tiffPreviews:!0),!i&&t(n.name+" is not previewable in this browser per the blob's type attr"),i}})};qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};qq.ImageValidation=function(n,t){"use strict";function i(n){var t=!1;return qq.each(n,function(n,i){if(i>0)return(t=!0,!1)}),t}function r(){var i=new qq.Promise;return new qq.Identify(n,t).isPreviewable().then(function(){var r=new Image,u=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;u?(r.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error");i.failure()},r.onload=function(){i.success({width:this.width,height:this.height})},r.src=u.createObjectURL(n)):(t("No createObjectURL function available to generate image URL!","error"),i.failure())},i.failure),i}function u(n,t){var i;return qq.each(n,function(n,r){if(r>0){var u=/(max|min)(Width|Height)/.exec(n),e=u[2].charAt(0).toLowerCase()+u[2].slice(1),f=t[e];switch(u[1]){case"min":if(r>f)return i=n,!1;break;case"max":if(f>r)return i=n,!1}}}),i}this.validate=function(n){var f=new qq.Promise;return t("Attempting to validate image."),i(n)?r().then(function(t){var i=u(n,t);i?f.failure(i):f.success()},f.success):f.success(),f}};qq.Session=function(n){"use strict";function i(n){return qq.isArray(n)?!0:(t.log("Session response is not an array.","error"),void 0)}function r(n,r,u,f){var e=!1;r=r&&i(n);r&&qq.each(n,function(n,i){if(null==i.uuid)e=!0,t.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",n),"error");else if(null==i.name)e=!0,t.log(qq.format("Session response item {} did not include a valid name - ignoring.",n),"error");else try{return t.addFileRecord(i),!0}catch(r){e=!0;t.log(r.message,"error")}return!1});f[r&&!e?"success":"failure"](n,u)}var t={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(){},log:function(){}};qq.extend(t,n,!0);this.refresh=function(){var n=new qq.Promise,i=function(t,i,u){r(t,i,u,n)},u=qq.extend({},t),f=new qq.SessionAjaxRequester(qq.extend(u,{onComplete:i}));return f.queryServer(),n}};qq.SessionAjaxRequester=function(n){"use strict";function r(n,i,r){var u=null;if(null!=i.responseText)try{u=qq.parseJson(i.responseText)}catch(f){t.log("Problem parsing session response: "+f.message,"error");r=!0}t.onComplete(u,!r,i)}var i,t={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(){},log:function(){}};qq.extend(t,n);i=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return t.endpoint}},customHeaders:t.customHeaders,log:t.log,onComplete:r,cors:t.cors}));qq.extend(this,{queryServer:function(){var n=qq.extend({},t.params);t.log("Session query request.");i.initTransport("sessionRefresh").withParams(n).withCacheBuster().send()}})};qq.FormSupport=function(n,t,i){"use strict";function e(n){n.getAttribute("action")&&(f.newEndpoint=n.getAttribute("action"))}function u(n,t){return!n.checkValidity||n.checkValidity()?!0:(i("Form did not pass validation checks - will not upload.","error"),t(),void 0)}function o(n){var i=n.submit;qq(n).attach("submit",function(r){r=r||window.event;r.preventDefault?r.preventDefault():r.returnValue=!1;u(n,i)&&t()});n.submit=function(){u(n,i)&&t()}}function s(n){return n&&(qq.isString(n)&&(n=document.getElementById(n)),n&&(i("Attaching to form element."),e(n),h&&o(n))),n}var f=this,h=n.interceptSubmit,r=n.element,c=n.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:c,attachedToForm:!1,getFormInputsAsObject:function(){return null==r?null:f._form2Obj(r)}});r=s(r);this.attachedToForm=!!r};qq.extend(qq.FormSupport.prototype,{_form2Obj:function(n){"use strict";var t={},r=function(n){return qq.indexOf(["button","image","reset","submit"],n.toLowerCase())<0},u=function(n){return qq.indexOf(["checkbox","radio"],n.toLowerCase())>=0},i=function(n){return u(n.type)&&!n.checked?!0:n.disabled&&"hidden"!==n.type.toLowerCase()},f=function(n){var t=null;return qq.each(qq(n).children(),function(n,i){if("option"===i.tagName.toLowerCase()&&i.selected)return(t=i.value,!1)}),t};return qq.each(n.elements,function(n,u){if((qq.isInput(u,!0)||"textarea"===u.tagName.toLowerCase())&&r(u.type)&&!i(u))t[u.name]=u.value;else if("select"===u.tagName.toLowerCase()&&!i(u)){var e=f(u);null!==e&&(t[u.name]=e)}}),t}});qq.Scaler=function(n,t){"use strict";var r=n.sendOriginal,u=n.orient,f=n.defaultType,e=n.defaultQuality/100,o=n.failureText,s=n.includeExif,i=this._getSortedSizes(n.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&i.length>0,getFileRecords:function(n,h,c){var a=this,v=[],l=c.blob?c.blob:c,y=new qq.Identify(l,t);return y.isPreviewableSync()&&qq.each(i,function(n,i){var r=a._determineOutputType({defaultType:f,requestedType:i.type,refType:l.type});v.push({uuid:qq.getUniqueId(),name:a._getName(h,{name:i.name,type:r,refType:l.type}),blob:new qq.BlobProxy(l,qq.bind(a._generateScaledImage,a,{maxSize:i.maxSize,orient:u,type:r,quality:e,failedText:o,includeExif:s,log:t}))})}),r&&v.push({uuid:n,name:h,blob:l}),v},handleNewFile:function(n,t,i,r,u,f,e,o){var a=this,c=(n.qqButtonId||n.blob&&n.blob.qqButtonId,[]),s=null,v=o.addFileToHandler,h=o.uploadData,l=o.paramsStore,y=qq.getUniqueId();qq.each(a.getFileRecords(i,t,n),function(t,i){var f,o=n,l=r;i.blob instanceof qq.BlobProxy&&(o=i.blob,l=-1);f=h.addFile({uuid:i.uuid,name:i.name,size:l,batchId:e,proxyGroupId:y});i.blob instanceof qq.BlobProxy?c.push(f):s=f;v(f,o);u.push({id:f,file:o})});null!==s&&(qq.each(c,function(n,t){var i={qqparentuuid:h.retrieve({id:s}).uuid,qqparentsize:h.retrieve({id:s}).size};i[f]=h.retrieve({id:t}).uuid;h.setParentId(t,s);l.addReadOnly(t,i)}),c.length&&!function(){var n={};n[f]=h.retrieve({id:s}).uuid;l.addReadOnly(s,n)}())}})};qq.extend(qq.Scaler.prototype,{scaleImage:function(n,t,i){"use strict";if(!qq.supportedFeatures.scaling)throw new qq.Error("Scaling is not supported in this browser!");var r=new qq.Promise,f=i.log,e=i.getFile(n),u=i.uploadData.retrieve({id:n}),o=u&&u.name,s=u&&u.uuid,h={sendOriginal:!1,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},c=new qq.Scaler(h,f);return qq.Scaler&&qq.supportedFeatures.imagePreviews&&e?qq.bind(function(){var t;t=c.getFileRecords(s,o,e)[0];t?t.blob.create().then(r.success,r.failure):(f(n+" is not a scalable image!","error"),r.failure())},this)():(r.failure(),f("Could not generate requested scaled image for "+n+".  Scaling is either not possible in this browser, or the file could not be located.","error")),r},_determineOutputType:function(n){"use strict";var t=n.requestedType,i=n.defaultType,r=n.refType;return i||t?t?qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0?"image/tiff"===t?qq.supportedFeatures.tiffPreviews?t:i:t:i:i:"image/jpeg"!==r?"image/png":r},_getName:function(n,t){"use strict";var r=n.lastIndexOf("."),u=" ("+t.name+")",f=t.type||"image/png",o=t.refType,i="",e=qq.getExtension(n);return r>=0?(i=n.substr(0,r),o!==f&&(e=f.split("/")[1]),i+=u+"."+e):i=n+u,i},_getSortedSizes:function(n){"use strict";return n=qq.extend([],n),n.sort(function(n,t){return n.maxSize>t.maxSize?1:n.maxSize<t.maxSize?-1:0})},_generateScaledImage:function(n,t){"use strict";var u=this,i=n.log,o=n.maxSize,s=n.orient,f=n.type,h=n.quality,c=n.failedText,l=n.includeExif&&"image/jpeg"===t.type&&"image/jpeg"===f,r=new qq.Promise,a=new qq.ImageGenerator(i),e=document.createElement("canvas");return i("Attempting to generate scaled version for "+t.name),a.generate(t,e,{maxSize:o,orient:s}).then(function(){var n=e.toDataURL(f,h),o=function(){i("Success generating scaled version for "+t.name);var f=u._dataUriToBlob(n);r.success(f)};l?u._insertExifHeader(t,n,i).then(function(t){n=t;o()},function(){i("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error");o()}):o()},function(){i("Failed attempt to generate scaled version for "+t.name,"error");r.failure(c)}),r},_insertExifHeader:function(n,t,i){"use strict";var r=new FileReader,u=new qq.Promise,f="";return r.onload=function(){f=r.result;u.success(ExifRestorer.restore(f,t))},r.onerror=function(){i("Problem reading "+n.name+" during attempt to transfer EXIF data to scaled version.","error");u.failure()},r.readAsDataURL(n),u},_dataUriToBlob:function(n){"use strict";var t,r,i,u;return t=n.split(",")[0].indexOf("base64")>=0?atob(n.split(",")[1]):decodeURI(n.split(",")[1]),r=n.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),u=new Uint8Array(i),qq.each(t,function(n,t){u[n]=t.charCodeAt(0)}),this._createBlob(i,r)},_createBlob:function(n,t){"use strict";var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=r&&new r;return i?(i.append(n),i.getBlob(t)):new Blob([n],{type:t})}});ExifRestorer=function(){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(n){var u,t,o,s,f,h="",i="",r="",e=0;do u=n[e++],t=n[e++],i=n[e++],o=u>>2,s=(3&u)<<4|t>>4,f=(15&t)<<2|i>>6,r=63&i,isNaN(t)?f=r=64:isNaN(i)&&(r=64),h=h+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(r),u=t=i="",o=s=f=r="";while(e<n.length);return h},n.restore=function(n,t){var i="data:image/jpeg;base64,";if(!n.match(i))return t;var r=this.decode64(n.replace(i,"")),u=this.slice2Segments(r),f=this.exifManipulation(t,u);return i+this.encode64(f)},n.exifManipulation=function(n,t){var i=this.getExifArray(t),r=this.insertExif(n,i);return new Uint8Array(r)},n.getExifArray=function(n){for(var t,i=0;i<n.length;i++)if(t=n[i],255==t[0]&225==t[1])return t;return[]},n.insertExif=function(n,t){var f=n.replace("data:image/jpeg;base64,",""),r=this.decode64(f),u=r.indexOf(255,3),e=r.slice(0,u),o=r.slice(u),i=e;return i=i.concat(t),i=i.concat(o)},n.slice2Segments=function(n){for(var t=0,i=[];;){if(255==n[t]&218==n[t+1])break;if(255==n[t]&216==n[t+1])t+=2;else{var u=256*n[t+2]+n[t+3],r=t+u+2,f=n.slice(t,r);i.push(f);t=r}if(t>n.length)break}return i},n.decode64=function(n){var e,o,s,r,t,h="",u="",i=0,f=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(n))throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do s=this.KEY_STR.indexOf(n.charAt(i++)),r=this.KEY_STR.indexOf(n.charAt(i++)),t=this.KEY_STR.indexOf(n.charAt(i++)),u=this.KEY_STR.indexOf(n.charAt(i++)),e=s<<2|r>>4,o=(15&r)<<4|t>>2,h=(3&t)<<6|u,f.push(e),64!=t&&f.push(o),64!=u&&f.push(h),e=o=h="",s=r=t=u="";while(i<n.length);return f},n}();qq.TotalProgress=function(n,t){"use strict";var i={},u=0,r=0,e=-1,o=-1,s=function(t,i){(t!==e||i!==o)&&n(t,i);e=t;o=i},c=function(n,t){var i=!0;return qq.each(n,function(n,r){if(qq.indexOf(t,r)>=0)return(i=!1,!1)}),i},l=function(n){f(n,-1,-1);delete i[n]},a=function(n,t,i){(0===t.length||c(t,i))&&(s(r,r),this.reset())},h=function(n){var r=t(n);r>0&&(f(n,0,r),i[n]={loaded:0,total:r})},f=function(n,t,f){var e=i[n]?i[n].loaded:0,o=i[n]?i[n].total:0;-1===t&&-1===f?(u-=e,r-=o):(t&&(u+=t-e),f&&(r+=f-o));s(u,r)};qq.extend(this,{onAllComplete:a,onStatusChange:function(n,t,i){i===qq.status.CANCELED||i===qq.status.REJECTED?l(n):i===qq.status.SUBMITTING&&h(n)},onIndividualProgress:function(n,t,r){f(n,t,r);i[n]={loaded:t,total:r}},onNewSize:function(n){h(n)},reset:function(){i={};u=0;r=0}})};qq.UiEventHandler=function(n,t){"use strict";function u(n){r.attach(n,i.eventType,function(n){n=n||window.event;var t=n.target||n.srcElement;i.onHandled(t,n)})}var r=new qq.DisposeSupport,i={eventType:"click",attachTo:null,onHandled:function(){}};qq.extend(this,{addHandler:function(n){u(n)},dispose:function(){r.dispose()}});qq.extend(t,{getFileIdFromItem:function(n){return n.qqFileId},getDisposeSupport:function(){return r}});qq.extend(i,n);i.attachTo&&u(i.attachTo)};qq.FileButtonsClickHandler=function(n){"use strict";function i(n,i){qq.each(r,function(r,u){var f,e=r.charAt(0).toUpperCase()+r.slice(1);if(t.templating["is"+e](n))return(f=t.templating.getFileId(n),qq.preventDefault(i),t.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",t.onGetName(f),f)),u(f),!1)})}var t={templating:null,log:function(){},onDeleteFile:function(){},onCancel:function(){},onRetry:function(){},onPause:function(){},onContinue:function(){},onGetName:function(){}},r={cancel:function(n){t.onCancel(n)},retry:function(n){t.onRetry(n)},deleteButton:function(n){t.onDeleteFile(n)},pause:function(n){t.onPause(n)},continueButton:function(n){t.onContinue(n)}};qq.extend(t,n);t.eventType="click";t.onHandled=i;t.attachTo=t.templating.getFileList();qq.extend(this,new qq.UiEventHandler(t,{}))};qq.FilenameClickHandler=function(n){"use strict";function r(n,r){if(t.templating.isFileName(n)||t.templating.isEditIcon(n)){var u=t.templating.getFileId(n),f=t.onGetUploadStatus(u);f===qq.status.SUBMITTED&&(t.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",t.onGetName(u),u)),qq.preventDefault(r),i.handleFilenameEdit(u,n,!0))}}var i={},t={templating:null,log:function(){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(){},onGetName:function(){}};qq.extend(t,n);t.eventType="click";t.onHandled=r;qq.extend(this,new qq.FilenameEditHandler(t,i))};qq.FilenameInputFocusInHandler=function(n,t){"use strict";function r(n){if(i.templating.isEditInput(n)){var r=i.templating.getFileId(n),u=i.onGetUploadStatus(r);u===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",i.onGetName(r),r)),t.handleFilenameEdit(r,n))}}var i={templating:null,onGetUploadStatus:function(){},log:function(){}};t||(t={});i.eventType="focusin";i.onHandled=r;qq.extend(i,n);qq.extend(this,new qq.FilenameEditHandler(i,t))};qq.FilenameInputFocusHandler=function(n){"use strict";n.eventType="focus";n.attachTo=null;qq.extend(this,new qq.FilenameInputFocusInHandler(n,{}))};qq.FilenameEditHandler=function(n,t){"use strict";function u(n){var t=i.onGetName(n),r=t.lastIndexOf(".");return r>0&&(t=t.substr(0,r)),t}function f(n){var t=i.onGetName(n);return qq.getExtension(t)}function r(n,t){var u,r=n.value;void 0!==r&&qq.trimStr(r).length>0&&(u=f(t),void 0!==u&&(r=r+"."+u),i.onSetName(t,r));i.onEditingStatusChange(t,!1)}function e(n,i){t.getDisposeSupport().attach(n,"blur",function(){r(n,i)})}function o(n,i){t.getDisposeSupport().attach(n,"keyup",function(t){var u=t.keyCode||t.which;13===u&&r(n,i)})}var i={templating:null,log:function(){},onGetUploadStatus:function(){},onGetName:function(){},onSetName:function(){},onEditingStatusChange:function(){}};qq.extend(i,n);i.attachTo=i.templating.getFileList();qq.extend(this,new qq.UiEventHandler(i,t));qq.extend(t,{handleFilenameEdit:function(n,t,r){var f=i.templating.getEditInput(n);i.onEditingStatusChange(n,!0);f.value=u(n);r&&f.focus();e(f,n);o(f,n)}})},function(n){"use strict";function o(n){var u=r(n||{}),f=s(u);return i(f),h(u,f),t}function s(n){var t=u("uploaderType"),i=u("endpointType");return t?(t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),i?new qq[i]["FineUploader"+t](n):new qq["FineUploader"+t](n)):i?new qq[i].FineUploader(n):new qq.FineUploader(n)}function f(n,i){var r=t.data("fineuploader");return i?(void 0===r&&(r={}),r[n]=i,t.data("fineuploader",r),void 0):void 0===r?null:r[n]}function i(n){return f("uploader",n)}function u(n,t){return f(n,t)}function h(i,r){var u=i.callbacks={};n.each(r._options.callbacks,function(i,r){var f,o;f=/^on(\w+)/.exec(i)[1];f=f.substring(0,1).toLowerCase()+f.substring(1);o=t;u[i]=function(){var t,i,u=Array.prototype.slice.call(arguments),s=[];n.each(u,function(n,t){s.push(e(t))});t=r.apply(this,u);try{i=o.triggerHandler(f,s)}catch(h){qq.log("Caught error in Fine Uploader jQuery event handler: "+h.message,"error")}return null!=t?t:i}});r._options.callbacks=u}function r(i,f){var e,o;return e=void 0===f?"basic"!==i.uploaderType?{element:t[0]}:{}:f,n.each(i,function(t,i){n.inArray(t,a)>=0?u(t,i):i instanceof n?e[t]=i[0]:n.isPlainObject(i)?(e[t]={},r(i,e[t])):n.isArray(i)?(o=[],n.each(i,function(t,i){var u={};i instanceof n?n.merge(o,i):n.isPlainObject(i)?(r(i,u),o.push(u)):o.push(i)}),e[t]=o):e[t]=i}),void 0===f?e:void 0}function c(t){return"string"===n.type(t)&&!t.match(/^_/)&&void 0!==i()[t]}function l(n){var t,u=[],f=Array.prototype.slice.call(arguments,1);return r(f,u),t=i()[n].apply(i(),u),e(t)}function e(t){var i=t;return null==t||"object"!=typeof t||1!==t.nodeType&&9!==t.nodeType||!t.cloneNode||(i=n(t)),i}var t,a=["uploaderType","endpointType"];n.fn.fineUploader=function(r){var f=this,e=arguments,u=[];return this.each(function(s,h){if(t=n(h),i()&&c(r)){if(u.push(l.apply(f,e)),1===f.length)return!1}else"object"!=typeof r&&r?n.error("Method "+r+" does not exist on jQuery.fineUploader"):o.apply(f,e)}),1===u.length?u[0]:u.length>1?u:this}}(jQuery),function(n){"use strict";function f(n){n||(n={});n.dropZoneElements=[t];var u=r(n);return o(u),i(new qq.DragAndDrop(u)),t}function e(n,i){var r=t.data(u);return i?(void 0===r&&(r={}),r[n]=i,t.data(u,r),void 0):void 0===r?null:r[n]}function i(n){return e("dndInstance",n)}function o(i){var r=i.callbacks={};n.each(new qq.DragAndDrop.callbacks,function(n){var i,u=n;i=t;r[n]=function(){var n=Array.prototype.slice.call(arguments);return i.triggerHandler(u,n)}})}function r(t,i){var u,f;return u=void 0===i?{}:i,n.each(t,function(t,i){i instanceof n?u[t]=i[0]:n.isPlainObject(i)?(u[t]={},r(i,u[t])):n.isArray(i)?(f=[],n.each(i,function(t,i){i instanceof n?n.merge(f,i):f.push(i)}),u[t]=f):u[t]=i}),void 0===i?u:void 0}function s(t){return"string"===n.type(t)&&"dispose"===t&&void 0!==i()[t]}function h(n){var t=[],u=Array.prototype.slice.call(arguments,1);return r(u,t),i()[n].apply(i(),t)}var t,u="fineUploaderDnd";n.fn.fineUploaderDnd=function(r){var e=this,o=arguments,u=[];return this.each(function(c,l){if(t=n(l),i()&&s(r)){if(u.push(h.apply(e,o)),1===e.length)return!1}else"object"!=typeof r&&r?n.error("Method "+r+" does not exist in Fine Uploader's DnD module."):f.apply(e,o)}),1===u.length?u[0]:u.length>1?u:this}}(jQuery);qq.s3=qq.s3||{};qq.s3.util=qq.s3.util||function(){"use strict";return{AWS_PARAM_PREFIX:"x-amz-meta-",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",getBucket:function(n){var t;return qq.each([/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],function(i,r){var u=r.exec(n);if(u)return(t=u[1],!1)}),t},getPolicy:function(n){var i={},t=[],o=qq.s3.util.getBucket(n.endpoint),s=n.key,h=n.acl,r=n.type,c=new Date,u=n.expectedStatus,f=n.sessionToken,l=n.params,e=qq.s3.util.getSuccessRedirectAbsoluteUrl(n.successRedirectUrl),a=n.minFileSize,v=n.maxFileSize,y=n.reducedRedundancy,p=n.serverSideEncryption;return i.expiration=qq.s3.util.getPolicyExpirationDate(c),t.push({acl:h}),t.push({bucket:o}),r&&t.push({"Content-Type":r}),u&&t.push({success_action_status:u.toString()}),e&&t.push({success_action_redirect:e}),y&&(t.push({}),t[t.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),f&&(t.push({}),t[t.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=f),p&&(t.push({}),t[t.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),t.push({key:s}),qq.each(l,function(n,i){var u=qq.s3.util.AWS_PARAM_PREFIX+n,r={};r[u]=encodeURIComponent(i);t.push(r)}),i.conditions=t,qq.s3.util.enforceSizeLimits(i,a,v),i},refreshPolicyCredentials:function(n,t){var i=!1;qq.each(n.conditions,function(n,r){qq.each(r,function(n){n===qq.s3.util.SESSION_TOKEN_PARAM_NAME&&(r[n]=t,i=!0)})});i||(n.conditions.push({}),n.conditions[n.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=t)},generateAwsParams:function(n,t){var i={},s=n.params,r=new qq.Promise,h=qq.s3.util.getPolicy(n),u=n.sessionToken,f=n.type,c=n.key,l=n.accessKey,a=n.acl,e=n.expectedStatus,o=qq.s3.util.getSuccessRedirectAbsoluteUrl(n.successRedirectUrl),v=n.reducedRedundancy,y=n.serverSideEncryption,p=n.log;return i.key=c,i.AWSAccessKeyId=l,f&&(i["Content-Type"]=f),e&&(i.success_action_status=e),o&&(i.success_action_redirect=o),v&&(i[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),y&&(i[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),u&&(i[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=u),i.acl=a,qq.each(s,function(n,t){var r=qq.s3.util.AWS_PARAM_PREFIX+n;i[r]=encodeURIComponent(t)}),t(h).then(function(n,t,u){i.policy=n.policy;i.signature=n.signature;t&&(i.AWSAccessKeyId=t);u&&(i[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=u);r.success(i)},function(n){n=n||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.";p("Policy signing failed.  "+n,"error");r.failure(n)}),r},enforceSizeLimits:function(n,t,i){var r=0>t?0:t,u=0>=i?9007199254740992:i;(t>0||i>0)&&n.conditions.push(["content-length-range",r.toString(),u.toString()])},getPolicyExpirationDate:function(n){if(n.setMinutes(n.getMinutes()+5),Date.prototype.toISOString)return n.toISOString();var t=function(n){var t=String(n);return 1===t.length&&(t="0"+t),t};return n.getUTCFullYear()+"-"+t(n.getUTCMonth()+1)+"-"+t(n.getUTCDate())+"T"+t(n.getUTCHours())+":"+t(n.getUTCMinutes())+":"+t(n.getUTCSeconds())+"."+String((n.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(n){var i=n.contentDocument||n.contentWindow.document,r=i.location.search,t=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(r);if(t)return{bucket:t[1],key:t[2],etag:t[3].replace(/%22/g,"")}},getSuccessRedirectAbsoluteUrl:function(n){if(n){var t,i=document.createElement("div");return qq.ie7()?(i.innerHTML="<a href='"+n+"'><\/a>",t=i.firstChild,t.href):(t=document.createElement("a"),t.href=n,t.href=t.href,t.href)}},encodeQueryStringParam:function(n){var t=encodeURIComponent(n);return t=t.replace(/[!'()]/g,escape),t=t.replace(/\*/g,"%2A"),t.replace(/%20/g,"+")}}}(),function(){"use strict";qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(n,t){this._uploadSuccessParamsStore.set(n,t)}};qq.nonTraditionalBasePrivateApi={_onComplete:function(n,t,i,r){var f,o,l=i.success?!0:!1,u=this,s=arguments,h=this._options.uploadSuccess.endpoint,a=this._options.uploadSuccess.customHeaders,v=this._options.cors,e=new qq.Promise,c=this._uploadSuccessParamsStore.get(n),y=function(t){delete u._failedSuccessRequestCallbacks[n];qq.extend(i,t);qq.FineUploaderBasic.prototype._onComplete.apply(u,s);e.success(t)},p=function(o){var h=f;qq.extend(i,o);i&&i.reset&&(h=null);h?u._failedSuccessRequestCallbacks[n]=h:delete u._failedSuccessRequestCallbacks[n];u._onAutoRetry(n,t,i,r,h)||(qq.FineUploaderBasic.prototype._onComplete.apply(u,s),e.failure(o))};return l&&h?(o=new qq.UploadSuccessAjaxRequester({endpoint:h,customHeaders:a,cors:v,log:qq.bind(this.log,this)}),qq.extend(c,u._getEndpointSpecificParams(n,i,r),!0),f=qq.bind(function(){o.sendSuccessRequest(n,c).then(y,p)},u),f(),e):qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(n){var t=this._failedSuccessRequestCallbacks[n];return qq.FineUploaderBasic.prototype._manualRetry.call(this,n,t)}}}(),function(){"use strict";qq.s3.FineUploaderBasic=function(n){var t={request:{accessKey:null},objectProperties:{acl:"private",key:"uuid",reducedRedundancy:!1,serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{endpoint:null,customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};qq.extend(t,n,!0);this.setCredentials(t.credentials,!0)||(this._currentCredentials.accessKey=t.request.accessKey);this._aclStore=this._createStore(t.objectProperties.acl);qq.FineUploaderBasic.call(this,t);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._failedSuccessRequestCallbacks={};this._cannedKeys={}};qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,{getKey:function(n){return null==this._cannedKeys[n]?this._handler.getThirdPartyFileId(n):this._cannedKeys[n]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=[]},setUploadSuccessParams:function(n,t){this._uploadSuccessParamsStore.set(n,t)},setCredentials:function(n,t){if(n&&n.secretKey){if(!n.accessKey)throw new qq.Error("Invalid credentials: no accessKey");if(!n.expiration)throw new qq.Error("Invalid credentials: no expiration");return this._currentCredentials=qq.extend({},n),qq.isString(n.expiration)&&(this._currentCredentials.expiration=new Date(n.expiration)),!0}if(!t)throw new qq.Error("Invalid credentials parameter!");this._currentCredentials={}},setAcl:function(n,t){this._aclStore.set(n,t)},_createUploadHandler:function(){var n=this,t={objectProperties:this._options.objectProperties,aclStore:this._aclStore,signature:this._options.signature,iframeSupport:this._options.iframeSupport,getKeyName:qq.bind(this._determineKeyName,this),validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};return qq.override(this._endpointStore,function(n){return{get:function(t){var i=n.get(t);return i.indexOf("http")<0?"http://"+i:i}}}),qq.override(this._paramsStore,function(n){return{get:function(t){var r=n.get(t),i={};return qq.each(r,function(n,t){i[n.toLowerCase()]=qq.isFunction(t)?t():t}),i}}}),t.signature.credentialsProvider={get:function(){return n._currentCredentials},onExpired:function(){var t=new qq.Promise,i=n._options.callbacks.onCredentialsExpired();return qq.isGenericPromise(i)?i.then(function(i){try{n.setCredentials(i);t.success()}catch(r){n.log("Invalid credentials returned from onCredentialsExpired callback! ("+r.message+")","error");t.failure("onCredentialsExpired did not return valid credentials.")}},function(i){n.log("onCredentialsExpired callback indicated failure! ("+i+")","error");t.failure("onCredentialsExpired callback failed.")}):(n.log("onCredentialsExpired callback did not return a promise!","error"),t.failure("Unexpected return value for onCredentialsExpired.")),t}},qq.FineUploaderBasic.prototype._createUploadHandler.call(this,t,"s3")},_determineKeyName:function(n,t){var r=new qq.Promise,i=this._options.objectProperties.key,e=qq.getExtension(t),f=r.failure,u=function(n,t){var i=n;void 0!==t&&(i+="."+t);r.success(i)};switch(i){case"uuid":u(this.getUuid(n),e);break;case"filename":u(t);break;default:qq.isFunction(i)?this._handleKeynameFunction(i,n,u,f):(this.log(i+" is not a valid value for the s3.keyname option!","error"),f())}return r},_handleKeynameFunction:function(n,t,i,r){var o=this,f=function(n){i(n)},e=function(n){o.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",t,n||"null"),"error");r(n)},u=n.call(this,t);qq.isGenericPromise(u)?u.then(f,e):null==u?e():f(u)},_getEndpointSpecificParams:function(n,t,i){var r={key:this.getKey(n),uuid:this.getUuid(n),name:this.getName(n),bucket:qq.s3.util.getBucket(this._endpointStore.get(n))};return i&&i.getResponseHeader("ETag")?r.etag=i.getResponseHeader("ETag"):t.etag&&(r.etag=t.etag),r},_onSubmitDelete:function(n,t){var i={key:this.getKey(n),bucket:qq.s3.util.getBucket(this._endpointStore.get(n))};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,n,t,i)},_addCannedFile:function(n){var t;if(null==n.s3Key)throw new qq.Error("Did not find s3Key property in server session response.  This is required!");return t=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments),this._cannedKeys[t]=n.s3Key,t}})}();qq.s3.RequestSigner=function(n){"use strict";function o(n,i,r){var f,e,o=i.responseText,h=u[n],s=h.promise;if(delete u[n],o)try{e=qq.parseJson(o)}catch(c){t.log("Error attempting to parse signature response: "+c,"error")}e&&e.invalid?(r=!0,f="Invalid policy document or request headers!"):e?t.expectingPolicy&&!e.policy?(r=!0,f="Response does not include the base64 encoded policy!"):e.signature||(r=!0,f="Response does not include the signature!"):(r=!0,f="Received an empty or invalid response from the server!");r?(f&&t.log(f,"error"),s.failure(f)):s.success(e)}function s(n,t,i,u,f,e,o){var s,h="POST",c=[],l="";switch(n){case r.REQUEST_TYPE.MULTIPART_ABORT:h="DELETE";s=qq.format("uploadId={}",e);break;case r.REQUEST_TYPE.MULTIPART_INITIATE:s="uploads";break;case r.REQUEST_TYPE.MULTIPART_COMPLETE:s=qq.format("uploadId={}",e);break;case r.REQUEST_TYPE.MULTIPART_UPLOAD:h="PUT";s=qq.format("partNumber={}&uploadId={}",o,e)}return s=i+"?"+s,qq.each(f,function(n){c.push(n)}),c.sort(),qq.each(c,function(n,t){l+=t+":"+f[t]+"\n"}),{toSign:qq.format("{}\n\n{}\n\n{}/{}/{}",h,u||"",l||"\n",t,s),endOfUrl:s}}function f(n,t,i,r){var u;n.signatureConstructor?(r&&(u=n.signatureConstructor.getHeaders(),u[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=r,n.signatureConstructor.withHeaders(u)),c(n.signatureConstructor.getToSign().stringToSign,t)):(r&&qq.s3.util.refreshPolicyCredentials(n,r),h(n,t,i,r))}function h(n,t,r,u){var e=JSON.stringify(n),o=CryptoJS.enc.Utf8.parse(e),f=CryptoJS.enc.Base64.stringify(o),s=CryptoJS.HmacSHA1(f,i.get().secretKey),h=CryptoJS.enc.Base64.stringify(s);t.success({policy:f,signature:h},r,u)}function c(n,t){var r=CryptoJS.enc.Utf8.parse(n),u=CryptoJS.HmacSHA1(r,i.get().secretKey),f=CryptoJS.enc.Base64.stringify(u);t.success({signature:f})}var e,i,r=this,u={},t={expectingPolicy:!1,method:"POST",signatureSpec:{credentialsProvider:{},endpoint:null,customHeaders:{}},maxConnections:3,paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};qq.extend(t,n,!0);i=t.signatureSpec.credentialsProvider;e=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:t.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return t.signatureSpec.endpoint}},paramsStore:t.paramsStore,maxConnections:t.maxConnections,customHeaders:t.signatureSpec.customHeaders,log:t.log,onComplete:o,cors:t.cors,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{getSignature:function(n,r){var s=r,o=new qq.Promise;return i.get().secretKey&&window.CryptoJS?i.get().expiration.getTime()>Date.now()?f(r,o):i.onExpired().then(function(){f(r,o,i.get().accessKey,i.get().sessionToken)},function(){t.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error");o.failure("Unable to sign request - expired credentials.")}):(t.log("Submitting S3 signature request for "+n),s.signatureConstructor&&(s={headers:s.signatureConstructor.getToSign().stringToSign}),e.initTransport(n).withParams(s).send(),u[n]={promise:o}),o},constructStringToSign:function(n,t,r){var o,e,h,f,u={};return{withHeaders:function(n){return u=n,this},withUploadId:function(n){return o=n,this},withContentType:function(n){return e=n,this},withPartNum:function(n){return h=n,this},getToSign:function(){var c=i.get().sessionToken;return u["x-amz-date"]=(new Date).toUTCString(),c&&(u[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=c),f=s(n,t,r,e,u,o,h),{headers:function(){return e&&(u["Content-Type"]=e),u}(),endOfUrl:f.endOfUrl,stringToSign:f.toSign}},getHeaders:function(){return qq.extend({},u)},getEndOfUrl:function(){return f&&f.endOfUrl}}}})};qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};qq.UploadSuccessAjaxRequester=function(n){"use strict";function u(n,r,u){var f,e=i[n],o=r.responseText,s={success:!0},h={success:!1};delete i[n];t.log(qq.format("Received the following response body to an upload success request for id {}: {}",n,o));try{f=qq.parseJson(o);u||f&&(f.error||f.success===!1)?(t.log("Upload success request was rejected by the server.","error"),e.failure(qq.extend(f,h))):(t.log("Upload success was acknowledged by the server."),e.success(qq.extend(f,s)))}catch(c){u?(t.log(qq.format("Your server indicated failure in its upload success request response for id {}!",n),"error"),e.failure(h)):(t.log("Upload success was acknowledged by the server."),e.success(s))}}var r,i=[],t={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};qq.extend(t,n);r=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:t.method,endpointStore:{get:function(){return t.endpoint}},paramsStore:t.paramsStore,maxConnections:t.maxConnections,customHeaders:t.customHeaders,log:t.log,onComplete:u,cors:t.cors,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{sendSuccessRequest:function(n,u){var f=new qq.Promise;return t.log("Submitting upload success request/notification for "+n),r.initTransport(n).withParams(u).send(),i[n]=f,f}})};qq.s3.InitiateMultipartAjaxRequester=function(n){"use strict";function f(n){var u,e=qq.s3.util.getBucket(t.endpointStore.get(n)),r={},f=new qq.Promise,o=t.getKey(n);return r["x-amz-acl"]=t.aclStore.get(n),t.reducedRedundancy&&(r[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),t.serverSideEncryption&&(r[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),r[qq.s3.util.AWS_PARAM_PREFIX+t.filenameParam]=encodeURIComponent(t.getName(n)),qq.each(t.paramsStore.get(n),function(n,t){r[qq.s3.util.AWS_PARAM_PREFIX+n]=encodeURIComponent(t)}),u=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_INITIATE,e,o).withContentType(t.getContentType(n)).withHeaders(r),i.getSignature(n,{signatureConstructor:u}).then(function(n){r=u.getHeaders();r.Authorization="AWS "+t.signatureSpec.credentialsProvider.get().accessKey+":"+n.signature;f.success(r,u.getEndOfUrl())},f.failure),f}function e(n,i,u){var o,s,f,e,h,c=r[n],a=new DOMParser,l=a.parseFromString(i.responseText,"application/xml");delete r[n];u?(h=i.status,s=l.getElementsByTagName("Message"),s.length>0&&(e=s[0].textContent)):(o=l.getElementsByTagName("UploadId"),o.length>0?f=o[0].textContent:e="Upload ID missing from request");void 0===f?(e?t.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",n,e),"error"):t.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",n,h),"error"),c.failure("Problem initiating upload request with Amazon.",i)):(t.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",n,f)),c.success(f,i))}var u,i,r={},t={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(){},getKey:function(){},getName:function(){},log:function(){}};qq.extend(t,n);i=new qq.s3.RequestSigner({signatureSpec:t.signatureSpec,cors:t.cors,log:t.log});u=qq.extend(this,new qq.AjaxRequester({method:t.method,contentType:null,endpointStore:t.endpointStore,maxConnections:t.maxConnections,allowXRequestedWithAndCacheControl:!1,log:t.log,onComplete:e,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{send:function(n){var i=new qq.Promise;return f(n).then(function(f,e){t.log("Submitting S3 initiate multipart upload request for "+n);r[n]=i;u.initTransport(n).withPath(e).withHeaders(f).send()},i.failure),i}})};qq.s3.CompleteMultipartAjaxRequester=function(n){"use strict";function f(n,r){var u={},f=new qq.Promise,o=t.endpointStore.get(n),s=qq.s3.util.getBucket(o),e=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_COMPLETE,s,t.getKey(n)).withUploadId(r).withContentType("application/xml; charset=UTF-8");return i.getSignature(n,{signatureConstructor:e}).then(function(n){u=e.getHeaders();u.Authorization="AWS "+t.signatureSpec.credentialsProvider.get().accessKey+":"+n.signature;f.success(u,e.getEndOfUrl())},f.failure),f}function e(n,i,u){var f=r[n],s=new DOMParser,h=t.endpointStore.get(n),c=qq.s3.util.getBucket(h),e=(t.getKey(n),s.parseFromString(i.responseText,"application/xml")),o=e.getElementsByTagName("Bucket"),l=e.getElementsByTagName("Key");delete r[n];t.log(qq.format("Complete response status {}, body = {}",i.status,i.responseText));u?t.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",n,i.status),"error"):o.length&&l.length?o[0].textContent!==c&&(u=!0,t.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",n),"error")):(u=!0,t.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",n),"error"));u?f.failure("Problem asking Amazon to combine the parts!",i):f.success(i)}function o(n){var t=document.implementation.createDocument(null,"CompleteMultipartUpload",null);return n.sort(function(n,t){return n.part-t.part}),qq.each(n,function(n,i){var e=i.part,o=i.etag,r=t.createElement("Part"),u=t.createElement("PartNumber"),s=t.createTextNode(e),h=t.createTextNode(o),f=t.createElement("ETag");f.appendChild(h);u.appendChild(s);r.appendChild(u);r.appendChild(f);qq(t).children()[0].appendChild(r)}),(new XMLSerializer).serializeToString(t)}var u,i,r={},t={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(){},log:function(){}};qq.extend(t,n);i=new qq.s3.RequestSigner({signatureSpec:t.signatureSpec,cors:t.cors,log:t.log});u=qq.extend(this,new qq.AjaxRequester({method:t.method,contentType:"application/xml; charset=UTF-8",endpointStore:t.endpointStore,maxConnections:t.maxConnections,allowXRequestedWithAndCacheControl:!1,log:t.log,onComplete:e,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{send:function(n,i,e){var s=new qq.Promise;return f(n,i).then(function(i,f){var h=o(e);t.log("Submitting S3 complete multipart upload request for "+n);r[n]=s;delete i["Content-Type"];u.initTransport(n).withPath(f).withHeaders(i).withPayload(h).send()},s.failure),s}})};qq.s3.AbortMultipartAjaxRequester=function(n){"use strict";function u(n,r){var u={},f=new qq.Promise,o=t.endpointStore.get(n),s=qq.s3.util.getBucket(o),e=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_ABORT,s,t.getKey(n)).withUploadId(r);return i.getSignature(n,{signatureConstructor:e}).then(function(n){u=e.getHeaders();u.Authorization="AWS "+t.signatureSpec.credentialsProvider.get().accessKey+":"+n.signature;f.success(u,e.getEndOfUrl())},f.failure),f}function f(n,i,r){var u,e=new DOMParser,f=e.parseFromString(i.responseText,"application/xml"),o=f.getElementsByTagName("Error");t.log(qq.format("Abort response status {}, body = {}",i.status,i.responseText));r?t.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",n,i.status),"error"):o.length?(r=!0,u=f.getElementsByTagName("Message")[0].textContent,t.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",n,u),"error")):t.log(qq.format("Abort MPU request succeeded for file ID {}.",n))}var r,i,t={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(){},log:function(){}};qq.extend(t,n);i=new qq.s3.RequestSigner({signatureSpec:t.signatureSpec,cors:t.cors,log:t.log});r=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:t.method,contentType:null,endpointStore:t.endpointStore,maxConnections:t.maxConnections,allowXRequestedWithAndCacheControl:!1,log:t.log,onComplete:f,successfulResponseCodes:{DELETE:[204]}}));qq.extend(this,{send:function(n,i){u(n,i).then(function(i,u){t.log("Submitting S3 Abort multipart upload request for "+n);r.initTransport(n).withPath(u).withHeaders(i).send()})}})};qq.s3.XhrUploadHandler=function(n,t){"use strict";var h=t.getName,u=t.log,a=200,d=n.getKeyName,v=n.filenameParam,y=n.paramsStore,e=n.endpointStore,p=n.aclStore,w=n.objectProperties.reducedRedundancy,b=n.objectProperties.serverSideEncryption,k=n.validation,s=n.signature,i=this,c=n.signature.credentialsProvider,o={combine:function(n){var u=i._getPersistableData(n).uploadId,e=i._getPersistableData(n).etags,t=new qq.Promise;return f.completeMultipart.send(n,u,e).then(t.success,function(i,u){t.failure(r.done(n,u).response,u)}),t},done:function(n,t,u){var f,e=r.response.parse(n,t);e.success&&(f=t.getResponseHeader("ETag"),i._getPersistableData(n).etags||(i._getPersistableData(n).etags=[]),i._getPersistableData(n).etags.push({part:u+1,etag:f}))},initHeaders:function(t,u){var e={},h=n.endpointStore.get(t),l=qq.s3.util.getBucket(h),a=r.key.urlSafe(t),o=new qq.Promise,s=f.restSignature.constructStringToSign(f.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,l,a).withPartNum(u+1).withUploadId(i._getPersistableData(t).uploadId);return f.restSignature.getSignature(t+"."+u,{signatureConstructor:s}).then(function(n){e=s.getHeaders();e.Authorization="AWS "+c.get().accessKey+":"+n.signature;o.success(e,s.getEndOfUrl())},o.failure),o},put:function(t,u){var f=i._createXhr(t,u),s=i._getChunkData(t,u),h=n.endpointStore.get(t),e=new qq.Promise;return o.initHeaders(t,u).then(function(n,o){var c=h+"/"+o;i._registerProgressHandler(t,u,s.size);r.track(t,f,u).then(e.success,e.failure);f.open("PUT",c,!0);qq.each(n,function(n,t){f.setRequestHeader(n,t)});f.send(s.blob)},function(){e.failure({error:"Problem signing the chunk!"},f)}),e},send:function(n,t){var i=new qq.Promise;return o.setup(n).then(function(){o.put(n,t).then(i.success,i.failure)},function(n,t){i.failure({error:n},t)}),i},setup:function(n){var t=new qq.Promise,r=i._getPersistableData(n).uploadId,u=new qq.Promise;return r?r instanceof qq.Promise?r.then(function(n){t.success(n)}):t.success(r):(i._getPersistableData(n).uploadId=u,f.initiateMultipart.send(n).then(function(r){i._getPersistableData(n).uploadId=r;u.success(r);t.success(r)},function(r){i._getPersistableData(n).uploadId=null;t.failure(r);u.failure(r)})),t}},f={abortMultipart:new qq.s3.AbortMultipartAjaxRequester({endpointStore:e,signatureSpec:s,cors:n.cors,log:u,getKey:function(n){return r.key.urlSafe(n)}}),completeMultipart:new qq.s3.CompleteMultipartAjaxRequester({endpointStore:e,signatureSpec:s,cors:n.cors,log:u,getKey:function(n){return r.key.urlSafe(n)}}),initiateMultipart:new qq.s3.InitiateMultipartAjaxRequester({filenameParam:v,endpointStore:e,paramsStore:y,signatureSpec:s,aclStore:p,reducedRedundancy:w,serverSideEncryption:b,cors:n.cors,log:u,getContentType:function(n){return i._getMimeType(n)},getKey:function(n){return r.key.urlSafe(n)},getName:function(n){return h(n)}}),policySignature:new qq.s3.RequestSigner({expectingPolicy:!0,signatureSpec:s,cors:n.cors,log:u}),restSignature:new qq.s3.RequestSigner({signatureSpec:s,cors:n.cors,log:u})},l={initParams:function(n){var t=y.get(n);return t[v]=h(n),qq.s3.util.generateAwsParams({endpoint:e.get(n),params:t,type:i._getMimeType(n),key:i.getThirdPartyFileId(n),accessKey:c.get().accessKey,sessionToken:c.get().sessionToken,acl:p.get(n),expectedStatus:a,minFileSize:k.minSizeLimit,maxFileSize:k.maxSizeLimit,reducedRedundancy:w,serverSideEncryption:b,log:u},qq.bind(f.policySignature.getSignature,this,n))},send:function(n){var t=new qq.Promise,f=i._createXhr(n),e=i.getFile(n);return i._registerProgressHandler(n),r.track(n,f).then(t.success,t.failure),l.setup(n,f,e).then(function(t){u("Sending upload request for "+n);f.send(t)},t.failure),t},setup:function(n,t,i){var r=new FormData,f=e.get(n),o=f,u=new qq.Promise;return l.initParams(n).then(function(n){t.open("POST",o,!0);qq.obj2FormData(n,r);r.append("file",i);u.success(r)},function(n){u.failure({error:n})}),u}},r={done:function(n,t){var i=r.response.parse(n,t),f=i.success!==!0;return f&&r.response.shouldReset(i.code)&&(u("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),i.reset=!0),{success:!f,response:i}},key:{promise:function(n){var r=new qq.Promise,t=i.getThirdPartyFileId(n);return null==t?(t=new qq.Promise,i._setThirdPartyFileId(n,t),d(n,h(n)).then(function(t){i._setThirdPartyFileId(n,t);r.success(t)},function(t){i._setThirdPartyFileId(n,null);r.failure(t)})):qq.isGenericPromise(t)?r.then(t.success,t.failure):r.success(t),r},urlSafe:function(n){return encodeURIComponent(i.getThirdPartyFileId(n))}},response:{parse:function(n,t){var i,f={};try{u(qq.format("Received response status {} with body: {}",t.status,t.responseText));t.status===a?f.success=!0:(i=r.response.parseError(t.responseText),i&&(f.error=i.message,f.code=i.code))}catch(e){u("Error when attempting to parse xhr response text ("+e.message+")","error")}return f},parseError:function(n){var t,i,f=new DOMParser,r=f.parseFromString(n,"application/xml"),e=r.getElementsByTagName("Error"),u={};if(e.length)return(t=r.getElementsByTagName("Code"),i=r.getElementsByTagName("Message"),i.length&&(u.message=i[0].textContent),t.length&&(u.code=t[0].textContent),u)},shouldReset:function(n){return"EntityTooSmall"===n||"InvalidPart"===n||"InvalidPartOrder"===n||"NoSuchUpload"===n}},start:function(n,t){var i=new qq.Promise;return r.key.promise(n).then(function(){null==t?l.send(n).then(i.success,i.failure):o.send(n,t).then(i.success,i.failure)},function(n){i.failure({error:n})}),i},track:function(n,t,i){var u=new qq.Promise;return t.onreadystatechange=function(){if(4===t.readyState){var f;null==i?(f=r.done(n,t),u[f.success?"success":"failure"](f.response,t)):(o.done(n,t,i),f=r.done(n,t),u[f.success?"success":"failure"](f.response,t))}},u}};qq.extend(this,{uploadChunk:r.start,uploadFile:r.start});qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"s3"},n),proxy:qq.extend({getEndpoint:n.endpointStore.get},t)}));qq.override(this,function(n){return{expunge:function(t){var r=i._getPersistableData(t)&&i._getPersistableData(t).uploadId,u=i._maybeDeletePersistedChunkData(t);void 0!==r&&u&&f.abortMultipart.send(t,r);n.expunge(t)},finalizeChunks:function(n){return o.combine(n)},_getLocalStorageId:function(t){var i=n._getLocalStorageId(t),r=e.get(t),u=qq.s3.util.getBucket(r);return i+"-"+u}}})};qq.s3.FormUploadHandler=function(n,t){"use strict";function c(t,u){var o=n.endpointStore.get(t),s=qq.s3.util.getBucket(o),e,f;try{if(e=u.contentDocument||u.contentWindow.document,e.body.innerHTML,f=qq.s3.util.parseIframeResponse(u),f.bucket===s&&f.key===qq.s3.util.encodeQueryStringParam(i.getThirdPartyFileId(t)))return!0;r("Response from AWS included an unexpected bucket or key name.","error")}catch(h){r("Error when attempting to parse form upload response ("+h.message+")","error")}return!1}function l(n){var t=b.get(n);return t[w]=u(n),qq.s3.util.generateAwsParams({endpoint:k.get(n),params:t,key:i.getThirdPartyFileId(n),accessKey:h.get().accessKey,sessionToken:h.get().sessionToken,acl:d.get(n),minFileSize:o.minSizeLimit,maxFileSize:o.maxSizeLimit,successRedirectUrl:s,reducedRedundancy:g,serverSideEncryption:nt,log:r},qq.bind(it.getSignature,this,n))}function a(t,r){var f=new qq.Promise,o=n.demoMode?"GET":"POST",s=n.endpointStore.get(t),h=u(t);return l(t).then(function(n){var t=i._initFormForUpload({method:o,endpoint:s,params:n,paramsInBody:!0,targetName:r.name});f.success(t)},function(n){f.failure(n);e(t,r,h,{error:n})}),f}function f(n){var t=i._createIframe(n),f=i.getInput(n),u=new qq.Promise;return a(n,t).then(function(o){o.appendChild(f);i._attachLoadEvent(t,function(i){r("iframe loaded");i?i.success===!1&&(r("Amazon likely rejected the upload request","error"),u.failure(i)):(i={},i.success=c(n,t),i.success===!1?(r("A success response was received by Amazon, but it was invalid in some way.","error"),u.failure(i)):(qq.extend(i,qq.s3.util.parseIframeResponse(t)),u.success(i)));e(n,t)});r("Sending upload request for "+n);o.submit();qq(o).remove()},u.failure),u}function e(n,t){i._detachLoadEvent(n);t&&qq(t).remove()}var i=this,v=t.onUuidChanged,u=t.getName,y=t.getUuid,r=t.log,p=n.getKeyName,w=n.filenameParam,b=n.paramsStore,k=n.endpointStore,d=n.aclStore,g=n.objectProperties.reducedRedundancy,nt=n.objectProperties.serverSideEncryption,o=n.validation,tt=n.signature,s=n.iframeSupport.localBlankPagePath,h=n.signature.credentialsProvider,it=new qq.s3.RequestSigner({signatureSpec:tt,cors:n.cors,log:r});if(void 0===s)throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");qq.extend(this,new qq.FormUploadHandler({options:{isCors:!1,inputName:"file"},proxy:{onCancel:n.onCancel,onUuidChanged:v,getName:u,getUuid:y,log:r}}));qq.extend(this,{uploadFile:function(n){var r=u(n),t=new qq.Promise;return i.getThirdPartyFileId(n)?f(n).then(t.success,t.failure):p(n,r).then(function(r){i._setThirdPartyFileId(n,r);f(n).then(t.success,t.failure)},function(n){t.failure({error:n})}),t}})},function(){"use strict";qq.s3.FineUploader=function(n){var t={failedUploadTextDisplay:{mode:"custom"}};qq.extend(t,n,!0);qq.FineUploader.call(this,t,"s3");qq.supportedFeatures.ajaxUploading||void 0!==t.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath<\/code> property of the <code>iframeSupport<\/code> option since this browser does not support the File API!<\/div>")};qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype);qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi)}(),function(n){"use strict";n.fn.fineUploaderS3=function(t){return"object"==typeof t&&(t.endpointType="s3"),n.fn.fineUploader.apply(this,arguments)}}(jQuery);qq.azure=qq.azure||{};qq.azure.util=qq.azure.util||function(){"use strict";return{AZURE_PARAM_PREFIX:"x-ms-meta-",getParamsAsHeaders:function(n){var t={};return qq.each(n,function(n,i){var r=qq.azure.util.AZURE_PARAM_PREFIX+n;qq.isFunction(i)?t[r]=encodeURIComponent(String(i())):qq.isObject(i)?qq.extend(t,qq.azure.util.getParamsAsHeaders(i)):t[r]=encodeURIComponent(String(i))}),t},parseAzureError:function(n,t){var r,u,e=new DOMParser,o=e.parseFromString(n,"application/xml"),f=o.getElementsByTagName("Error")[0],i={};return t("Received error response: "+n,"error"),f?(u=f.getElementsByTagName("Message")[0],u&&(i.message=u.textContent),r=f.getElementsByTagName("Code")[0],r&&(i.code=r.textContent),t("Parsed Azure error: "+JSON.stringify(i),"error"),i):void 0}}}(),function(){"use strict";qq.azure.FineUploaderBasic=function(n){if(!qq.supportedFeatures.ajaxUploading)throw new qq.Error("Uploading directly to Azure is not possible in this browser.");var t={signature:{endpoint:null,customHeaders:{}},blobProperties:{name:"uuid"},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},chunking:{partSize:4e6,minFileSize:4000001}};qq.extend(t,n,!0);qq.FineUploaderBasic.call(this,t);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._failedSuccessRequestCallbacks={};this._cannedBlobNames={}};qq.extend(qq.azure.FineUploaderBasic.prototype,qq.basePublicApi);qq.extend(qq.azure.FineUploaderBasic.prototype,qq.basePrivateApi);qq.extend(qq.azure.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi);qq.extend(qq.azure.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi);qq.extend(qq.azure.FineUploaderBasic.prototype,{getBlobName:function(n){return null==this._cannedBlobNames[n]?this._handler.getThirdPartyFileId(n):this._cannedBlobNames[n]},_getEndpointSpecificParams:function(n){return{blob:this.getBlobName(n),uuid:this.getUuid(n),name:this.getName(n),container:this._endpointStore.get(n)}},_createUploadHandler:function(){return qq.FineUploaderBasic.prototype._createUploadHandler.call(this,{signature:this._options.signature,onGetBlobName:qq.bind(this._determineBlobName,this),deleteBlob:qq.bind(this._deleteBlob,this,!0)},"azure")},_determineBlobName:function(n){var t=this._options.blobProperties.name,r=this.getUuid(n),i=this.getName(n),u=qq.getExtension(i);if(!qq.isString(t))return t.call(this,n);switch(t){case"uuid":return(new qq.Promise).success(r+"."+u);case"filename":return(new qq.Promise).success(i);default:return new qq.Promise.failure("Invalid blobName option value - "+t)}},_addCannedFile:function(n){var t;if(null==n.blobName)throw new qq.Error("Did not find blob name property in server session response.  This is required!");return t=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments),this._cannedBlobNames[t]=n.blobName,t},_deleteBlob:function(n,t){var i=this,r={},f={get:function(n){return i._endpointStore.get(n)+"/"+i.getBlobName(n)}},e={get:function(n){return r[n]}},o=function(n,t){r[n]=t;u.send(n)},s=function(t,r,u){n?(i.log("Will cancel upload, but cannot remove uncommitted parts from Azure due to issue retrieving SAS","error"),qq.FineUploaderBasic.prototype._onCancel.call(i,t,i.getName(t))):(i._onDeleteComplete(t,u,!0),i._options.callbacks.onDeleteComplete(t,u,!0))},u=new qq.azure.DeleteBlob({endpointStore:e,log:qq.bind(i.log,i),onDelete:function(n){i._onDelete(n);i._options.callbacks.onDelete(n)},onDeleteComplete:function(t,u,f){delete r[t];f&&(n?i.log("Will cancel upload, but failed to remove uncommitted parts from Azure.","error"):qq.azure.util.parseAzureError(u.responseText,qq.bind(i.log,i)));n?(qq.FineUploaderBasic.prototype._onCancel.call(i,t,i.getName(t)),i.log("Deleted uncommitted blob chunks for "+t)):(i._onDeleteComplete(t,u,f),i._options.callbacks.onDeleteComplete(t,u,f))}}),h=new qq.azure.GetSas({cors:this._options.cors,endpointStore:{get:function(){return i._options.signature.endpoint}},restRequestVerb:u.method,log:qq.bind(i.log,i)});h.request(t,f.get(t)).then(qq.bind(o,i,t),qq.bind(s,i,t))},_createDeleteHandler:function(){var n=this;return{sendDelete:function(t){n._deleteBlob(!1,t)}}}})}();qq.azure.XhrUploadHandler=function(n,t){"use strict";function h(n){var t=new qq.Promise;return f(n).then(function(f){var o=i._getMimeType(n),s=i._getPersistableData(n).blockIdEntries;u.putBlockList.send(n,f,s,o,function(t){i._registerXhr(n,null,t,u.putBlockList)}).then(function(i){r("Success combining chunks for id "+n);t.success({},i)},function(i){r("Attempt to combine chunks failed for id "+n,"error");e(i,t)})},t.failure),t}function c(n){var r=a.get(n),t=new qq.Promise,u=function(u){i._setThirdPartyFileId(n,u);t.success(r+"/"+u)},f=function(n){t.failure(n)};return b(n).then(u,f),t}function f(n,t){var f=null==t?n:n+"."+t,i=new qq.Promise,e=function(n){r("GET SAS request succeeded.");i.success(n)},o=function(n,t){r("GET SAS request failed: "+n,"error");i.failure({error:"Problem communicating with local server"},t)},s=function(n){u.getSasForPutBlobOrBlock.request(f,n).then(e,o)},h=function(t){r(qq.format("Failed to determine blob name for ID {} - {}",n,t),"error");i.failure({error:t})};return c(n).then(s,h),i}function e(n,t){var i=qq.azure.util.parseAzureError(n.responseText,r);t.failure({error:"Problem sending file to Azure",azureError:i&&i.message,reset:403===n.status})}var i=this,r=t.log,l=n.cors,a=n.endpointStore,v=n.paramsStore,o=n.signature,y=n.filenameParam,p=n.chunking.minFileSize,w=n.deleteBlob,b=n.onGetBlobName,k=t.getName,d=t.getSize,s=function(n){var t=v.get(n);return t[y]=k(n),t},u={putBlob:new qq.azure.PutBlob({getBlobMetadata:s,log:r}),putBlock:new qq.azure.PutBlock({log:r}),putBlockList:new qq.azure.PutBlockList({getBlobMetadata:s,log:r}),getSasForPutBlobOrBlock:new qq.azure.GetSas({cors:l,customHeaders:o.customHeaders,endpointStore:{get:function(){return o.endpoint}},log:r,restRequestVerb:"PUT"})};qq.extend(this,{uploadChunk:function(n,t){var o=new qq.Promise;return f(n,t).then(function(f){var s=i._createXhr(n,t),h=i._getChunkData(n,t);i._registerProgressHandler(n,t,h.size);i._registerXhr(n,t,s,u.putBlock);u.putBlock.upload(n+"."+t,s,f,t,h.blob).then(function(t){i._getPersistableData(n).blockIdEntries||(i._getPersistableData(n).blockIdEntries=[]);i._getPersistableData(n).blockIdEntries.push(t);r("Put Block call succeeded for "+n);o.success({},s)},function(){r(qq.format("Put Block call failed for ID {} on part {}",n,t),"error");e(s,o)})},o.failure),o},uploadFile:function(n){var t=new qq.Promise,o=i.getFile(n);return f(n).then(function(f){var s=i._createXhr(n);i._registerProgressHandler(n);u.putBlob.upload(n,s,f,o).then(function(){r("Put Blob call succeeded for "+n);t.success({},s)},function(){r("Put Blob call failed for "+n,"error");e(s,t)})},t.failure),t}});qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"azure"},n),proxy:qq.extend({getEndpoint:n.endpointStore.get},t)}));qq.override(this,function(n){return{expunge:function(t){var u=i._wasCanceled(t),r=i._getPersistableData(t),f=r&&r.blockIdEntries||[];u&&f.length>0&&w(t);n.expunge(t)},finalizeChunks:function(n){return h(n)},_shouldChunkThisFile:function(t){var i=n._shouldChunkThisFile(t);return i&&d(t)>=p}}})};qq.azure.GetSas=function(n){"use strict";function u(n,t,r){var u=i[n];r?u.failure("Received response code "+t.status,t):t.responseText.length?u.success(t.responseText):u.failure("Empty response.",t);delete i[n]}var r,t={cors:{expected:!1,sendCredentials:!1},customHeaders:{},restRequestVerb:"PUT",endpointStore:null,log:function(){}},i={};qq.extend(t,n);r=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",successfulResponseCodes:{GET:[200]},contentType:null,customHeaders:t.customHeaders,endpointStore:t.endpointStore,cors:t.cors,log:t.log,onComplete:u}));qq.extend(this,{request:function(n,u){var f=new qq.Promise,e=t.restRequestVerb;return t.log(qq.format("Submitting GET SAS request for a {} REST request related to file ID {}.",e,n)),i[n]=f,r.initTransport(n).withParams({bloburi:u,_method:e}).withCacheBuster().send(),f}})};qq.azure.DeleteBlob=function(n){"use strict";var r,i="DELETE",t={endpointStore:{},onDelete:function(){},onDeleteComplete:function(){},log:function(){}};qq.extend(t,n);r=qq.extend(this,new qq.AjaxRequester({validMethods:[i],method:i,successfulResponseCodes:function(){var n={};return n[i]=[202],n}(),contentType:null,endpointStore:t.endpointStore,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:t.log,onSend:t.onDelete,onComplete:t.onDeleteComplete}));qq.extend(this,{method:i,send:function(n){return t.log("Submitting Delete Blob request for "+n),r.initTransport(n).send()}})};qq.azure.PutBlob=function(n){"use strict";var f,t="PUT",i={getBlobMetadata:function(){},log:function(){}},r={},u={},e={get:function(n){return r[n]}};qq.extend(i,n);f=qq.extend(this,new qq.AjaxRequester({validMethods:[t],method:t,successfulResponseCodes:function(){var n={};return n[t]=[201],n}(),contentType:null,customHeaders:function(n){var r=i.getBlobMetadata(n),t=qq.azure.util.getParamsAsHeaders(r);return t["x-ms-blob-type"]="BlockBlob",t},endpointStore:e,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:i.log,onComplete:function(n,t,i){var f=u[n];delete r[n];delete u[n];i?f.failure():f.success()}}));qq.extend(this,{method:t,upload:function(n,t,e,o){var s=new qq.Promise;return i.log("Submitting Put Blob request for "+n),u[n]=s,r[n]=e,f.initTransport(n).withPayload(o).withHeaders({"Content-Type":o.type}).send(t),s}})};qq.azure.PutBlockList=function(n){"use strict";function e(n){var t=document.implementation.createDocument(null,"BlockList",null);return n.sort(function(n,t){return n.part-t.part}),qq.each(n,function(n,i){var r=t.createElement("Latest"),u=t.createTextNode(i.id);r.appendChild(u);qq(t).children()[0].appendChild(r)}),(new XMLSerializer).serializeToString(t)}var f,t="PUT",r={},i={getBlobMetadata:function(){},log:function(){}},u={},o={get:function(n){return u[n]}};qq.extend(i,n);f=qq.extend(this,new qq.AjaxRequester({validMethods:[t],method:t,successfulResponseCodes:function(){var n={};return n[t]=[201],n}(),customHeaders:function(n){var t=i.getBlobMetadata(n);return qq.azure.util.getParamsAsHeaders(t)},contentType:"text/plain",endpointStore:o,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:i.log,onSend:function(){},onComplete:function(n,t,i){var f=r[n];delete u[n];delete r[n];i?f.failure(t):f.success(t)}}));qq.extend(this,{method:t,send:function(n,t,o,s,h){var c,l=new qq.Promise,a=e(o);return r[n]=l,i.log(qq.format("Submitting Put Block List request for {}",n)),u[n]=qq.format("{}&comp=blocklist",t),c=f.initTransport(n).withPayload(a).withHeaders({"x-ms-blob-content-type":s}).send(),h(c),l}})};qq.azure.PutBlock=function(n){"use strict";function o(n){var t=5,i=new Array(t+1).join("0"),r=(i+n).slice(-t);return btoa(r)}var e,t="PUT",i={},r={},u={log:function(){}},f={},s={get:function(n){return f[n]}};qq.extend(u,n);e=qq.extend(this,new qq.AjaxRequester({validMethods:[t],method:t,successfulResponseCodes:function(){var n={};return n[t]=[201],n}(),contentType:null,endpointStore:s,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:u.log,onComplete:function(n,t,u){var e=r[n],o=i[n];delete f[n];delete r[n];delete i[n];u?e.failure():e.success(o)}}));qq.extend(this,{method:t,upload:function(n,t,s,h,c){var l=new qq.Promise,a=o(h);return r[n]=l,u.log(qq.format("Submitting Put Block request for {} = part {}",n,h)),f[n]=qq.format("{}&comp=block&blockid={}",s,encodeURIComponent(a)),i[n]={part:h,id:a},e.initTransport(n).withPayload(c).send(t),l}})},function(){"use strict";qq.azure.FineUploader=function(n){var t={failedUploadTextDisplay:{mode:"custom"}};qq.extend(t,n,!0);qq.FineUploader.call(this,t,"azure")};qq.extend(qq.azure.FineUploader.prototype,qq.azure.FineUploaderBasic.prototype);qq.extend(qq.azure.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.azure.FineUploader.prototype,qq.uiPrivateApi);qq.extend(qq.azure.FineUploader.prototype,{})}(),function(n){"use strict";n.fn.fineUploaderAzure=function(t){return"object"==typeof t&&(t.endpointType="azure"),n.fn.fineUploader.apply(this,arguments)}}(jQuery);CryptoJS=CryptoJS||function(n,t){var u={},f=u.lib={},i=f.Base=function(){function n(){}return{extend:function(t){n.prototype=this;var i=new n;return t&&i.mixIn(t),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),r=f.WordArray=i.extend({init:function(n,i){n=this.words=n||[];this.sigBytes=i!=t?i:4*n.length},toString:function(n){return(n||c).stringify(this)},concat:function(n){var i=this.words,r=n.words,u=this.sigBytes,f=n.sigBytes,e,t;if(this.clamp(),u%4)for(t=0;f>t;t++)e=255&r[t>>>2]>>>24-8*(t%4),i[u+t>>>2]|=e<<24-8*((u+t)%4);else if(r.length>65535)for(t=0;f>t;t+=4)i[u+t>>>2]=r[t>>>2];else i.push.apply(i,r);return this.sigBytes+=f,this},clamp:function(){var i=this.words,t=this.sigBytes;i[t>>>2]&=4294967295<<32-8*(t%4);i.length=n.ceil(t/4)},clone:function(){var n=i.clone.call(this);return n.words=this.words.slice(0),n},random:function(t){for(var i=[],u=0;t>u;u+=4)i.push(0|4294967296*n.random());return new r.init(i,t)}}),e=u.enc={},c=e.Hex={stringify:function(n){for(var r,u=n.words,f=n.sigBytes,i=[],t=0;f>t;t++)r=255&u[t>>>2]>>>24-8*(t%4),i.push((r>>>4).toString(16)),i.push((15&r).toString(16));return i.join("")},parse:function(n){for(var i=n.length,u=[],t=0;i>t;t+=2)u[t>>>3]|=parseInt(n.substr(t,2),16)<<24-4*(t%8);return new r.init(u,i/2)}},o=e.Latin1={stringify:function(n){for(var r,u=n.words,f=n.sigBytes,i=[],t=0;f>t;t++)r=255&u[t>>>2]>>>24-8*(t%4),i.push(String.fromCharCode(r));return i.join("")},parse:function(n){for(var i=n.length,u=[],t=0;i>t;t++)u[t>>>2]|=(255&n.charCodeAt(t))<<24-8*(t%4);return new r.init(u,i)}},l=e.Utf8={stringify:function(n){try{return decodeURIComponent(escape(o.stringify(n)))}catch(t){throw new Error("Malformed UTF-8 data");}},parse:function(n){return o.parse(unescape(encodeURIComponent(n)))}},s=f.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(n){"string"==typeof n&&(n=l.parse(n));this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(t){var e=this._data,h=e.words,c=e.sigBytes,o=this.blockSize,a=4*o,u=c/a,i,s,f,l;if(u=t?n.ceil(u):n.max((0|u)-this._minBufferSize,0),i=u*o,s=n.min(4*i,c),i){for(f=0;i>f;f+=o)this._doProcessBlock(h,f);l=h.splice(0,i);e.sigBytes-=s}return new r.init(l,s)},clone:function(){var n=i.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0}),h;return f.Hasher=s.extend({cfg:i.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){s.reset.call(this);this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){n&&this._append(n);return this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,i){return new n.init(i).finalize(t)}},_createHmacHelper:function(n){return function(t,i){return new h.HMAC.init(n,i).finalize(t)}}}),h=u.algo={},u}(Math);!function(){var n=CryptoJS,t=n.lib,i=t.WordArray,r=n.enc;r.Base64={stringify:function(n){var u=n.words,e=n.sigBytes,o=this._map,i,t,f;for(n.clamp(),i=[],t=0;e>t;t+=3)for(var s=255&u[t>>>2]>>>24-8*(t%4),h=255&u[t+1>>>2]>>>24-8*((t+1)%4),c=255&u[t+2>>>2]>>>24-8*((t+2)%4),l=s<<16|h<<8|c,r=0;4>r&&e>t+.75*r;r++)i.push(o.charAt(63&l>>>6*(3-r)));if(f=o.charAt(64),f)for(;i.length%4;)i.push(f);return i.join("")},parse:function(n){var e=n.length,u=this._map,o=u.charAt(64),f,h,c;o&&(f=n.indexOf(o),-1!=f&&(e=f));for(var s=[],r=0,t=0;e>t;t++)t%4&&(h=u.indexOf(n.charAt(t-1))<<2*(t%4),c=u.indexOf(n.charAt(t))>>>6-2*(t%4),s[r>>>2]|=(h|c)<<24-8*(r%4),r++);return i.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){var n=CryptoJS,t=n.lib,i=t.Base,r=n.enc,u=r.Utf8,f=n.algo;f.HMAC=i.extend({init:function(n,t){var r,f;n=this._hasher=new n.init;"string"==typeof t&&(t=u.parse(t));r=n.blockSize;f=4*r;t.sigBytes>f&&(t=n.finalize(t));t.clamp();for(var e=this._oKey=t.clone(),o=this._iKey=t.clone(),s=e.words,h=o.words,i=0;r>i;i++)s[i]^=1549556828,h[i]^=909522486;e.sigBytes=o.sigBytes=f;this.reset()},reset:function(){var n=this._hasher;n.reset();n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(n){var t=this._hasher,i=t.finalize(n);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})}(),function(){var t=CryptoJS,r=t.lib,f=r.WordArray,i=r.Hasher,e=t.algo,n=[],u=e.SHA1=i.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,i){for(var c,l,r=this._hash.words,s=r[0],f=r[1],e=r[2],o=r[3],h=r[4],u=0;80>u;u++)16>u?n[u]=0|t[i+u]:(c=n[u-3]^n[u-8]^n[u-14]^n[u-16],n[u]=c<<1|c>>>31),l=(s<<5|s>>>27)+h+n[u],l+=20>u?(f&e|~f&o)+1518500249:40>u?(f^e^o)+1859775393:60>u?(f&e|f&o|e&o)-1894007588:(f^e^o)-899497514,h=o,o=e,e=f<<30|f>>>2,f=s,s=l;r[0]=0|r[0]+s;r[1]=0|r[1]+f;r[2]=0|r[2]+e;r[3]=0|r[3]+o;r[4]=0|r[4]+h},_doFinalize:function(){var i=this._data,n=i.words,r=8*this._nDataBytes,t=8*i.sigBytes;return n[t>>>5]|=128<<24-t%32,n[(t+64>>>9<<4)+14]=Math.floor(r/4294967296),n[(t+64>>>9<<4)+15]=r,i.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var n=i.clone.call(this);return n._hash=this._hash.clone(),n}});t.SHA1=i._createHelper(u);t.HmacSHA1=i._createHmacHelper(u)}()